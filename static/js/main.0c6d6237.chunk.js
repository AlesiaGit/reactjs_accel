(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(t,e,a){},16:function(t,e,a){},17:function(t,e,a){"use strict";a.r(e);var n,o=a(0),c=a.n(o),i=a(7),r=a.n(i),s=(a(15),a(1)),l=a(2),u=a(4),d=a(3),h=a(5),v=(a(16),a(8)),p=0,m=0,g=6371e3,w=function(t){function e(t){var a;return Object(s.a)(this,e),(a=Object(u.a)(this,Object(d.a)(e).call(this,t))).componentDidMount=function(){a.setState({historicAccelValues:[].concat(Object(v.a)(a.state.historicAccelValues),[a.state.currentAccelValues])});var t=a.canvas.current;a.setState({context:t.getContext("2d")})},a.startRecording=function(){"geolocation"in navigator&&(n=navigator.geolocation.watchPosition(a.updateLatestPoint),window.DeviceMotionEvent&&window.addEventListener("devicemotion",a.updateAccelValues))},a.updateAccelValues=function(t){null!==t.acceleration.x&&null!==t.acceleration.y&&null!==t.acceleration.z&&a.setState({currentAccelValues:{x:t.acceleration.x.toFixed(4),y:t.acceleration.y.toFixed(4),z:t.acceleration.z.toFixed(4)}},function(){m===a.canvas.current.width&&(m=0);var t=1;for(var e in a.drawBackground("white",0),a.state.currentAccelValues)a.drawLine(a.state.currentAccelValues[e],t),t++;m++,a.drawBackground("red",1);for(var n=2;n<5;n++)a.drawBackground("white",n)})},a.toRad=function(t){return t*Math.PI/180},a.calculateDistance=function(t,e,n,o){var c=a.toRad(n-t),i=a.toRad(o-e),r=Math.sin(c/2)*Math.sin(c/2)+Math.cos(a.toRad(t))*Math.cos(a.toRad(n))*Math.sin(i/2)*Math.sin(i/2),s=2*g*Math.atan2(Math.sqrt(r),Math.sqrt(1-r));return console.log(s),s},a.drawLine=function(t,e){var n=100*e-50,o=a.state.context;o.beginPath(),o.strokeStyle="black",o.moveTo(m,n+5*t),o.lineTo(m,n),o.stroke()},a.drawBackground=function(t,e){var n=a.state.context;n.beginPath(),n.strokeStyle=t,n.moveTo(m+e,0),n.lineTo(m+e,300),n.stroke()},a.updateLatestPoint=function(t){null===t.coords.speed||t.coords.speed;a.setState({prevPoint:a.state.latestPoint},function(){var e=a.state.prevPoint,n=t.coords.latitude,o=t.coords.longitude,c=a.calculateDistance(e.lat,e.lng,n,o),i=(e.timestamp-t.timestamp)/6e4,r=Math.abs(c/i);console.log(r),a.setState({latestPoint:{lat:n.toFixed(6),lng:o.toFixed(6),speed:r.toFixed(4),timestamp:t.timestamp}})})},a.updateList=function(){},a.stopRecording=function(){navigator.geolocation.clearWatch(n),window.removeEventListener("devicemotion",a.updateAccelValues)},a.state={list:[],latestPoint:{lat:p.toFixed(6),lng:p.toFixed(6),speed:p.toFixed(6),timestamp:new Date(Date.now()).getTime()},prevPoint:{lat:p.toFixed(6),lng:p.toFixed(6),speed:p.toFixed(6),timestamp:new Date(Date.now()).getTime()},historicAccelValues:[],currentAccelValues:{x:0,y:0,z:0},context:null},a.canvas=c.a.createRef(),a}return Object(h.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){return c.a.createElement("div",null,c.a.createElement("button",{onClick:this.startRecording},"Start recording"),c.a.createElement("div",null,"lat=",this.state.latestPoint.lat,", lng=",this.state.latestPoint.lng,", speed=",this.state.latestPoint.speed," "),c.a.createElement("canvas",{id:"canvas",width:"400",height:"300",ref:this.canvas}),c.a.createElement("button",{onClick:this.stopRecording},"Stop recording"))}}]),e}(o.Component),f=function(t){function e(){return Object(s.a)(this,e),Object(u.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(h.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){return c.a.createElement("div",{className:"App"},c.a.createElement(w,null))}}]),e}(o.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(c.a.createElement(f,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})},9:function(t,e,a){t.exports=a(17)}},[[9,1,2]]]);
//# sourceMappingURL=main.0c6d6237.chunk.js.map