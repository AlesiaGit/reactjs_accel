(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{20:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAA/1BMVEVHcEz/PYb/QIH/QIH/QIH/QIH/P4H/AP//QIH/P4H/P4D/QIH/P4H/QIH/PoP/QIH/QYD/QIH/QIL/P4D/P4H/QIH/QYL/QID/QIH/QIH/QIH/QIH/QIL/QIH/QIH/QIH/QIH/P4L/QIH/QIL/QIH/P4D/QIL/QYL/QIFmBjaAEEPyO3t1Cz6QFkpqCDitIVnxO3qyI1ujHlRpBzhwCjtvCjt3DD6jHVR/EEK2JV7dM3CbGlD7Pn98DkCIE0ezI1zrOXf2PHzUMGzNLWnvOnrTMGtrCDiMFEivIlrCKGOJFEfyO3qvIVnuOnnMLWjHKmXuOnh/D0L8P3+nHlb9P4BL/8vHAAAAKHRSTlMAFeP89HNJAeTVmezN/iH7SvJ0nem+VlTLytT4eHegtPe14mxroXBymdOUCgAAAShJREFUSMdjYBgFwxFoaAyQBnYZDg2CQFpCjB2mQVmDOKAK08EJFdDW0kQBWg5oOtQh6hl5NbDq0HVEt4IDYgUbiB2gj67DKAgkYmNkgKSDD6yBFcT009TH5mwXO01XJK4AWAMXiOmjqWmIqd5KR1PTEokvBNagCGJaAx2BYYenHlDUHElAGKyBB8S0AzkbXQPE70gComANTCCmLU4NFkgCnGAN3CCmDk4NZkgCImANLCCmKU4NJkgCgmANzCCmMU4NekgC/ORpINlJJHtaidRgBUecFwkRJw9LGvboGvzdsCYNcOLzICHxgZO3M6b5IODtrumEkbzBGcgXbL5BICIDBYfgykAkZ1EGKWILATVoqaFCZDEjBy+YZJkIq1aQFB/MhfEooDYAALj/shmbD+/0AAAAAElFTkSuQmCC"},22:function(t,e,a){t.exports=a(53)},27:function(t,e,a){},28:function(t,e,a){},53:function(t,e,a){"use strict";a.r(e);var n=a(2),o=a.n(n),i=a(7),r=a.n(i);a(27),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var c,s=a(10),l=a(11),d=a(13),u=a(12),m=a(14),g=(a(28),a(21)),p=a(16),h=a(18),v=(a.n(h).a.initializeApp({apiKey:"AIzaSyBexhCuV6JNCsyakFOeBK7NmFb_oM_pgxo",authDomain:"bumpyroadsinformer.firebaseapp.com",databaseURL:"https://bumpyroadsinformer.firebaseio.com",projectId:"bumpyroadsinformer",storageBucket:"",messagingSenderId:"854546127925",appId:"1:854546127925:web:d3c2a81c7c4e9ba6"}).firestore(),a(8)),A=a(20),w=a.n(A),f=(new Date(Date.now()).getTime(),{x:0,y:0,z:0}),C=0,D=6371e3,I={enableHighAccuracy:!0,timeout:5e3,maximumAge:0},b=function(t){function e(t){var a;Object(s.a)(this,e),(a=Object(d.a)(this,Object(u.a)(e).call(this,t))).componentDidMount=function(){var t=a.canvas.current;a.setState({context:t.getContext("2d")}),a.setState({context:t.getContext("2d"),isDataFetched:!0,data:[]}),a.props.centerAroundCurrentLocation&&navigator&&navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(t){console.log(t);var e=t.coords;a.setState({currentPosition:{lat:e.latitude,lng:e.longitude,speed:0,timestamp:new Date(Date.now()).getTime()}})}),a.loadMap()},a.loadMap=function(){if(a.props&&a.props.google){var t=a.props.google.maps,e=a.props.zoom,n=a.state.currentPosition,o=n.lat,i=n.lng,r=new t.LatLng(o,i),c=Object.assign({},{center:r,zoom:e});a.map=new t.Map(a.mymap,c)}},a.onMapReady=function(t,e){a.map=e,e.addListener("zoom_changed",a.updateZoom)},a.updateZoom=function(){a.setState({zoom:a.map.getZoom()},function(){console.log(a.state.zoom)})},a.recenterMap=function(){var t=a.map,e=a.state.currentPosition,n=a.props.google.maps;if(t){var o=new n.LatLng(e.lat,e.lng);t.panTo(o)}},a.startRecording=function(){"geolocation"in navigator&&(c=navigator.geolocation.watchPosition(a.updatePositionData,a.err,I),window.DeviceMotionEvent&&window.addEventListener("devicemotion",a.updateAccelerationData))},a.err=function(){console.log("error")},a.updateAccelerationData=function(t){var e=t.acceleration.x,n=t.acceleration.y,o=t.acceleration.z;null!==e&&null!==n&&null!==o&&a.setState({currentAcceleration:{x:e,y:n,z:o}},function(){C===a.canvas.current.width&&(C=0),a.drawBackground("white",0);var t=1,e=a.state.currentAcceleration;for(var n in e)a.drawLine(e[n],t),t++;C++,a.drawBackground("grey",1);for(var o=2;o<8;o++)a.drawBackground("white",o)})},a.toRad=function(t){return t*Math.PI/180},a.calculateDistance=function(t,e,n,o){var i=a.toRad(n-t),r=a.toRad(o-e),c=Math.sin(i/2)*Math.sin(i/2)+Math.cos(a.toRad(t))*Math.cos(a.toRad(n))*Math.sin(r/2)*Math.sin(r/2);return 2*D*Math.atan2(Math.sqrt(c),Math.sqrt(1-c))},a.calculateAngle=function(t,e,a,n){var o=n-e,i=Math.sin(o)*Math.cos(a),r=Math.cos(t)*Math.sin(a)-Math.sin(t)*Math.cos(a)*Math.cos(o),c=Math.atan2(i,r);return c=360-(c=((c*=180/Math.PI)+360)%360)},a.drawLine=function(t,e){var n=a.state.context,o=100*e-50;n.beginPath(),n.strokeStyle="black",n.moveTo(C,o+5*t),n.lineTo(C,o),n.stroke()},a.drawBackground=function(t,e){var n=a.state.context;n.beginPath(),n.strokeStyle=t,n.moveTo(C+e,0),n.lineTo(C+e,300),n.stroke()},a.updatePositionData=function(t){a.setState({prevPosition:Object(p.a)({},a.state.currentPosition)},function(){var e=a.state.prevPosition,n=t.coords.latitude,o=t.coords.longitude,i=t.timestamp;i=Date.now();var r=a.calculateDistance(e.lat,e.lng,n,o),c=a.calculateAngle(e.lat,e.lng,n,o),s=(e.timestamp-i)/1e3,l=Math.abs(r/s);a.setState({currentPosition:{lat:n,lng:o,speed:l,timestamp:i},data:[].concat(Object(g.a)(a.state.data),[{lat:n,lng:o}]),angle:c},function(){})})},a.updateResultingData=function(){},a.stopRecording=function(){console.log("stopped"),console.log(a.state.data),navigator.geolocation.clearWatch(c),window.removeEventListener("devicemotion",a.updateAccelerationData)},a.showChart=function(){a.setState({isChartView:!a.state.isChartView})};var n=a.props.initialCenter,i=n.lat,r=n.lng;return a.state={isInitCoordsReceived:!0,isDataFetched:!1,isChartView:!1,data:[],currentPosition:{lat:i,lng:r,speed:0,timestamp:new Date(Date.now()).getTime()},prevPosition:{lat:i,lng:r,speed:0,timestamp:new Date(Date.now()).getTime()},currentAcceleration:Object(p.a)({},f),context:null,zoom:16,angle:0},a.canvas=o.a.createRef(),a.mymap=o.a.createRef(),a.mymarker=o.a.createRef(),a}return Object(m.a)(e,t),Object(l.a)(e,[{key:"componentDidUpdate",value:function(t,e){t.google!==this.props.google&&this.loadMap(),e.currentPosition!==this.state.currentPosition&&this.recenterMap()}},{key:"render",value:function(){var t=this.props.google,e=this.state.zoom;return this.state.isInitCoordsReceived?o.a.createElement("div",null,o.a.createElement("button",{onClick:this.startRecording,disabled:!this.state.isDataFetched},"Start recording"),o.a.createElement("button",{onClick:this.showChart},"Show chart"),o.a.createElement("div",null,"lat=",this.state.currentPosition.lat),o.a.createElement("div",null,"lng=",this.state.currentPosition.lng),o.a.createElement("div",null,"speed=",this.state.currentPosition.speed),o.a.createElement("canvas",{id:"canvas",width:"400",height:"300",ref:this.canvas,style:{display:this.state.isChartView?"block":"none"}}),o.a.createElement("div",null,this.state.currentPosition.lat),o.a.createElement("div",{id:"map",style:{width:"400px",height:"300px",position:"relative"}},o.a.createElement(v.Map,{centerAroundCurrentLocation:!0,ref:this.mymap,google:this.props.google,style:{width:"400px",height:"300px",position:"relative"},onReady:this.onMapReady},o.a.createElement(v.Marker,{ref:this.mymarker,position:{lat:this.state.currentPosition.lat,lng:this.state.currentPosition.lng},icon:{path:"M 23.5 7 c 0.276 0 0.5 0.224 0.5 0.5 v 0.511 c 0 0.793 -0.926 0.989 -1.616 0.989 l -1.086 -2 h 2.202 Z m -1.441 3.506 c 0.639 1.186 0.946 2.252 0.946 3.666 c 0 1.37 -0.397 2.533 -1.005 3.981 v 1.847 c 0 0.552 -0.448 1 -1 1 h -1.5 c -0.552 0 -1 -0.448 -1 -1 v -1 h -13 v 1 c 0 0.552 -0.448 1 -1 1 h -1.5 c -0.552 0 -1 -0.448 -1 -1 v -1.847 c -0.608 -1.448 -1.005 -2.611 -1.005 -3.981 c 0 -1.414 0.307 -2.48 0.946 -3.666 c 0.829 -1.537 1.851 -3.453 2.93 -5.252 c 0.828 -1.382 1.262 -1.707 2.278 -1.889 c 1.532 -0.275 2.918 -0.365 4.851 -0.365 s 3.319 0.09 4.851 0.365 c 1.016 0.182 1.45 0.507 2.278 1.889 c 1.079 1.799 2.101 3.715 2.93 5.252 Z m -16.059 2.994 c 0 -0.828 -0.672 -1.5 -1.5 -1.5 s -1.5 0.672 -1.5 1.5 s 0.672 1.5 1.5 1.5 s 1.5 -0.672 1.5 -1.5 Z m 10 1 c 0 -0.276 -0.224 -0.5 -0.5 -0.5 h -7 c -0.276 0 -0.5 0.224 -0.5 0.5 s 0.224 0.5 0.5 0.5 h 7 c 0.276 0 0.5 -0.224 0.5 -0.5 Z m 2.941 -5.527 s -0.74 -1.826 -1.631 -3.142 c -0.202 -0.298 -0.515 -0.502 -0.869 -0.566 c -1.511 -0.272 -2.835 -0.359 -4.441 -0.359 s -2.93 0.087 -4.441 0.359 c -0.354 0.063 -0.667 0.267 -0.869 0.566 c -0.891 1.315 -1.631 3.142 -1.631 3.142 c 1.64 0.313 4.309 0.497 6.941 0.497 s 5.301 -0.184 6.941 -0.497 Z m 2.059 4.527 c 0 -0.828 -0.672 -1.5 -1.5 -1.5 s -1.5 0.672 -1.5 1.5 s 0.672 1.5 1.5 1.5 s 1.5 -0.672 1.5 -1.5 Z m -18.298 -6.5 h -2.202 c -0.276 0 -0.5 0.224 -0.5 0.5 v 0.511 c 0 0.793 0.926 0.989 1.616 0.989 l 1.086 -2 Z",scaledSize:new t.maps.Size(e,e),rotation:this.state.angle}}),o.a.createElement(v.Polyline,{path:this.state.data,strokeColor:"#0000FF",strokeOpacity:.8,strokeWeight:2}))),o.a.createElement("img",{src:w.a,alt:"car"}),o.a.createElement("button",{onClick:this.stopRecording},"Stop recording")):o.a.createElement("div",null,o.a.createElement("canvas",{id:"canvas",width:"400",height:"300",ref:this.canvas,style:{display:this.state.isChartView?"block":"none"}}),o.a.createElement("div",null,"Getting current position..."))}}]),e}(n.Component),P=Object(v.GoogleApiWrapper)({apiKey:"AIzaSyDEVWK9Upl3k2YqFEmSPAitUBZoi36oFAo"})(b);b.defaultProps={zoom:16,initialCenter:{lat:53.893009,lng:27.567444},centerAroundCurrentLocation:!1};var k=function(t){function e(){return Object(s.a)(this,e),Object(d.a)(this,Object(u.a)(e).apply(this,arguments))}return Object(m.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){return o.a.createElement("div",{className:"App"},o.a.createElement(P,null))}}]),e}(n.Component);r.a.render(o.a.createElement(k,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[22,1,2]]]);
//# sourceMappingURL=main.3264f390.chunk.js.map