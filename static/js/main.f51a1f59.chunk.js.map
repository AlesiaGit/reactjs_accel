{"version":3,"sources":["ducks/selected-trip.js","ducks/trip.js","ducks/menu-state.js","ducks/mode.js","ducks/favorities.js","ducks/dom.js","ducks/bumps-map.js","ducks/index.js","store/store.js","components/Firebase/index.js","components/_common/next-step-button.js","components/_common/header-menu.js","components/_common/header-submenu.js","components/ReportBumps/favorities-list.js","helpers/index.js","components/_common/body-wrapper.js","components/_common/bumps-map.js","components/_common/car.js","components/_common/drawer.js","components/_common/selected-trip-map.js","components/_common/slider.js","components/ReportBumps/share-block.js","components/ReportBumps/index.js","components/SharedTrip/index.js","components/CheckTrip/search-menu.js","components/CheckTrip/index.js","components/Start/index.js","components/App.js","serviceWorker.js","index.js"],"names":["TRIP_SELECTED","NO_TRIPS_SELECTED","initial","selectTrip","data","type","ADD_TRIP_BUMPS","UPDATE_LOCATION","RESET_TRIP","RESET_MOVE","path","currentLocation","lat","lng","timestamp","speed","previousLocation","previousAcceleration","x","y","z","zoom","angle","move","distance","bumps","updateLocation","resetTrip","FAVORITIES_LIST_VIEW","SELECTED_TRIP_VIEW","DRAWER_VIEW","CLOSE_DRAWER_VIEW","BUMPS_MAP_VIEW","SHARE_VIEW","CLOSE_SHARE_VIEW","CHECK_TRIP_VIEW","isFavoritiesListView","isSelectedTripView","isDrawerView","isBumpsMapView","isShareView","isCheckTripView","title","iconleft","iconright","updateMenuState","state","action","_objectSpread2","Object","objectSpread","defineProperty","menuitem","selectTripView","selectDrawerView","status","closeDrawerView","selectBumpsMapView","selectCheckTripView","RECORDING","STOP_RECORDING","BUILDING_ROUTE","GUIDANCE","STOP_GUIDANCE","isRecording","isBuildingRoute","isGuidance","color","text","ADD_TO_FAVORITIES","DELETE_FROM_FAVORITIES","JSON","parse","localStorage","getItem","SET_DIMENTIONS","CHANGE_BARCOLOR","width","height","setDimentions","dimentions","changeBarColor","ADD_BUMPS","addSortedBumps","concat","toConsumableArray","filter","bump","indexOf","addBumps","reducers","selectedTrip","arguments","length","undefined","trip","menu","mode","_objectSpread3","_objectSpread4","_objectSpread5","on","favorities","slice","item","id","dom","combineReducers","store","createStore","reducer","db","firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","firestore","NextStepButton","_this","this","_this$props$menu","props","react_default","a","createElement","className","style","backgroundColor","onClick","toggleButton","Component","connect","HeaderMenu","onLeftMenuToggle","onRightMenuToggle","HeaderSubmenu","displaySubmenu","display","map","index","markActiveTab","onSubmenuTabSelect","key","mapDispatchToProps","FavoritiesList","i","start","end","toFixed","EARTH_RADIUS","camelize","str","forEach","split","word","charAt","toUpperCase","join","toRad","num","Math","PI","getDistance","lat1","lng1","lat2","lng2","dLat","dLng","sin","cos","atan2","sqrt","navigatorId","timerId","addToFavorities","random","toString","addTripBumps","resetMove","NAVIGATOR_OPTIONS","enableHighAccuracy","timeout","maximumAge","Body","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","componentDidMount","window","addEventListener","updateWindowDimensions","componentDidUpdate","prevProps","prevState","startRecording","stopRecording","saveSharedTripToDatabase","setItem","stringify","componentWillUnmount","removeEventListener","innerWidth","innerHeight","navigator","geolocation","watchPosition","updateLocationData","err","DeviceMotionEvent","updateAccelerationData","console","log","updateArrayIfPositionChanged","array","coords","obj1","obj2","hasOwnProperty","helpers","ev","_ev$acceleration","acceleration","_this$props$trip","_this$props$trip$curr","ax","ay","az","pow","setState","cover","temp","setTimeout","animateBump","clearTimeout","updateSpeedValue","location","prev","latitude","longitude","time","abs","updateAngleValue","brng","_this$props$trip2","segmentDistance","convertToReadableAddress","Promise","resolve","reject","maps","google","addresses","geocoder","Geocoder","geocode","results","Error","push","formatted_address","clearWatch","saveBumpsToDatabase","then","getDatabaseBumpsCount","bumpsCount","updateStatsInDatabase","updateFavoritiesData","collection","doc","set","_this$props$trip3","center","bounds","ne","sw","arrayOfCoords","maxY","minY","maxX","minX","round","LN2","endpoints","_ref","onZoomChanged","mapProps","clickEvent","tripdata","catch","error","bumpsRef","count","update","FieldValue","arrayUnion","get","exists","distanceTotal","increment","tripsCount","mymap","React","createRef","_this$props","favorities_list","selected_trip_map","bumps_map","centerAroundCurrentLocation","car","position","top","left","fontSize","zIndex","sendTemp","dist","strokeColor","strokeOpacity","strokeWeight","WrapperContainer","GoogleApiWrapper","process","bumpsmap","BumpsMap","getCurrentPosition","pos","isCurrentPositionReceived","loadMap","buildRoute","directionsDisplay","setMap","request","origin","destination","travelMode","directionsService","route","response","directionArray","geometry","encoding","decodePath","routes","overview_polyline","result","bumpsArray","routeBumps","startAndBump","endAndBump","routeSectionLength","n","databaseBumps","setBumpsOnMap","setDirections","convertAddressToCoordinates","address","_this$state$currentLo","LatLng","mapConfig","assign","zoomControl","scaleControl","fullscreenControl","mapTypeControl","streetViewControl","Map","current","DirectionsService","DirectionsRenderer","e","addListener","handleEvent","event","trigger","recenterMap","panTo","deleteMarkers","markersArray","marker","size","bumpOption","fillColor","fillOpacity","scale","anchor","Point","Marker","icon","tripBumps","renderChildren","children","Children","c","cloneElement","mapCenter","_props$initialCenter","initialCenter","mymarker","directionsBumps","_this2","evtName","_this3","handlerName","ref","defaultProps","elements","fill","Car","renderMarker","removeMarker","_this$props2","rotation","pref","setZIndex","Drawer","handleSelection","hash","pop","react_router_dom","exact","to","replace","dispatch","SelectedTripMap","_this$props$selectedT","mapOptions","tripOptions","mapRef","Polyline","animation","Animation","DROP","componenWillUnmount","_this$props$dom","Slider","ShareBlock","url","redirect","EmailShareButton","EmailIcon","borderRadius","FacebookShareButton","FacebookIcon","TelegramShareButton","TelegramIcon","WhatsappShareButton","WhatsappIcon","ViberShareButton","ViberIcon","selectFavoritiesListView","selectShareView","closeShareView","noTripsSelected","ReportBumps","onNextStepButtonToggle","condition","selectedOption","drawerDisplay","shareDisplay","_this$props$mode","header_menu","header_submenu","body_wrapper","next_step_button","share_block","drawer","SharedTrip","getSharedTripData","getAppStatistics","tripQuality","setTripQuality","isDataReceived","stats","toggleStats","isStatsView","quality","_this$state","slider","SearchMenu","displaySearch","name","value","placeholder","onFocus","preventResize","onChange","handleChange","clearInput","startGuidance","stopGuidance","CheckTrip","ratio","newHeight","document","querySelector","setAttribute","onSearchButtonToggle","handleInputChange","_e$target","target","coverDisplay","searchButtonDisplay","_this$props$mode2","search_menu","Start","customHistory","createBrowserHistory","App","history","pushState","noBackExitsApp","updateStatusbarColor","retrieveBumpsFromDatabase","react_router","component","isLocalhost","Boolean","hostname","match","registerValidSW","swUrl","config","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","ready","unregister","ReactDOM","render","es","src_components_App","getElementById","URL","href","fetch","contentType","headers","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.f51a1f59.chunk.js","sourcesContent":["// selected-trip.js\r\n\r\n// Actions \r\nexport const TRIP_SELECTED = \"bumpyroads/selectedTrip/TRIP_SELECTED\";\r\nexport const NO_TRIPS_SELECTED = \"bumpyroads/selectedTrip/NO_TRIPS_SELECTED\";\r\n\r\nlet initial = null;\r\n\r\n\r\n\r\n// Reducer\r\nexport default function selectedTrip(state = initial, action) {\r\n\tswitch (action.type) {\r\n\t\tcase TRIP_SELECTED: \r\n\t\t\treturn action.data;\r\n\t\tcase NO_TRIPS_SELECTED: \r\n\t\t\treturn action.data;\r\n\t\tdefault: \r\n\t\t\treturn state;\r\n\t}\r\n}\r\n\r\n// Action creators\r\nexport function selectTrip(data) {\r\n\treturn {\r\n\t\ttype: TRIP_SELECTED,\r\n\t\tdata: data\r\n\t}\r\n}\r\n\r\nexport function noTripsSelected() {\r\n\treturn {\r\n\t\ttype: NO_TRIPS_SELECTED,\r\n\t\tdata: null\r\n\t}\r\n}\r\n","//trip.js\r\n\r\n// Actions\r\nexport const ADD_TRIP_BUMPS = \"bumpyroads/bumpTrip/ADD_BUMPS\";\r\nexport const UPDATE_LOCATION = \"bumpyroads/bumpTrip/UPDATE_LOCATION\";\r\nexport const RESET_TRIP = \"bumpyroads/bumpTrip/RESET_TRIP\";\r\nexport const RESET_MOVE = \"bumpyroads/bumpTrip/RESET_MOVE\";\r\n\r\nlet initial = {\r\n\tpath: [],\r\n\tcurrentLocation: {lat: 0, lng: 0, timestamp: 0, speed: 0},\r\n\tpreviousLocation: {},\r\n\tpreviousAcceleration: {x: 0, y: 0, z: 0},\r\n\tzoom: 16,\r\n\tangle: 0,\r\n\tmove: 0,\r\n\tdistance: 0,\r\n\tbumps: []\r\n};\r\n\r\n// Reducer\r\nexport default function trip(state = initial, action) {\r\n\tswitch (action.type) {\r\n\t\tcase ADD_TRIP_BUMPS: \r\n\t\t\treturn { ...state, \r\n\t\t\t\tbumps: [...state.bumps, action.data.bumps],\r\n\t\t\t\tpreviousAcceleration: action.data.previousAcceleration }\r\n\t\tcase UPDATE_LOCATION: \r\n\t\t\treturn { ...state, \r\n\t\t\t\tpreviousLocation: state.currentLocation,\r\n\t\t\t\tcurrentLocation: action.data.currentLocation,\r\n\t\t\t\tpath: action.data.path,\r\n\t\t\t\tangle: action.data.angle,\r\n\t\t\t\tmove: action.data.move,\r\n\t\t\t\tdistance: action.data.distance }\r\n\t\tcase RESET_MOVE: return { ...state, move: 0 }\r\n\t\tcase RESET_TRIP: return { ...initial }\r\n\t\tdefault: \r\n\t\t\treturn state;\r\n\t}\r\n}\r\n\r\n// Action creators\r\nexport function addTripBumps(data) {\r\n\treturn {\r\n\t\ttype: ADD_TRIP_BUMPS,\r\n\t\tdata: data\r\n\t}\r\n}\r\n\r\nexport function updateLocation(data) {\r\n\treturn {\r\n\t\ttype: UPDATE_LOCATION,\r\n\t\tdata: data\r\n\t}\r\n}\r\n\r\nexport function resetTrip() {\r\n\treturn {\r\n\t\ttype: RESET_TRIP\r\n\t}\r\n}\r\n\r\nexport function resetMove() {\r\n\treturn {\r\n\t\ttype: RESET_MOVE\r\n\t}\r\n}","// menu-state.js\r\n\r\n// Actions \r\nexport const FAVORITIES_LIST_VIEW = \"bumpyroads/menu/FAVORITIES_LIST_VIEW\";\r\nexport const SELECTED_TRIP_VIEW = \"bumpyroads/menu/SELECTED_TRIP_VIEW\";\r\nexport const DRAWER_VIEW = \"bumpyroads/menu/DRAWER_VIEW\";\r\nexport const CLOSE_DRAWER_VIEW = \"bumpyroads/menu/CLOSE_DRAWER_VIEW\";\r\nexport const BUMPS_MAP_VIEW = \"bumpyroads/menu/BUMPS_MAP_VIEW\";\r\nexport const SHARE_VIEW = \"bumpyroads/menu/SHARE_VIEW\";\r\nexport const CLOSE_SHARE_VIEW = \"bumpyroads/menu/CLOSE_SHARE_VIEW\";\r\nexport const CHECK_TRIP_VIEW = \"bumpyroads/menu/CHECK_TRIP_VIEW\";\r\n\r\nlet initial = {\r\n\tisFavoritiesListView: false,\r\n\tisSelectedTripView: false,\r\n\tisDrawerView: false,\r\n\tisBumpsMapView: false,\r\n\tisShareView: false,\r\n\tisCheckTripView: false,\r\n\ttitle: '',\r\n\ticonleft: '',\r\n\ticonright: ''\r\n};\r\n\r\nconst updateMenuState = (state, action) => {\r\n\treturn {...initial, \r\n\t\t[action.menuitem]: true, \r\n\t\ttitle: action.title, \r\n\t\ticonleft: action.iconleft, \r\n\t\ticonright: action.iconright };\r\n}\r\n\r\n// Reducer\r\nexport default function menu(state = initial, action) {\r\n\tswitch (action.type) {\r\n\t\tcase FAVORITIES_LIST_VIEW: return updateMenuState(state, action)\r\n\t\tcase SELECTED_TRIP_VIEW: return updateMenuState(state, action)\r\n\t\tcase BUMPS_MAP_VIEW: return updateMenuState(state, action)\r\n\t\tcase CHECK_TRIP_VIEW: return updateMenuState(state, action)\r\n\t\tcase DRAWER_VIEW: return { ...state, isDrawerView: action.status }\r\n\t\tcase CLOSE_DRAWER_VIEW: return { ...state, isDrawerView: action.status }\r\n\t\tcase SHARE_VIEW: return { ...state, isShareView: action.status }\r\n\t\tcase CLOSE_SHARE_VIEW: return { ...state, isShareView: action.status }\r\n\t\tdefault: \r\n\t\t\treturn state;\r\n\t}\r\n}\r\n\r\n// Action creators\r\nexport function selectFavoritiesListView() {\r\n\treturn {\r\n\t\ttype: FAVORITIES_LIST_VIEW,\r\n\t\tmenuitem: 'isFavoritiesListView',\r\n\t\ttitle: 'Report a bump',\r\n\t\ticonleft: 'burger-icon',\r\n\t\ticonright: ''\r\n\t}\r\n}\r\n\r\nexport function selectTripView() {\r\n\treturn {\r\n\t\ttype: SELECTED_TRIP_VIEW,\r\n\t\tmenuitem: 'isSelectedTripView',\r\n\t\ttitle: 'Back to list',\r\n\t\ticonleft: 'back-arrow',\r\n\t\ticonright: 'share-icon'\r\n\t}\r\n}\r\n\r\nexport function selectDrawerView() {\r\n\treturn {\r\n\t\ttype: DRAWER_VIEW,\r\n\t\tstatus: true\r\n\t}\r\n}\r\n\r\nexport function closeDrawerView() {\r\n\treturn {\r\n\t\ttype: CLOSE_DRAWER_VIEW,\r\n\t\tstatus: false\r\n\t}\r\n}\r\n\r\nexport function selectBumpsMapView() {\r\n\treturn {\r\n\t\ttype: BUMPS_MAP_VIEW,\r\n\t\tmenuitem: 'isBumpsMapView',\r\n\t\ttitle: 'Report a bump',\r\n\t\ticonleft: 'burger-icon',\r\n\t\ticonright: ''\r\n\t}\r\n}\r\n\r\nexport function selectShareView() {\r\n\treturn {\r\n\t\ttype: SHARE_VIEW,\r\n\t\tstatus: true\r\n\t}\r\n}\r\n\r\nexport function closeShareView() {\r\n\treturn {\r\n\t\ttype: CLOSE_SHARE_VIEW,\r\n\t\tstatus: false\r\n\t}\r\n}\r\n\r\nexport function selectCheckTripView() {\r\n\treturn {\r\n\t\ttype: CHECK_TRIP_VIEW,\r\n\t\tmenuitem: 'isCheckTripView',\r\n\t\ttitle: 'Check your trip',\r\n\t\ticonleft: 'burger-icon',\r\n\t\ticonright: ''\r\n\t}\r\n}","// mode.js\r\n\r\n// Actions \r\nexport const RECORDING = \"bumpyroads/mode/RECORDING\";\r\nexport const STOP_RECORDING = \"bumpyroads/mode/STOP_RECORDING\";\r\nexport const BUILDING_ROUTE = \"bumpyroads/mode/BUILDING_ROUTE\";\r\nexport const GUIDANCE = \"bumpyroads/mode/GUIDANCE\";\r\nexport const STOP_GUIDANCE = \"bumpyroads/mode/STOP_GUIDANCE\";\r\n\r\n\r\n\r\nlet initial = {\r\n\tisRecording: false,\r\n\tisBuildingRoute: false,\r\n\tisGuidance: false,\r\n\tcolor: '#757d75',\r\n\ttext: 'Start Recording'\r\n};\r\n\r\nexport default function mode(state = initial, action) {\r\n\tswitch (action.type) {\r\n\t\tcase RECORDING: \r\n\t\t\treturn {...initial, \r\n\t\t\t\t[action.mode]: action.on, \r\n\t\t\t\tcolor: action.color, \r\n\t\t\t\ttext: action.text }\r\n\t\tcase STOP_RECORDING: return {...initial }\r\n\t\tcase BUILDING_ROUTE: \r\n\t\t\treturn {...initial,\r\n\t\t\t\t[action.mode]: action.on, \r\n\t\t\t\ttext: action.text }\r\n\t\tcase GUIDANCE: \r\n\t\t\treturn {...initial, \r\n\t\t\t\t[action.mode]: action.on, \r\n\t\t\t\tcolor: action.color, \r\n\t\t\t\ttext: action.text }\r\n\t\tcase STOP_GUIDANCE: \r\n\t\t\treturn {...initial, \r\n\t\t\t\t[action.mode]: action.on, \r\n\t\t\t\tcolor: action.color, \r\n\t\t\t\ttext: action.text }\r\n\t\tdefault: \r\n\t\t\treturn state;\r\n\t}\r\n}\r\n\r\nexport function startRecording() {\r\n\treturn {\r\n\t\ttype: RECORDING,\r\n\t\tmode: 'isRecording',\r\n\t\ton: true,\r\n\t\tcolor: \"#e34929\",\r\n\t\ttext: 'Stop Recording'\r\n\t}\r\n}\r\n\r\nexport function stopRecording() {\r\n\treturn {\r\n\t\ttype: STOP_RECORDING\r\n\t}\r\n}\r\n\r\nexport function buildRoute() {\r\n\treturn {\r\n\t\ttype: BUILDING_ROUTE,\r\n\t\tmode: 'isBuildingRoute',\r\n\t\ton: true,\r\n\t\ttext: 'Start Guidance'\r\n\t}\r\n}\r\n\r\nexport function startGuidance() {\r\n\treturn {\r\n\t\ttype: GUIDANCE,\r\n\t\tmode: 'isGuidance',\r\n\t\ton: true,\r\n\t\tcolor: \"#e34929\",\r\n\t\ttext: 'Stop Guidance'\r\n\t}\r\n}\r\n\r\nexport function stopGuidance() {\r\n\treturn {\r\n\t\ttype: STOP_GUIDANCE,\r\n\t\tmode: 'isGuidance',\r\n\t\ton: false,\r\n\t\tcolor: \"#fbad19\",\r\n\t\ttext: 'Build a route'\r\n\t}\r\n}","//favorities.js\r\n\r\n// Actions\r\nexport const ADD_TO_FAVORITIES = \"bumpyroads/favorities/ADD_TO_FAVORITIES\";\r\nexport const DELETE_FROM_FAVORITIES = \"bumpyroads/favorities/DELETED_FROM_FAVORITIES\";\r\n\r\nlet initial = JSON.parse(localStorage.getItem(\"favorities\")) || [];\r\n\r\n// Reducer\r\nexport default function favorities(state = initial, action) {\r\n\tswitch (action.type) {\r\n\t\tcase ADD_TO_FAVORITIES: return [...state.slice(-4), action.data]\r\n\t\tcase DELETE_FROM_FAVORITIES: return state.filter(item => item.id !== action.id)\r\n\r\n\t\tdefault: \r\n\t\t\treturn state;\r\n\t}\r\n}\r\n\r\n// Action creators\r\nexport function addToFavorities(data) {\r\n\treturn {\r\n\t\ttype: ADD_TO_FAVORITIES,\r\n\t\tdata: {...data, id: `f${(~~(Math.random()*1e8)).toString(16)}`}\r\n\t}\r\n}\r\n\r\nexport function deleteFromFavorities(id) {\r\n\treturn {\r\n\t\ttype: DELETE_FROM_FAVORITIES,\r\n\t\tid: id\r\n\t}\r\n}","//dom-settings.js\r\n\r\n// Actions\r\nexport const SET_DIMENTIONS = \"bumpyroads/dom/SET_DIMENTIONS\";\r\nexport const CHANGE_BARCOLOR = \"bumpyroads/dom/CHANGE_BARCOLOR\";\r\n\r\nlet initial = {\r\n\twidth: 0,\r\n\theight: 0,\r\n\tcolor: \"#fbad19\"\r\n};\r\n\r\n// Reducer\r\nexport default function dom(state = initial, action) {\r\n\tswitch (action.type) {\r\n\t\tcase SET_DIMENTIONS: \r\n\t\t\treturn { ...state, \r\n\t\t\t\twidth: action.dimentions.width, \r\n\t\t\t\theight: action.dimentions.height }\r\n\t\tcase CHANGE_BARCOLOR: return {...state, color: action.color }\r\n\t\tdefault: return state\r\n\t}\r\n}\r\n\r\n// Action creators\r\nexport function setDimentions(dimentions) {\r\n\treturn {\r\n\t\ttype: SET_DIMENTIONS,\r\n\t\tdimentions: dimentions\r\n\t}\r\n}\r\n\r\nexport function changeBarColor(color) {\r\n\treturn {\r\n\t\ttype: CHANGE_BARCOLOR,\r\n\t\tcolor: color\r\n\t}\r\n}\r\n","//bumps-map.js\r\n\r\n// Actions\r\nexport const ADD_BUMPS = \"bumpyroads/dom/ADD_BUMPS\";\r\n\r\nlet initial = [];\r\n\r\nconst addSortedBumps = (state, action) => {\r\n\treturn [...state, ...action.bumps.filter(bump => state.indexOf(bump) < 0)]\r\n}\r\n\r\n// Reducer\r\nexport default function bumps(state = initial, action) {\r\n\tswitch (action.type) {\r\n\t\tcase ADD_BUMPS: return addSortedBumps(state, action)\r\n\t\tdefault: return state\r\n\t}\r\n}\r\n\r\n// Action creators\r\nexport function addBumps(bumps) {\r\n\treturn {\r\n\t\ttype: ADD_BUMPS,\r\n\t\tbumps: bumps\r\n\t}\r\n}\r\n\r\n","import { combineReducers } from 'redux';\r\nimport selectedTrip from './selected-trip';\r\nimport trip from './trip';\r\nimport menu from './menu-state';\r\nimport mode from './mode';\r\nimport favorities from './favorities';\r\nimport dom from './dom';\r\nimport bumps from './bumps-map';\r\n\r\nconst reducers = {\r\n  selectedTrip: selectedTrip,\r\n  trip: trip,\r\n  menu: menu,\r\n  mode: mode,\r\n  favorities: favorities,\r\n  dom: dom,\r\n  bumps: bumps\r\n};\r\n\r\nexport default combineReducers(reducers);\r\n\r\n","import { createStore } from \"redux\";\r\nimport reducer from \"../ducks/index\";\r\n\r\nlet store = createStore(reducer);\r\n\r\nexport default store;","import firebase from \"firebase\";\r\n\r\nconst firebaseApp = firebase.initializeApp({\r\n    apiKey: \"AIzaSyBexhCuV6JNCsyakFOeBK7NmFb_oM_pgxo\",\r\n    authDomain: \"bumpyroadsinformer.firebaseapp.com\",\r\n    databaseURL: \"https://bumpyroadsinformer.firebaseio.com\",\r\n    projectId: \"bumpyroadsinformer\",\r\n    storageBucket: \"\",\r\n    messagingSenderId: \"854546127925\",\r\n    appId: \"1:854546127925:web:d3c2a81c7c4e9ba6\"\r\n});\r\n\r\nconst db = firebaseApp.firestore();\r\n\r\nexport { db };","import React, { Component } from 'react';\r\nimport '../../styles/shared.css';\r\nimport { connect } from \"react-redux\";\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        menu: state.menu\r\n    };\r\n};\r\n\r\nclass NextStepButton extends Component {\r\n\r\n\trender() {\r\n\t\tlet { isFavoritiesListView, isSelectedTripView } = this.props.menu;\r\n\t\tif (isFavoritiesListView || isSelectedTripView) return null;\r\n\r\n\t\treturn (\r\n\t\t\t<div \r\n\t\t\t\tclassName=\"bottom-ruler-btn\" \r\n\t\t\t\tstyle={{ backgroundColor: this.props.color}} \r\n\t\t\t\tonClick={() => this.props.toggleButton()} >\r\n\t\t\t\t{this.props.text}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps)(NextStepButton);","import React, { Component } from 'react';\r\nimport { connect } from \"react-redux\";\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        menu: state.menu\r\n    };\r\n};\r\n\r\nclass HeaderMenu extends Component {\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t\t<div className=\"header-menu\" >\r\n\t\t\t\t\t<div className=\"header-left-menu\">\r\n\t\t\t\t\t\t<div className={`header-menu-icon ${this.props.menu.iconleft}`} \r\n\t\t\t\t\t\t\tonClick={() => this.props.onLeftMenuToggle()}/>\r\n\t\t\t\t\t\t<div className=\"page-title\">{this.props.menu.title}</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"header-right-menu\" >\r\n\t\t\t\t\t\t<div className={`header-menu-icon ${this.props.menu.iconright}`}  \r\n\t\t\t\t\t\t\tonClick={() => this.props.onRightMenuToggle()}/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps)(HeaderMenu);","import React, { Component } from 'react';\r\nimport { connect } from \"react-redux\";\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        menu: state.menu\r\n    };\r\n};\r\n\r\nclass HeaderSubmenu extends Component {\r\n\trender() {\r\n\t\tlet options = [\"Favorities List\", \"Bumps Map\"];\r\n\t\tlet { isFavoritiesListView, isBumpsMapView } = this.props.menu;\r\n\t\tlet displaySubmenu = (isFavoritiesListView || isBumpsMapView ) ? \"flex\" : \"none\";\r\n\r\n\t\treturn (\r\n\t\t\t<div className=\"header-submenu\" style={{display: displaySubmenu }}>\r\n\t\t\t\t{\r\n\t\t\t\t\toptions.map((item, index) => (\r\n\t\t\t\t\t\t<div \r\n\t\t\t\t\t\t\tclassName={`header-submenu-tab ${this.props.markActiveTab(item) ? \"tab-active\" : \"\"}`} \r\n\t\t\t\t\t\t\tonClick={() => this.props.onSubmenuTabSelect(item)} \r\n\t\t\t\t\t\t\tkey={index}>\r\n\t\t\t\t\t\t\t{item}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t))\r\n\t\t\t\t}\r\n\t\t\t</div>\r\n\t\t\t\t\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps)(HeaderSubmenu);\r\n","import React, { Component } from 'react';\r\nimport { connect } from \"react-redux\";\r\n\r\nimport * as selectedTrip from \"../../ducks/selected-trip\";\r\nimport * as menu from \"../../ducks/menu-state\";\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        favorities: state.favorities\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n  \tselectTrip: selectedTrip.selectTrip,\r\n  \tselectTripView: menu.selectTripView,\r\n};\r\n\r\nclass FavoritiesList extends Component {\r\n\trender() {\r\n\t\tlet favorities = this.props.favorities;\r\n\t\tif (!favorities.length) return null;\r\n\t\t\r\n\t\treturn (\r\n\t  \t\t<div className=\"fav-list\">\r\n\t  \t\t\t{favorities.map((trip, i) => (\r\n\t\t\t\t\t<div className={`fav-item ${trip.bumps.length < 4 ? \"yellow\" : \"red\"}`} \r\n\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\tthis.props.selectTrip(trip);\r\n\t\t\t\t\t\t\tthis.props.selectTripView();\r\n\t\t\t\t\t\t}} key={i}>\r\n\t\t\t\t\t\t<div className=\"fav-route\">From: {trip.start}</div>\r\n\t\t\t\t\t\t<div className=\"fav-route\">To: {trip.end}</div>\r\n\t\t\t\t\t\t<div className=\"fav-bumps-count\">{trip.bumps.length} bumps per {trip.distance ? trip.distance.toFixed(1) : 0} km</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t))}\r\n\t\t\t</div>\r\n        );\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(FavoritiesList);\r\n","const EARTH_RADIUS = 6371000;\r\n\r\nfunction camelize(str) {\r\n\tlet separators = [\" \", \"_\"];\r\n\r\n\tseparators.forEach(item => {\r\n\t\tstr = str.split(item).map((word) => {\r\n\t\t\treturn word.charAt(0).toUpperCase() + word.slice(1);\r\n\t\t}).join('');\r\n\t})\r\n\r\n\treturn str;\r\n}\r\n\r\nfunction compare(obj1, obj2) {\r\n\tfor (var key in obj1) {\r\n\t\tif (!obj2.hasOwnProperty(key) || obj1[key] !== obj2[key]) return false; \r\n\t}\r\n\treturn true;\r\n}\r\n\r\nfunction toRad(num) {\r\n\treturn num * Math.PI/180;\r\n}\r\n\r\nfunction getDistance(lat1, lng1, lat2, lng2) {\r\n\tvar dLat = toRad(lat2 - lat1);\r\n\tvar dLng = toRad(lng2 - lng1);\r\n\r\n\tvar a = Math.sin(dLat / 2) * Math.sin(dLat / 2) + Math.cos(toRad(lat1)) * Math.cos(toRad(lat2)) * Math.sin(dLng / 2) * Math.sin(dLng / 2);\r\n\r\n\tvar distance = EARTH_RADIUS * 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\r\n\treturn distance; //distance is returned in meters\r\n}\r\n\r\nfunction getZoom(distance) { // distance in meters\r\n\treturn Math.round(14-Math.log(distance / 2000)/Math.LN2);\r\n}\r\n\r\nfunction getAngle(lat1, lng1, lat2, lng2) {\r\n\tvar dLng = (lng2 - lng1);\r\n\r\n\tvar y = Math.sin(dLng) * Math.cos(lat2);\r\n\tvar x = Math.cos(lat1) * Math.sin(lat2) - Math.sin(lat1) * Math.cos(lat2) * Math.cos(dLng);\r\n\r\n\tvar brng = Math.atan2(y, x);\r\n\r\n\tvar pi = Math.PI;\r\n\tbrng = brng * (180/pi);\r\n\tbrng = (brng + 360) % 360;\r\n    brng = 360 - brng; // count degrees counter-clockwise - remove to make clockwise\r\n\r\n    return brng;\r\n}\r\n\r\nfunction getCenter(bounds) {\r\n\tlet {ne, sw} = bounds;\r\n\r\n\tlet lat = (sw.lat + (ne.lat - sw.lat)/2);\r\n\tlet lng = (sw.lng + (ne.lng - sw.lng)/2);\r\n\r\n\treturn {lat, lng};\r\n}\r\n\r\nfunction getBounds(arrayOfCoords) { //sw, ne\r\n\tvar maxY, minY, maxX, minX;\r\n\r\n\tarrayOfCoords.forEach(i => {\r\n\t\tmaxY = maxY > i.lat ? maxY : i.lat;\r\n\t\tminY = minY < i.lat ? minY : i.lat;\r\n\t\tmaxX = maxX > i.lng ? maxX : i.lng;\r\n\t\tminX = minX < i.lng ? minX : i.lng;\r\n\t});\r\n\r\n\tlet bounds = {\r\n\t\tne: {lat: maxY, lng: maxX}, \r\n\t\tsw: {lat: minY, lng: minX}\r\n\t};\r\n\r\n\treturn bounds; \r\n}\r\n\r\nfunction getRouteBumps(directionArray, bumpsArray) {\r\n\tlet routeBumps = [];\r\n\tdirectionArray.forEach((i, index) => {\r\n    if (index < directionArray.length - 1) {\r\n        let routeSectionLength = getDistance(i.lat, i.lng, directionArray[index + 1].lat, directionArray[index + 1].lng);\r\n\t\t\r\n\t\tlet startAndBump, endAndBump;\r\n\t\tbumpsArray.forEach(n => { \r\n\t\t\tstartAndBump = getDistance(i.lat, i.lng, n.lat, n.lng);\r\n\t\t\tendAndBump = getDistance(directionArray[index + 1].lat, directionArray[index + 1].lng, n.lat, n.lng);\r\n\t\t\tif ((startAndBump + endAndBump) < routeSectionLength + 0.1) routeBumps.push({lat: n.lat, lng: n.lng}); //console.log(\"directionArray->\", i, \"bump->\", n);\r\n        })\r\n    }});\r\n\r\n    return routeBumps;\r\n}\r\n\r\nexport { camelize, compare, toRad, getDistance, getAngle, getZoom, getCenter, getBounds, getRouteBumps };\r\n","import React, { Component } from 'react';\r\nimport { connect } from \"react-redux\";\r\nimport firebase from \"firebase\";\r\n\r\nimport '../../styles/report-bumps.css';\r\nimport '../../styles/check-trip.css';\r\nimport '../../styles/shared.css';\r\n\r\nimport { db } from '../Firebase/index';\r\nimport { GoogleApiWrapper, Polyline } from 'google-maps-react';\r\nimport { BumpsMap, Car, SelectedTripMap } from './index';\r\nimport FavoritiesList from '../ReportBumps/favorities-list';\r\n//import FavoritiesMap from '../ReportBumps/favorities-map';\r\nimport * as helpers from '../../helpers/index';\r\n\r\nimport store from \"../../store/store\";\r\n//store\r\nimport * as menu from \"../../ducks/menu-state\";\r\nimport * as favorities from \"../../ducks/favorities\";\r\nimport * as selectedTrip from \"../../ducks/selected-trip\";\r\nimport * as trip from \"../../ducks/trip\";\r\nimport * as dom from \"../../ducks/dom\";\r\nimport * as bumps from \"../../ducks/bumps-map\";\r\n\r\n\r\nconst mapDispatchToProps = {\r\n  \tselectTrip: selectedTrip.selectTrip,\r\n  \taddToFavorities: favorities.addToFavorities,\r\n  \tselectTripView: menu.selectTripView,\r\n \taddTripBumps: trip.addTripBumps, \r\n\tupdateLocation: trip.updateLocation, \r\n\tresetTrip: trip.resetTrip,\r\n\tresetMove: trip.resetMove,\r\n\tsetDimentions: dom.setDimentions,\r\n\taddBumps: bumps.addBumps,\r\n};\r\n\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        selectedTrip: state.selectedTrip,\r\n        menu: state.menu,\r\n        mode: state.mode,\r\n        favorities: state.favorities,\r\n        trip: state.trip,\r\n        bumpsmap: state.bumpsmap\r\n    };\r\n};\r\n\r\nlet navigatorId;\r\nlet timerId;\r\n\r\nconst NAVIGATOR_OPTIONS = {\r\n\tenableHighAccuracy: true,\r\n\ttimeout: 5000,\r\n\tmaximumAge: 0\r\n};\r\n\r\n\r\nclass Body extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t    this.state = {\r\n\t    \tcover: false,\r\n\t    \ttemp: {bumps:[], path:[]}\r\n\t    };\r\n\r\n\t    this.mymap = React.createRef();\r\n\t}\r\n\r\n\tcomponentDidMount = () => {\r\n\t\twindow.addEventListener('resize', this.updateWindowDimensions);\r\n\t}\r\n\r\n\tcomponentDidUpdate = (prevProps, prevState) => {\r\n\t   \tif (prevProps.mode.isRecording !== this.props.mode.isRecording) {\r\n\t\t   \tif (this.props.mode.isRecording === true) {\r\n\t\t\t\tthis.startRecording();\r\n\t\t\t} else {\r\n\t\t\t\tthis.stopRecording();\r\n\t\t\t}\r\n\t   \t}\r\n\r\n\t   \t//if (prevProps.mode.isGuidance !== this.props.mode.isGuidance) {\r\n\t\t //   \tif (this.props.mode.isGuidance === true) {\r\n\t\t\t// \tthis.startGuidance();\r\n\t\t\t// } else {\r\n\t\t\t// \tthis.stopGuidance();\r\n\t\t\t// }\r\n\t   \t//}\r\n\r\n\t\tif (prevProps.menu.isShareView !== this.props.menu.isShareView) {\r\n\t   \t\tif (this.props.menu.isShareView === true) this.saveSharedTripToDatabase();\r\n\t   \t}\t\r\n\r\n\t   \tif (prevProps.favorities !== this.props.favorities) {\r\n\t   \t\tlocalStorage.setItem('favorities', JSON.stringify(this.props.favorities));\r\n\t   \t}\r\n\t}\r\n\r\n\tcomponentWillUnmount = () => {\r\n\t\twindow.removeEventListener('resize', this.updateWindowDimensions);\r\n\t}\r\n\r\n\tupdateWindowDimensions = () => {\r\n\t \tthis.props.setDimentions({width: window.innerWidth, height: window.innerHeight})\r\n\t}\r\n\r\n\tstartRecording = () => {\r\n\t\tthis.props.resetTrip();\r\n\r\n\t\tif (navigator && navigator.geolocation) { // обработка отсутствия\r\n\t\t\tnavigatorId = navigator.geolocation.watchPosition(this.updateLocationData, this.err, NAVIGATOR_OPTIONS);\r\n\t    }\t\r\n\r\n\t    if (window.DeviceMotionEvent) { //обработка отсутствия\r\n\t    \t\twindow.addEventListener(\"devicemotion\", this.updateAccelerationData); \r\n\t    }\r\n\t}\r\n\r\n\terr = () => {\r\n\t\tconsole.log(\"error\");\r\n\t}\r\n\r\n\tupdateArrayIfPositionChanged = (array, coords) => {\r\n\t\treturn (array.length === 0 || !helpers.compare(array[array.length - 1], coords)) ? [...array, coords] : array;\r\n\t}\r\n\r\n\tupdateAccelerationData = (ev) => {\r\n\t\tlet { x, y, z } = ev.acceleration;\r\n\t\tlet { previousAcceleration, bumps } = this.props.trip;\r\n\t\tlet { lat, lng, timestamp } = this.props.trip.currentLocation;\r\n\r\n\t\tif (x !== null && y !== null && z !== null) {\r\n\t\t\tlet ax = x - previousAcceleration.x;\r\n\t\t\tlet ay = y - previousAcceleration.y;\r\n\t\t\tlet az = z - previousAcceleration.z;\r\n\t\t\tlet currentAcceleration = Math.pow((ax * ax + ay * ay + az * az), 1 / 3); //current level of acceleration with existing phone position\r\n\t\t\t\r\n\t\t\tif (currentAcceleration > 2.829226039) { //регулируемое значение\r\n\t\t\t\tthis.props.addTripBumps({\r\n\t\t\t\t\tbumps: this.updateArrayIfPositionChanged(bumps, {lat, lng}), \r\n\t\t\t\t\tpreviousAcceleration: { x, y, z }\r\n\t\t\t\t});\r\n\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tcover: true, \r\n\t\t\t\t\ttemp: {...this.state.temp, bumps: this.updateArrayIfPositionChanged(this.state.temp.bumps, {lat, lng, timestamp})}\r\n\t\t\t\t})\r\n\t\t\t\ttimerId = setTimeout(this.animateBump, 800);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tanimateBump = () => {\r\n\t\tthis.setState({cover: false})\r\n\t\tclearTimeout(timerId);\r\n\t}\r\n\r\n\tupdateSpeedValue = location\t=> {\r\n\t\tlet prev = this.props.trip.currentLocation;\r\n\t\tlet lat = location.coords.latitude;\r\n\t\tlet lng = location.coords.longitude;\r\n\t\tlet timestamp = location.timestamp;\r\n\r\n\t\tlet distance = this.props.trip.path.length ? helpers.getDistance(prev.lat, prev.lng, lat, lng) : 0\r\n\t\tlet time = Math.abs(prev.timestamp - timestamp)/ 1000; // в секундах\r\n\r\n\t\tif (!distance/time) return 0;\r\n\t\treturn distance/time * 3600 / 1000; //в км/час\r\n\t}\r\n\r\n\tupdateAngleValue = location => {\r\n\t\tlet prev = this.props.trip.currentLocation;\r\n\t\tlet lat = location.coords.latitude;\r\n\t\tlet lng = location.coords.longitude;\r\n\t\tlet angle = helpers.getAngle(prev.lat, prev.lng, lat, lng);\r\n\r\n\t\treturn (Math.abs(angle - this.props.trip.angle) > 22) ? angle : this.props.trip.angle;\r\n\t}\r\n\r\n\tupdateLocationData = location => {\r\n\t\tlet prev = this.props.trip.currentLocation;\r\n\t\tlet { move, path, distance } = this.props.trip;\r\n\t\tlet lat = location.coords.latitude;\r\n\t\tlet lng = location.coords.longitude;\r\n\t\tlet timestamp = location.timestamp;\r\n\t\tlet segmentDistance = path.length ? helpers.getDistance(prev.lat, prev.lng, lat, lng) : 0; // в метрах\r\n\t\t\r\n\t\tif (move > 5) this.props.resetMove();\r\n\t\t\r\n\t\tthis.props.updateLocation({\r\n\t\t\tcurrentLocation: { lat, lng, speed: this.updateSpeedValue(location), timestamp }, \r\n\t\t\tpath: this.updateArrayIfPositionChanged(path, {lat, lng}), \r\n\t\t\tangle: this.updateAngleValue(location), \r\n\t\t\tmove: move + segmentDistance, \r\n\t\t\tdistance: distance + segmentDistance / 1000 \r\n\t\t});\r\n\r\n\t\tthis.setState({\r\n\t\t\ttemp: {...this.state.temp, path: this.updateArrayIfPositionChanged(this.state.temp.path, {lat, lng, timestamp})}\r\n\t\t})\r\n\t}\r\n\r\n\tconvertToReadableAddress = coords => {\r\n\t\treturn new Promise ((resolve, reject) => {\r\n\t\t\tlet maps = this.props.google.maps;\r\n\t\t\tlet addresses = [];\r\n\t\t\tlet geocoder = new maps.Geocoder();\r\n\r\n\t\t\tfor (var i = 0; i < coords.length; i++) {\r\n\t\t\t\tgeocoder.geocode({'location': coords[i]}, (results, status) => {\r\n\t\t\t\t\tif (status !== 'OK') reject(new Error('Geocoder failed due to: ' + status));\r\n\t\t\t\t\tif (!results[0]) reject(new Error('No results'));\r\n\t\t\t\t\t\t\r\n\t\t\t\t\taddresses.push(results[0].formatted_address);\r\n\t\t\t\t\tif (coords.length === addresses.length) resolve({start: addresses[0], end: addresses[1]});\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tstopRecording = () => {\r\n\t\tnavigator.geolocation.clearWatch(navigatorId);\r\n\t\twindow.removeEventListener(\"devicemotion\", this.updateAccelerationData);\r\n\t\t\r\n\t\tthis.saveBumpsToDatabase().then(() => this.getDatabaseBumpsCount()).then(bumpsCount => this.updateStatsInDatabase(bumpsCount));\r\n\t\tthis.updateFavoritiesData();\r\n\r\n\t\tdb.collection('temp').doc('temp').set({data: this.state.temp});\r\n\t}\r\n\r\n\tupdateFavoritiesData = () => {\r\n\t\tlet { bumps, path, distance} = this.props.trip;\r\n\t\tif (!path.length) return;\r\n\r\n\t\tlet bounds = helpers.getBounds(path);\r\n\t\tlet center = helpers.getCenter(bounds);\r\n\t\tlet zoom = helpers.getZoom(distance * 1000); //передаем в метрах\r\n\t\tlet endpoints = [path[0], path[path.length - 1]];\r\n\r\n\t\tthis.convertToReadableAddress(endpoints).then(({start, end}) => {\r\n\t\t\tthis.props.addToFavorities({start, end, path, zoom, center, bumps, distance});\r\n\t\t});\r\n\t}\r\n\r\n\tonZoomChanged = (mapProps, map, clickEvent) => {\r\n\t\t//console.log(map.getZoom());\r\n\t}\r\n\r\n\tsaveSharedTripToDatabase = () => {\r\n\t\tdb.collection('shared').doc(this.props.selectedTrip.id)\r\n\t\t.set({tripdata: this.props.selectedTrip}) //обработать неотправку на сервер\r\n\t\t.catch(error => console.log(error))\r\n\t}\t\r\n\r\n\tsaveBumpsToDatabase = () => {\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tlet bumpsRef = db.collection('bumpsmap').doc('bumps');\r\n\t\t\tlet count = 0;\r\n\t\t\tthis.props.trip.bumps.forEach(bump => \r\n\t\t\t\tbumpsRef.update({bumps: firebase.firestore.FieldValue.arrayUnion(bump)})\r\n\t\t\t\t.then(() => count++)\r\n\t\t\t\t.catch(error => reject(new Error('Bumps are not updated in database'))\r\n\t\t\t))\r\n\r\n\t\t\tif (count === this.props.trip.bumps.length) resolve('success')\r\n\t\t});\t\t\r\n\t}\r\n\r\n\tgetDatabaseBumpsCount = () => {\r\n\t\treturn db.collection('bumpsmap').doc('bumps')\r\n\t\t.get()\r\n\t\t.then(doc => { \r\n\t\t\tif (doc.exists) return doc.data().bumps.length})\r\n\t}\r\n\r\n\tupdateStatsInDatabase = bumpsCount => {\r\n\t\tlet statsRef = db.collection('stats').doc('totals');\r\n\t\t\r\n\t\tstatsRef.update({\r\n\t\t    bumpsCount: bumpsCount,\r\n\t\t    distanceTotal: firebase.firestore.FieldValue.increment(Math.round(this.props.trip.distance)),\r\n\t\t    tripsCount: firebase.firestore.FieldValue.increment(1),\r\n\t\t});\r\n\t}\t\r\n\r\n\trender() {\r\n\t\tlet { google, start, end } = this.props;\r\n\t\tlet { isFavoritiesListView, isShareView, isSelectedTripView, isCheckTripView } = this.props.menu;\r\n\r\n\t\tif (isFavoritiesListView) return <FavoritiesList />\r\n\t\tif (isShareView || isSelectedTripView) return <SelectedTripMap google={google} />\r\n\r\n\t\tif (isCheckTripView) {\r\n\t\t\treturn (\r\n\t\t\t\t<div className=\"map\">\r\n\t\t\t\t\t<BumpsMap \r\n\t\t\t\t\t\tcenterAroundCurrentLocation\r\n\t\t\t\t\t\tgoogle={google}\r\n\t\t\t\t\t\tupdateLocationData={this.updateLocationData}\r\n\t\t\t\t\t\tstart={start} \r\n\t\t\t\t\t\tend={end}>\r\n\t\t\t\t\t\t<Car />\r\n\t\t\t\t\t</BumpsMap>\t\r\n\t\t\t\t</div>\r\n\t\t\t)\r\n\t\t}\r\n\t\t\r\n\t\treturn (\r\n\t\t\t<div className=\"map\">\r\n\t\t\t\t<button style={{position: 'absolute', top: '27vh', left: '5vw', fontSize: 'calc(2vh + 2vw)', zIndex: 100}} onClick={this.sendTemp}>Temp</button>\r\n\t\t\t\t<BumpsMap \r\n\t\t\t\t\tcenterAroundCurrentLocation\r\n\t\t\t\t\tgoogle={google}\r\n\t\t\t\t\tupdateLocationData={this.updateLocationData}>\r\n\t\t\t\t\t<Car />\t\r\n\t\t\t\t\t<Polyline\r\n\t\t\t\t\t\tpath={this.props.trip.path}\r\n\t\t\t\t\t\tstrokeColor=\"#4D8FAC\"\r\n\t\t\t\t\t\tstrokeOpacity={0.8}\r\n\t\t\t\t\t\tstrokeWeight={4} />\t\t\t\t\t\r\n\t\t\t\t</BumpsMap>\r\n\t\t\t\t<div className=\"map-bump-cover\" style={{display: this.state.cover ? \"flex\": \"none\"}}/>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst WrapperContainer = GoogleApiWrapper({\r\n \tapiKey: process.env.REACT_APP_GOOGLE_MAPS_API_KEY\r\n})(Body);\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(WrapperContainer);\r\n","import React, { Component } from 'react';\r\nimport * as helpers from '../../helpers/index';\r\nimport { connect } from \"react-redux\";\r\n\r\nimport * as trip from \"../../ducks/trip\";\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        menu: state.menu,\r\n        mode: state.mode,\r\n        trip: state.trip,\r\n        dom: state.dom,\r\n        bumps: state.bumps\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n\tupdateLocation: trip.updateLocation,\r\n\tresetTrip: trip.resetTrip\r\n};\r\n\r\n\r\nclass BumpsMap extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tconst {lat, lng} = props.initialCenter;\r\n\r\n\t\tthis.state = {\r\n\t\t\tcurrentLocation: {lat, lng}, \r\n\t\t\tzoom: 17,\r\n\t\t\tisCurrentPositionReceived: false,\r\n\t\t\ttemp: []\r\n\t\t};\r\n\r\n\t\tthis.mymap = React.createRef();\r\n\t\tthis.mymarker = React.createRef();\r\n\t\tthis.tripBumps = [];\r\n\t\tthis.databaseBumps = [];\r\n\t\tthis.directionsBumps = [];\r\n\t}\r\n\r\n\tcomponentDidMount = () => {\r\n\t\tif (this.props.centerAroundCurrentLocation) {\r\n\t\t\tif (navigator && navigator.geolocation) {\r\n\t\t\t\tnavigator.geolocation.getCurrentPosition((pos) => {\r\n\t\t\t\t\tconst coords = pos.coords;\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\tcurrentLocation: {lat: coords.latitude, lng: coords.longitude},\r\n\t\t\t\t\t\tisCurrentPositionReceived: true\r\n\t                }, () => this.props.updateLocationData(pos));\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.loadMap();\r\n\r\n\t}\r\n\r\n\tcomponentDidUpdate(prevProps, prevState) {\r\n\t\tif (prevProps.google !== this.props.google) {\r\n\t\t\tthis.loadMap();\r\n\t\t}\r\n\r\n\t\tif (prevState.currentLocation !== this.state.currentLocation) {\r\n\t\t\tthis.recenterMap(this.state.currentLocation);\r\n\t\t}\r\n\r\n\t\tif ((prevProps.trip.currentLocation !== this.props.trip.currentLocation) && (this.state.isCurrentPositionReceived && this.props.mode.isRecording)) {\r\n\t\t\tthis.recenterMap(this.props.trip.currentLocation);\r\n\t\t\tthis.setState({currentLocation: this.props.trip.currentLocation})\r\n\t\t}\r\n\r\n\t\tif (prevProps.trip.bumps !== this.props.trip.bumps) {\r\n\t\t\tthis.tripBumps = this.setBumpsOnMap(this.props.trip.bumps, this.tripBumps, \"#fbad19\", 0.8);\r\n\t\t}\r\n\r\n\t\t// if (prevProps.allBumps !== this.props.allBumps && !this.props.menu.isCheckTripView) {\r\n\t\t// \tthis.databaseBumps = this.setBumpsOnMap(this.props.allBumps, this.databaseBumps, \"#e34929\", 0.8);\r\n\t\t// }\r\n\r\n\t\tif (prevProps.bumps !== this.props.bumps && !this.props.menu.isCheckTripView) {\r\n\t\t\tthis.databaseBumps = this.setBumpsOnMap(this.props.bumps, this.databaseBumps, \"#e34929\", 0.8);\r\n\t\t}\r\n\r\n\t\tif (prevProps.mode.isBuildingRoute !== this.props.mode.isBuildingRoute && this.props.mode.isBuildingRoute === true) {\r\n\t\t\tlet { start, end, google } = this.props;\r\n\t\r\n\t\t\tif (start !== \"\") return this.buildRoute({start, end});\r\n\t\t\tnavigator.geolocation.getCurrentPosition((pos) => this.buildRoute({start: new google.maps.LatLng(pos.coords.latitude, pos.coords.longitude), end}));\r\n\t\t}\r\n\t}\r\n\r\n\r\n\r\n\tbuildRoute = endpoints => {\r\n\t\tconsole.log(endpoints)\r\n\t\tlet maps = this.props.google.maps;\r\n\t\tthis.directionsDisplay.setMap(this.map);\r\n\r\n\t\tvar request = {\r\n\t\t\torigin: endpoints.start,\r\n\t\t\tdestination: endpoints.end,\r\n\t\t\ttravelMode: 'DRIVING'\r\n\t\t};\r\n\r\n\t\tthis.directionsService.route(request, (response, status) => {\r\n\t\t\tif (status === 'OK') {\r\n\t\t\t\tlet directionArray = [];\r\n\t\t\t\tlet polyline = maps.geometry.encoding.decodePath(response.routes[0].overview_polyline);\r\n\t\t\t\tpolyline.forEach(i => directionArray.push({lat: i.lat(), lng: i.lng()}));\r\n\r\n\t\t\t\tlet result = helpers.getRouteBumps(directionArray, this.props.bumps);\r\n\r\n\t\t\t\tthis.databaseBumps = this.setBumpsOnMap(result, this.databaseBumps, \"#e34929\", 0.8);\r\n\t\t\t\tthis.directionsDisplay.setDirections(response);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tconvertAddressToCoordinates = addresses => {\r\n\t\treturn new Promise ((resolve, reject) => {\r\n\t\t\tlet maps = this.props.google.maps;\r\n\t\t\tlet coords = [];\r\n\t\t\tlet geocoder = new maps.Geocoder();\r\n\r\n\t\t\tfor (var i = 0; i < addresses.length; i++) {\r\n\t\t\t\tgeocoder.geocode({'address': addresses[i]}, (results, status) => {\r\n\t\t\t\t\tif (status !== 'OK') reject(new Error('Geocoder failed due to: ' + status));\r\n\t\t\t\t\t\r\n\t\t\t\t\tcoords.push(results[0].geometry.location);\r\n\t\t\t\t\tif (coords.length === addresses.length) resolve({start: coords[0], end: coords[1]});\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tloadMap = () => {\r\n\t\tif (this.props.google) {\r\n\r\n\t\t\tlet maps = this.props.google.maps;\r\n\t\t\tlet zoom = this.props.zoom;\r\n\t\t\tconst { lat, lng } = this.state.currentLocation;\r\n\r\n\t\t\tconst center = new maps.LatLng(lat, lng);\r\n\t\t\tconst mapConfig = Object.assign({}, {\r\n\t\t\t\tcenter: center,\r\n\t\t\t\tzoom: zoom,\r\n\t\t\t\tzoomControl: false,\r\n\t\t\t\tscaleControl: false,\r\n\t\t\t\tfullscreenControl: false,\r\n\t\t\t\tmapTypeControl: false,\r\n\t\t\t\tstreetViewControl: false\r\n\t\t\t});\r\n\r\n\t\t\tthis.map = new maps.Map(this.mymap.current, mapConfig);\r\n\r\n\t\t\tif (this.map) {\r\n\t\t\t\tthis.directionsService = new maps.DirectionsService();\r\n\t\t\t\tthis.directionsDisplay = new maps.DirectionsRenderer();\r\n\t\t\t}\r\n\r\n\t\t\tconst evtNames = ['click', 'dragend', 'zoom_changed'];\r\n\t\t\tevtNames.forEach(e => this.map.addListener(e, this.handleEvent(e)));\r\n\r\n\t\t\tmaps.event.trigger(this.map, 'ready');\r\n\r\n\t\t\tif (this.map && !this.props.menu.isCheckTripView) { \r\n\t\t\t\tthis.databaseBumps = this.setBumpsOnMap(this.props.bumps, this.databaseBumps, \"#e34929\", 0.8);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\thandleEvent(evtName) {\r\n\t\tlet timeout;\r\n\t\tconst handlerName = `on${helpers.camelize(evtName)}`;\r\n\r\n\t\treturn (e) => {\r\n\t\t\tif (timeout) {\r\n\t\t\t\tclearTimeout(timeout);\r\n\t\t\t\ttimeout = null;\r\n\t\t\t}\r\n\t\t\ttimeout = setTimeout(() => {\r\n\t\t\t\tif (this.props[handlerName]) {\r\n\t\t\t\t\tthis.props[handlerName](this.props, this.map, e);\r\n\t\t\t\t}\r\n\t\t\t}, 0);\r\n\t\t}\r\n\t}\r\n\r\n\trecenterMap = currentLocation => {\r\n\t\tconst map = this.map;\r\n\t\tconst google = this.props.google;\r\n\t\tconst maps = google.maps;\r\n\r\n\t\tif (map) {\r\n\t\t\tlet center = new maps.LatLng(currentLocation.lat, currentLocation.lng);\r\n\t\t\tmap.panTo(center);\r\n\t\t}\r\n\t}\r\n\r\n\tdeleteMarkers = markersArray => {\r\n\t\tmarkersArray.forEach(marker => marker.setMap(null));\r\n\t\treturn [];\r\n\t}\r\n\r\n\tsetBumpsOnMap = (bumpsArray, markersArray, color, size) => {\r\n\t\tconst maps = this.props.google.maps;\r\n\r\n\t\tlet bumpOption = {\r\n\t\t\tpath: \"M-4,0a4,4 0 1,0 8,0a4,4 0 1,0 -8,0\",\r\n\t\t\tfillColor: color,\r\n\t\t\tstrokeColor: color,\r\n\t\t\tfillOpacity: 1.0,\r\n\t\t\tscale: size,\r\n\t\t\tanchor: new maps.Point(0, 0)\r\n\t\t}\r\n\r\n\t\tmarkersArray = this.deleteMarkers(markersArray);\r\n\t\tbumpsArray.forEach(bump => {\r\n\t\t\tmarkersArray.push(new maps.Marker({ \r\n\t\t\t\tposition: {lat: bump.lat, lng: bump.lng}, \r\n\t\t\t\ticon: bumpOption, \r\n\t\t\t\tmap: this.map \r\n\t\t\t}))\r\n\t\t})\r\n\r\n\t\treturn markersArray;\r\n\t}\r\n\r\n\tcomponentWillUnmount = () => {\r\n\t\tthis.deleteMarkers(this.tripBumps);\r\n\t\tthis.deleteMarkers(this.databaseBumps);\r\n\r\n\t}\r\n\r\n\trenderChildren = () => {\r\n\t\tconst {children} = this.props;\r\n\t\tif (!children) return;\r\n\r\n\t\treturn React.Children.map(children, c => {\r\n\t\t\treturn React.cloneElement(c, {\r\n\t\t\t\tmap: this.map,\r\n\t\t\t\tgoogle: this.props.google,\r\n\t\t\t\tmapCenter: this.state.currentLocation,\r\n\t\t\t\tcurrentLocation: this.props.trip.currentLocation,\r\n\t\t\t\tisCurrentPositionReceived: this.state.isCurrentPositionReceived\r\n\t\t\t});\r\n\t\t})\r\n\r\n\t}\r\n\r\n\trender() {\r\n\t\tlet style = {\r\n\t\t\twidth: this.props.dom.width + \"px\", \r\n\t\t\theight: this.props.dom.height +\"px\", \r\n\t\t\tposition: \"relative\"\r\n\t\t};\r\n\r\n\t\treturn (\r\n\t\t\t<div ref={this.mymap} style={style}>\r\n\t\t\tLoading...\r\n\t\t\t{this.renderChildren()}\r\n\t\t\t</div>\r\n\t\t\t);\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(BumpsMap);\r\n\r\n\r\nBumpsMap.defaultProps = {\r\n\tzoom: 16,\r\n\tinitialCenter: {\r\n\t\tlat: 53.893009,\r\n\t\tlng: 27.567444\r\n\t},\r\n\tcenterAroundCurrentLocation: false\r\n}","import { Component } from 'react';\r\nimport { connect } from \"react-redux\";\r\n\r\nimport * as trip from \"../../ducks/trip\";\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        trip: state.trip,\r\n        mode: state.mode\r\n    };\r\n};\r\n\r\nvar elements = [\r\n{path: \"M69.9,36c0.3-9.3,0.3-9.1,0.3-9.1c0-0.2,0.7-7.9-0.6-15.3c-1.3-7.5-9.7-9.5-9.7-9.5l-0.4,0l-8.9-0.3v0l-8.8,0.3  l-0.4,0c0,0-8.4,2.1-9.7,9.5c-1.3,7.4-0.6,15.1-0.6,15.3c0,0,0-0.3,0.3,9.1c0.4,9.8-0.6,34-0.5,37c0.1,2.9-0.2,9.2,0.4,10.8  c0.6,1.6,2.6,9.6,2.6,9.6s3.2,6.2,16.8,5.3v0c13.5,0.9,16.7-5.3,16.7-5.3s2-8,2.6-9.6c0.6-1.6,0.2-7.9,0.4-10.8  C70.5,70,69.5,45.8,69.9,36L69.9,36z\", fill:\"#D14C32\"},\r\n{path: \"M61.7,27.5c-3.2-1.6-11.1-1.8-11.1-1.8v0c0,0-8,0.1-11.1,1.8c-3.2,1.6-4.3,2.4-4.1,3.5c0.2,1.1,2.6,12,2.6,12.3  c0,0.3,0.2,0.7,1.5,0.4c1.2-0.4,11.2-0.8,11.2-0.8v0c0,0,10,0.4,11.2,0.8c1.2,0.4,1.5-0.1,1.5-0.4c0-0.3,2.4-11.2,2.6-12.3  C66,29.9,64.9,29.2,61.7,27.5L61.7,27.5z\", fill: \"#121215\"},\r\n{path: \"M67.4,32.8c0,0,0,12.6,0,16.3c0,3.7,0,8.7-0.3,12.1C66.8,64.7,66.1,80,66.1,80v0.3c0,0-2-5.3-2.4-9.4  c-0.9-4-0.5-14,0-20.1C64,44.8,67,33.9,67.4,32.8z\", fill: \"#101114\"},\r\n{path: \"M62.4,76.1c-0.2-1.4-0.4-1-0.5-1.1c-0.1-0.1-1.5,0.3-2.1,0.4c-4.6,0.8-9.3,0.6-9.3,0.6v0c0,0-4.7,0.2-9.3-0.6  c-0.6-0.1-2-0.5-2.1-0.4c-0.1,0.1-0.3-0.3-0.5,1.1c-0.2,1.4-1.4,9.9-1.3,10c0.1,0.1,2.9,1.8,7.9,2.6c1.1,0.1,5.3,0.2,5.3,0.2v0  c0,0,4.2-0.2,5.3-0.2c5-0.8,7.8-2.5,7.9-2.6C63.8,86.1,62.7,77.5,62.4,76.1L62.4,76.1z\", fill: \"#131417\"},\r\n{path: \"M67,36l1.2,0.7V38H67V36z\", fill: \"#0D0E13\"},\r\n{path: \"M59,2.9c-0.1-0.1-0.2-0.1-0.4-0.2C58.1,2.6,58.3,2.6,59,2.9z\", fill: \"#C2C6C1\"},\r\n{path: \"M67.7,11.8C66.9,6.6,61,3.7,59,2.9c2,1.4,3.4,9.1,4.5,14c1.1,5.2,1.8,13.5,1.8,13.5s2.4,0.4,3.6,7  C69.7,41.5,68.9,18.8,67.7,11.8L67.7,11.8z\", fill: \"#D8684A\"},\r\n{path: \"M42.6,2.8c-0.1,0-0.2,0.1-0.4,0.2C42.9,2.7,43.2,2.6,42.6,2.8z\", fill: \"#C2C6C1\"},\r\n{path: \"M33.5,11.8c-1.2,7-1.9,29.7-1.1,25.5c1.1-6.5,3.6-7,3.6-7s0.6-8.3,1.8-13.5c1.1-4.9,2.5-12.6,4.5-14  C40.3,3.8,34.4,6.6,33.5,11.8z\", fill: \"#D8684A\"},\r\n{path: \"M63.4,56.8l3.8-2.9v3.4l-3.8,2.4V56.8z M37.7,83.9c-0.2,1.3-0.3,2.2-0.2,2.2c0.1,0.1,2.9,1.8,7.9,2.6  c1.1,0.1,5.3,0.2,5.3,0.2v0c0,0,4.2-0.2,5.3-0.2c5-0.8,7.8-2.5,7.9-2.6c0,0-0.3-2.4-0.6-4.9L37.7,83.9L37.7,83.9z\", fill: \"#202226\"},\r\n{path: \"M37.3,40.1l24.4-5.8l3.7-1.2c0.2-1.1,0.4-1.9,0.4-2.1c0.2-1.1-0.9-1.9-4.1-3.5c-3.2-1.6-11.1-1.8-11.1-1.8v0  c0,0-8,0.1-11.1,1.8c-3.2,1.6-4.3,2.4-4.1,3.5C35.5,31.7,36.5,36.7,37.3,40.1L37.3,40.1z\", fill: \"#212428\"},\r\n{path: \"M33.9,32.9c0,0,0,12.6,0,16.3c0,3.7,0,8.7,0.3,12.1c0.3,3.4,0.9,18.7,0.9,18.7v0.3c0,0,2-5.3,2.4-9.4  c0.9-4,0.5-14,0-20.1C37.3,44.8,34.3,33.9,33.9,32.9z\", fill: \"#101114\"},\r\n{path: \"M69.9,36c0.3-9.3,0.3-9.1,0.3-9.1c0-0.2,0.7-7.9-0.6-15.3c-1.3-7.5-9.7-9.5-9.7-9.5l-0.4,0l-8.9-0.3v0l-8.8,0.3  l-0.4,0c0,0-8.4,2.1-9.7,9.5c-1.3,7.4-0.6,15.1-0.6,15.3c0,0,0-0.3,0.3,9.1c0.4,9.8-0.6,34-0.5,37c0.1,2.9-0.2,9.2,0.4,10.8  c0.6,1.6,2.6,9.6,2.6,9.6s3.2,6.2,16.8,5.3v0c13.5,0.9,16.7-5.3,16.7-5.3s2-8,2.6-9.6c0.6-1.6,0.2-7.9,0.4-10.8  C70.5,70,69.5,45.8,69.9,36L69.9,36z M69.3,83.9c-1.6,9.7-4,11.2-6.7,12.7c-2.7,1.4-11.9,1.6-11.9,1.6v0c-0.9,0-9.3-0.3-11.9-1.6  c-2.7-1.5-5.1-3-6.7-12.7c-1.6-9.7,0.6-13.6,0.4-21.9c-0.3-8.3-0.3-29.6-0.2-32c0.1-2.4-0.6-19.1,1.7-21.5c2.3-2.4,5.6-5.7,7.6-5.8  C42.6,2.7,44,2.6,45,2.6V2.6h5.7v0h5.6v0.1c1.2,0,2.3,0,3.5,0.1c2,0.1,5.3,3.4,7.6,5.8c2.3,2.4,1.6,19.1,1.7,21.5  c0.1,2.4,0.1,23.7-0.2,32C68.6,70.3,70.9,74.2,69.3,83.9L69.3,83.9z\", fill: \"#9E4A36\"},\r\n{path: \"M34.3,91c0,0,1.5,3.3,4,4.1c2.4,0.9,4.2,1.3,4.2,1.3s-3.1,0-4.8-1C36.1,94.5,34.2,93.1,34.3,91z\", fill: \"#9E4A36\"},\r\n{path: \"M41.5,2.7c0,0-3.4,1.6-4.4,2.8c-1,1.1-2.5,3-2.6,3.3c0,0.2,0,0.9,0,0.9S40.6,3.1,41.5,2.7z\", fill: \"#FEFDF8\"},\r\n{path: \"M50.6,1.8L50.6,1.8L50.6,1.8L50.6,1.8z M58.4,3c0-0.3-1.7-0.8-2.2-0.9c-0.4-0.1-5.3-0.2-5.6-0.2l0,0  c-0.3,0-5.2,0.2-5.6,0.3c-0.4,0.1-2.1,0.6-2.2,0.9c0,0.3,0.3,0.5,0.7,0.3s1-0.7,1.4-0.8c0.4-0.1,5.7-0.3,5.7-0.3l0,0  c0.4,0,5.2,0.2,5.6,0.3c0.4,0.1,1,0.6,1.4,0.8C58.1,3.5,58.4,3.3,58.4,3L58.4,3z\", fill: \"#1D2021\"},\r\n{path: \"M32.8,36.8c0,0-3.4,1.4-3.6,2.7C29,40.8,29,41,29.2,41s3.8-1.9,3.8-1.9v-2.3L32.8,36.8L32.8,36.8z\", fill: \"#D14C32\"},\r\n{path: \"M29.2,41.3l0-0.3l3.8-1.9v0.3L29.2,41.3z\", fill: \"#0D0E13\"},\r\n{path: \"M34.3,36.1L33,36.8V38h1.2V36.1z\", fill: \"#0D0E13\"},\r\n{path: \"M37.9,56.9L34,54v3.4l3.8,2.4V56.9z\", fill: \"#202226\"},\r\n{path: \"M38.7,76.1c0.2-1.4,0.4-1,0.5-1.1c0.1-0.1,1.5,0.3,2.1,0.4c4.6,0.8,9.3,0.6,9.3,0.6v0c0,0,4.7,0.2,9.3-0.6  c0.6-0.1,2-0.5,2.1-0.4c0.1,0.1,0.3-0.3,0.5,1.1c0.2,1.4,1.4,9.9,1.3,10c-0.1,0.1-2.9,1.8-7.9,2.6c-1.1,0.1-5.3,0.2-5.3,0.2v0  c0,0-4.2-0.2-5.3-0.2c-5-0.8-7.8-2.5-7.9-2.6C37.3,86.1,38.5,77.5,38.7,76.1L38.7,76.1z M39.6,27.5c3.2-1.6,11.1-1.8,11.1-1.8v0  c0,0,8,0.1,11.1,1.8c3.2,1.6,4.3,2.4,4.1,3.5c-0.2,1.1-2.6,12-2.6,12.3c0,0.3-0.2,0.7-1.5,0.4c-1.2-0.4-11.2-0.8-11.2-0.8v0  c0,0-10,0.4-11.2,0.8c-1.2,0.4-1.5-0.1-1.5-0.4c0-0.3-2.4-11.2-2.6-12.3C35.3,29.9,36.4,29.2,39.6,27.5L39.6,27.5z\", fill: \"#343C3E\"},\r\n{path: \"M38.2,28.3c-2.2,1.2-3,1.9-2.8,2.8c0.2,1.1,2.6,12,2.6,12.3c0,0.3,0.2,0.7,1.5,0.4c0.3-0.1,1-0.2,2-0.2  C39.9,39.9,38.7,31.8,38.2,28.3L38.2,28.3z M63.1,28.2c2.2,1.2,3,1.9,2.8,2.8c-0.2,1.1-2.6,12-2.6,12.3c0,0.3-0.2,0.7-1.5,0.4  c-0.3-0.1-1-0.2-2-0.2C61.4,39.9,62.6,31.8,63.1,28.2L63.1,28.2z\", fill: \"#2E3436\"},\r\n{path: \"M65.3,29.7c-0.6-0.6-1.8-1.2-3.6-2.2c-3.2-1.6-11.1-1.8-11.1-1.8v0h0v0c-0.6,0-8.1,0.2-11.1,1.8  c-1.8,0.9-2.9,1.6-3.6,2.2l2.8,2.2c0,0,5.7-0.9,11.9-1v0c6.1,0.1,11.8,0.7,11.8,0.7L65.3,29.7L65.3,29.7z\", fill: \"#202226\"},\r\n{path: \"M59.8,2.7c0,0,3.4,1.6,4.4,2.8c1,1.1,2.5,3,2.6,3.3c0,0.2,0,0.9,0,0.9S60.7,3.1,59.8,2.7z\", fill: \"#FEFDF8\"},\r\n{path: \"M55.4,3.8H44.8c0,0-2.2,0.6-2.9,8.6c-0.7,8-2,14.1,3,12.7c4.9-1.4,7.6-0.2,9.8-0.3c2.2-0.2,5.6,2.3,4.3-8.6  C57.7,5.2,57.6,4.6,55.4,3.8L55.4,3.8z\", fill: \"#D8684A\"},\r\n{path: \"M44.5,24.3l1.8-18.1l-1.3,6.4L44.5,24.3z M56.8,24.2L55,6.2l1.3,6.4L56.8,24.2z M66.9,90.9c0,0-1.5,3.3-4,4.1  c-2.4,0.9-4.2,1.3-4.2,1.3s3.1,0,4.8-1C65.2,94.5,67,93,66.9,90.9L66.9,90.9z\", fill: \"#9E4A36\"},\r\n{path: \"M39.2,75c-0.1,0.1-0.3-0.3-0.5,1.1s-1.4,9.9-1.3,10c0,0,0.7,0.5,2,1L41,75.4C40.3,75.2,39.2,74.9,39.2,75  L39.2,75z M62.4,76.2c-0.2-1.4-0.4-1-0.5-1.1c0-0.1-1.1,0.2-1.8,0.3l1.6,11.8c1.2-0.5,1.9-0.9,2-1C63.8,86.1,62.6,77.6,62.4,76.2  L62.4,76.2z\", fill: \"#2E3436\"},\r\n{path: \"M68.4,36.8c0,0,3.4,1.4,3.6,2.7s0.2,1.5,0,1.5c-0.2,0-3.8-1.9-3.8-1.9v-2.3L68.4,36.8L68.4,36.8z\", fill: \"#D14C32\"},\r\n{path: \"M72,41.3l0-0.3L68.3,39v0.3L72,41.3z\", fill: \"#0D0E13\"},\r\n{path: \"M55.9,88.3H44.7c0,0-6.1-0.8-5.3,1.8c0.8,2.6-0.8,5.8,7.6,5.8h6.5c8.5,0,6.8-3.2,7.6-5.8  C62,87.4,55.9,88.3,55.9,88.3L55.9,88.3z\", fill: \"#D8684A\"},\r\n{path: \"M51,86.9c-5.2,0-9.8-1.1-13.1-3l-0.2,0c-0.3,2.4-0.3,2.2-0.2,2.3c0.1,0.1,2.9,1.8,7.9,2.6  c1.1,0.1,5.3,0.2,5.3,0.2v0c0,0,4.2-0.2,5.3-0.2c5-0.8,7.8-2.5,7.9-2.6c0,0-0.1-0.8-0.2-2C60.4,85.9,55.9,86.9,51,86.9z\", fill: \"#202226\"},\r\n{path: \"M58.3,51.8c1.2-3.8-0.8-5.2-3.1-5.6c-1.8-0.3-6.4-0.2-7.9-0.1c-2.7,0.2-5.6,1.3-4.2,5.7c2.4,7.5-0.1,17.8,0,19  c0.1,0.9,1.4,2.4,4,2.8c0.9,0.1,6.8,0.1,7.9-0.1c2.1-0.5,3.2-1.8,3.3-2.6C58.4,69.6,55.9,59.3,58.3,51.8L58.3,51.8z\", fill: \"#D8684A\"}];\r\n\r\nclass Car extends Component {\r\n\r\n\tcomponentDidMount = () => {\r\n\t\tthis.marker = [];\r\n\t}\r\n\r\n\tcomponentDidUpdate = (prevProps) => {\r\n\t\tlet { map, isCurrentPositionReceived} = this.props;\r\n\t\tlet speed = this.props.trip.currentLocation.speed;\r\n\t\tlet { angle, move } = this.props.trip;\r\n\r\n\t\tif (map !== prevProps.map || (speed > 5 && (angle !== prevProps.angle || move > 5)) || isCurrentPositionReceived !== prevProps.isCurrentPositionReceived) {\r\n\t\t\tthis.renderMarker();\r\n\t\t}\r\n\r\n\t\tif (prevProps.trip.path !== this.props.trip.path && this.props.trip.path.length) {\r\n\t\t \tthis.renderMarker();\r\n\t\t }\r\n\t}\r\n\r\n\tcomponentWillUnmount = () => {\r\n\t    this.removeMarker();\r\n\t}\r\n\r\n\tremoveMarker = () => {\r\n\t\tif (this.marker && this.marker.length > 0) {\r\n\t    \tthis.marker.forEach(i => {\r\n\t    \t\ti.setMap(null);\r\n\t    \t});      \r\n\t    }\r\n\t}\r\n\r\n\trenderMarker = () => {\r\n\t\tthis.removeMarker();\r\n\r\n\t\tlet {map, google, mapCenter } = this.props;\r\n\t\tlet currentLocation = this.props.trip.currentLocation;\r\n\t\tlet position = currentLocation.lat ? {lat: currentLocation.lat, lng: currentLocation.lng} : undefined;\r\n\r\n\t\tlet pos = position || mapCenter;\r\n\t\tposition = new google.maps.LatLng(pos.lat, pos.lng);\r\n\r\n\t\telements.forEach((i, index) => {\r\n\t\t\tvar icon = {\r\n\t\t\t\tpath: i.path,\r\n\t\t\t\tfillColor: i.fill,\r\n\t\t\t\tstrokeColor: i.fill,\r\n                fillOpacity: 1.0,\r\n                scale: 0.4,\r\n                anchor: new google.maps.Point(50, 50),\r\n\t\t\t\trotation: this.props.trip.angle\r\n\t\t\t};\r\n\r\n\t\t\tconst pref = {\r\n\t\t        map: map,\r\n\t\t        position: position,\r\n\t\t        icon\r\n\t\t    };\r\n\r\n\t\t    this.marker[index] = new google.maps.Marker(pref);\r\n\t\t    this.marker[index].setZIndex(100);\r\n\t\t});\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps)(Car);","import React, { Component } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { connect } from \"react-redux\";\r\n\r\nimport store from \"../../store/store\";\r\nimport * as menu from \"../../ducks/menu-state\";\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n\tselectCheckTripView: menu.selectCheckTripView,\r\n\tselectBumpsMapView: menu.selectBumpsMapView,\r\n\tcloseDrawerView: menu.closeDrawerView\r\n});\r\n\r\nclass Drawer extends Component {\r\n\r\n\thandleSelection = action => {\r\n\t\tthis.props[action]();\r\n\t\tthis.props.closeDrawerView();\r\n\t}\r\n\r\n\tmarkActiveTab = id => {\r\n\t\tlet hash = window.location.hash;\r\n\t\treturn (hash.split('#/').pop() === id ) ? \" drawer-item-active\" : \"\";\r\n\t}\r\n\r\n\trender() {\r\n\t\tlet items = [\r\n\t\t\t{id: \"map\", title: \"Report a bump\", action: 'selectBumpsMapView' },\r\n\t\t\t{id: \"checktrip\", title: \"Check your trip\", action: 'selectCheckTripView' },\r\n\t\t\t{id: \"calibrate\", title: \"Calibrate sensors\", action: 'selectBumpsMapView' },\r\n\t\t\t{id: \"settings\", title: \"Settings\", action: 'selectBumpsMapView' }];\r\n\r\n\t\treturn (\r\n\t\t\t<div className=\"drawer\">\r\n\t\t\t\t<div className=\"drawer-logo\"></div>\r\n\t\t\t\t<div className=\"drawer-body\">\r\n\t\t\t\t\t{items.map(item => (\r\n\t\t\t\t\t\t<Link \r\n\t\t\t\t\t\t\tclassName={`drawer-item${this.markActiveTab(item.id)}`} \r\n\t\t\t\t\t\t\texact=\"true\" \r\n\t\t\t\t\t\t\tkey={item.id}\r\n\t\t\t\t\t\t\tid={item.id} \r\n\t\t\t\t\t\t\tto={`/${item.id}`} \r\n\t\t\t\t\t\t\treplace \r\n\t\t\t\t\t\t\tonClick={this.handleSelection(item.action)}>\r\n\t\t\t\t\t\t\t{item.title}\r\n\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t))}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default connect(null, mapDispatchToProps)(Drawer);\r\n","import React, { Component } from 'react';\r\nimport { connect } from \"react-redux\";\r\n\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        selectedTrip: state.selectedTrip,\r\n        dom: state.dom\r\n    };\r\n};\r\n\r\nclass SelectedTripMap extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.mapRef = React.createRef();\r\n\t\tthis.trip = null;\r\n\t\tthis.bumps = [];\r\n\t}\r\n\r\n\tcomponentDidMount = () => {\r\n\t\tthis.loadMap();\r\n\t}\r\n\r\n\tcomponentDidUpdate = (prevProps, prevState) => {\r\n\t\tif (prevProps.google !== this.props.google || prevProps.selectedTrip !== this.props.selectedTrip) {\r\n\t\t\tthis.loadMap();\r\n\t\t}\r\n\t}\r\n\r\n\tloadMap = () => {\r\n\t\tif (this.props.google) {\r\n\r\n\t\t\tlet maps = this.props.google.maps;\r\n\t\t\tlet { zoom, path, center, bumps } = this.props.selectedTrip;\r\n\r\n\t\t\tconst mapOptions = {\r\n\t\t\t\tcenter,\r\n\t\t\t\tzoom,\r\n\t\t\t\tzoomControl: false,\r\n    \t\t\tscaleControl: false,\r\n    \t\t\tfullscreenControl: false,\r\n    \t\t\tmapTypeControl: false,\r\n    \t\t\tstreetViewControl: false,\r\n\t\t\t};\r\n\r\n\t\t\tlet tripOptions = {\r\n\t\t\t\tpath,\r\n\t\t        strokeColor: '#4D8FAC',\r\n\t\t        strokeOpacity: 0.8,\r\n\t\t        strokeWeight: 4,\r\n\t\t\t};\r\n\r\n\t\t\tlet bumpOption = {\r\n\t\t\t\tpath: \"M-4,0a4,4 0 1,0 8,0a4,4 0 1,0 -8,0\",\r\n\t\t\t\tfillColor: \"red\",\r\n\t\t\t\tstrokeColor: \"red\",\r\n                fillOpacity: 1.0,\r\n                scale: 0.8,\r\n                anchor: new maps.Point(0, 0)\r\n\t\t\t}\r\n\r\n  \t\t\tthis.map = new maps.Map(this.mapRef.current, mapOptions);\r\n\t\t\tthis.trip = new maps.Polyline(tripOptions);\r\n\t\t\t\r\n\t\t\tif (this.map) {\r\n\t\t\t\tthis.trip.setMap(this.map); \r\n\r\n\t\t\t\tbumps.forEach((bump, index) => {\r\n\t\t\t\t\tthis.bumps.push(new maps.Marker({ position: {lat: bump.lat, lng: bump.lng}, icon: bumpOption, map: this.map, animation: maps.Animation.DROP }));\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tcomponenWillUnmount = () => {\r\n\t\tthis.trip.setMap(null);\r\n\t\tthis.bumps.forEach(bump => bump.setMap(null));\r\n\t}\r\n\t\r\n\trender() {\r\n\t\tif (!this.props.selectedTrip) return;\r\n\t\tlet { width, height } = this.props.dom;\r\n\r\n\t  \treturn (\r\n\t  \t\t<div className=\"favorities-map\">\r\n\t  \t\t\t<div ref={this.mapRef} \r\n\t  \t\t\t\tstyle={{\r\n\t\t\t\t\t\twidth: width +\"px\", \r\n\t\t\t\t\t\theight: height +\"px\", \r\n\t\t\t\t\t\tposition: \"relative\"\r\n\t\t  \t\t\t}} />\r\n\t  \t\t</div>\r\n        );\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps)(SelectedTripMap);\r\n","import React, { Component } from 'react';\r\nimport '../../styles/shared-trip.css';\r\n\r\nclass Slider extends Component {\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"slider\">\r\n\t\t\t\t<div className=\"slider-background\"/>\r\n\t\t\t\t<div className=\"slider-foreground\" style={{backgroundColor: this.props.color, width: `${this.props.width}%`}}/>\r\n\t\t\t\t<div className=\"slider-dividers\">\r\n\t\t\t\t\t<div className=\"slider-divider\" />\r\n\t\t\t\t\t<div className=\"slider-divider\" />\r\n\t\t\t\t\t<div className=\"slider-divider\" />\r\n\t\t\t\t\t<div className=\"slider-divider\" />\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t\t\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default Slider;","import React, { Component } from 'react';\r\nimport { connect } from \"react-redux\";\r\nimport { FacebookShareButton, TelegramShareButton, WhatsappShareButton, ViberShareButton, EmailShareButton } from 'react-share';\r\nimport { FacebookIcon, TelegramIcon, WhatsappIcon, ViberIcon, EmailIcon } from 'react-share';\r\nimport { db } from '../Firebase/index';\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n    \tselectedTrip: state.selectedTrip,\r\n    \tmenu: state.menu\r\n    };\r\n};\r\n\r\nclass ShareBlock extends Component {\r\n\trender() {\r\n\t\tif (this.props.selectedTrip === null) return null;\r\n\t\tlet url = `https://alesiagit.github.io/reactjs_accel/#/shared/${this.props.selectedTrip.id}`;\r\n\t\t\r\n\t\treturn (\r\n\t\t\t<div className=\"share-wrapper\">\r\n\t\t\t\t<div className=\"share-buttons-wrapper\" onClick={this.redirect}>\r\n\t\t\t\t\t<EmailShareButton url={url} className=\"share-social-icon\">\r\n\t\t\t\t\t\t<EmailIcon size={38} round={false} borderRadius={8}/>\r\n\t\t\t\t\t</EmailShareButton>\r\n\t\t\t\t\t<FacebookShareButton url={url} className=\"share-social-icon\">\r\n\t\t\t\t\t\t<FacebookIcon size={38} round={false} borderRadius={8}/>\r\n\t\t\t\t\t</FacebookShareButton>\r\n\t\t\t\t\t<TelegramShareButton url={url} className=\"share-social-icon\">\r\n\t\t\t\t\t\t<TelegramIcon size={38} round={false} borderRadius={8}/>\r\n\t\t\t\t\t</TelegramShareButton>\r\n\t\t\t\t\t<WhatsappShareButton url={url} className=\"share-social-icon\">\r\n\t\t\t\t\t\t<WhatsappIcon size={38} round={false} borderRadius={8}/>\r\n\t\t\t\t\t</WhatsappShareButton>\r\n\t\t\t\t\t<ViberShareButton url={url} className=\"share-social-icon\">\r\n\t\t\t\t\t\t<ViberIcon size={38} round={false} borderRadius={8}/>\r\n\t\t\t\t\t</ViberShareButton>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps)(ShareBlock);","import React, { Component } from 'react';\r\nimport { connect } from \"react-redux\";\r\n\r\nimport '../../styles/shared.css';\r\nimport '../../styles/shared-trip.css';\r\n\r\nimport { HeaderMenu, HeaderSubmenu, Drawer, NextStepButton, Body } from '../_common/index';\r\nimport * as helpers from '../../helpers/index';\r\nimport ShareBlock from './share-block';\r\n\r\nimport * as trip from \"../../ducks/selected-trip\";\r\nimport * as menu from \"../../ducks/menu-state\";\r\nimport * as mode from \"../../ducks/mode\";\r\nimport * as dom from \"../../ducks/dom\";\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tselectedTrip: state.selectedTrip,\r\n\t\tmenu: state.menu,\r\n\t\tmode: state.mode\r\n\t};\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n\tcloseDrawerView: menu.closeDrawerView,\r\n\tselectDrawerView: menu.selectDrawerView,\r\n\tselectBumpsMapView: menu.selectBumpsMapView,\r\n\tselectFavoritiesListView: menu.selectFavoritiesListView,\r\n\tselectShareView: menu.selectShareView,\r\n\tcloseShareView: menu.closeShareView,\r\n\tstartRecording: mode.startRecording,\r\n\tstopRecording: mode.stopRecording,\r\n\tnoTripsSelected: trip.noTripsSelected,\r\n\tchangeBarColor: dom.changeBarColor\r\n};\r\n\r\nclass ReportBumps extends Component {\r\n\tcomponentDidMount = () => {\r\n\t\tthis.props.changeBarColor(\"#4c88b7\");\r\n\t\tthis.props.selectBumpsMapView();\r\n\t\tthis.props.stopRecording();\r\n\t}\r\n\r\n\tonLeftMenuToggle = () => {\r\n\t\tlet { isDrawerView, isSelectedTripView } = this.props.menu;\r\n\t\tif (isDrawerView) return this.props.closeDrawerView();\r\n\t\t\r\n\t\tif (isSelectedTripView) {\r\n\t\t\tthis.props.noTripsSelected();\r\n\t\t\tthis.props.selectFavoritiesListView();\r\n\t\t\treturn;\r\n\t\t} \r\n\r\n\t\treturn this.props.selectDrawerView();\r\n\t}\r\n\r\n\tonRightMenuToggle = () => {\r\n\t\tif (this.props.menu.isShareView) return this.props.closeShareView();\r\n\t\tthis.props.selectShareView();\r\n\t}\r\n\r\n\tonNextStepButtonToggle = () => {\r\n\t\tif (this.props.mode.isRecording) return this.props.stopRecording();\r\n\t\tthis.props.startRecording();\r\n\t}\t\r\n\r\n\tonSubmenuTabSelect = condition => {\r\n\t\tconst handlerName = `select${helpers.camelize(condition)}View`;\r\n\t\tthis.props[handlerName]();\r\n\t}\r\n\r\n\tmarkActiveTab = condition => {\r\n\t\tconst selectedOption = `is${helpers.camelize(condition)}View`;\r\n\t\treturn this.props.menu[selectedOption];\r\n\t}\t\r\n\r\n\trender() {\r\n\t\tlet drawerDisplay = this.props.menu.isDrawerView ? \"block\" : \"none\";\r\n\t\tlet shareDisplay = this.props.menu.isShareView ? \"block\" : \"none\";\r\n\t\tlet { color, text } = this.props.mode;\r\n\r\n\t\treturn (\r\n\t\t\t<div className=\"wrapper\">\r\n\t\t\t\t<div className=\"main\">\r\n\t\t\t\t\t<div className=\"header\">\r\n\t\t\t\t\t\t<HeaderMenu \r\n\t\t\t\t\t\t\tonLeftMenuToggle={this.onLeftMenuToggle} \r\n\t\t\t\t\t\t\tonRightMenuToggle={this.onRightMenuToggle} />\r\n\t\t\t\t\t\t<HeaderSubmenu \r\n\t\t\t\t\t\t\tonSubmenuTabSelect={this.onSubmenuTabSelect}\r\n\t\t\t\t\t\t\tmarkActiveTab={this.markActiveTab}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t<Body />\r\n\t\t\t\t<NextStepButton \r\n\t\t\t\t\tcolor={color}\r\n\t\t\t\t\ttext={text}\r\n\t\t\t\t\ttoggleButton={this.onNextStepButtonToggle}\t/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"cover\" style={{display: shareDisplay}}>\r\n\t\t\t\t\t<div className=\"cover-background\" onClick={this.onRightMenuToggle} />\r\n\t\t\t\t\t<ShareBlock />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"cover\" style={{display: drawerDisplay}}>\r\n\t\t\t\t\t<div className=\"cover-background\" onClick={this.onLeftMenuToggle} />\r\n\t\t\t\t\t<Drawer />\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ReportBumps);","import React, { Component } from 'react';\r\nimport { db } from '../Firebase/index';\r\nimport { connect } from \"react-redux\";\r\n\r\nimport '../../styles/shared-trip.css';\r\nimport { Body, Slider } from '../_common/index';\r\n\r\nimport * as selectedTrip from \"../../ducks/selected-trip\";\r\nimport * as menu from \"../../ducks/menu-state\";\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n    \tselectedTrip: state.selectedTrip,\r\n        menu: state.menu\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n\tselectTrip: selectedTrip.selectTrip,\r\n\tselectTripView: menu.selectTripView\r\n};\r\n\r\n\r\nclass SharedTrip extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\tisDataReceived: false,\r\n\t\t\tisStatsView: true,\r\n\t\t\tstats: null,\r\n\t\t\ttripQuality: \"low\"\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tcomponentDidMount = () => {\r\n\t\tthis.getSharedTripData()\r\n\t\t.then(() => this.getAppStatistics())\r\n\t\t.then(() => this.setState({ \r\n\t\t\ttripQuality: this.setTripQuality(),\r\n\t\t\tisDataReceived: true\r\n\t\t}))\r\n\t\t.catch(error => console.log(error))\r\n\t}\r\n\r\n\tgetSharedTripData = () => {\r\n\t\tlet id = window.location.hash.split(\"#/shared/\").pop();\r\n\t\treturn db.collection('shared').doc(id)\r\n\t\t.get()\r\n\t\t.then(doc => {\r\n\t\t\tif (doc.exists) return doc.data().tripdata;\r\n\t\t}).then(trip => {\r\n\t\t\tthis.props.selectTrip(trip);\r\n\t\t\tthis.props.selectTripView();\r\n\t\t})\r\n\t}\r\n\r\n\tgetAppStatistics = () => {\r\n\t\treturn db.collection('stats').doc('totals')\r\n\t\t.get()\r\n\t\t.then(doc => {\r\n\t\t\tif (doc.exists) this.setState({stats: doc.data()})\r\n\t\t})\r\n\t}\r\n\r\n\ttoggleStats = () => {\r\n\t\tthis.setState({isStatsView: !this.state.isStatsView})\r\n\t}\r\n\r\n\tsetTripQuality = () => {\r\n\t\tlet trip = this.props.selectedTrip;\r\n\t\tlet stats = this.state.stats;\r\n\r\n\t\tlet tripQuality = [\"low\", \"moderate\", \"good\"];\r\n\t\tlet quality = (trip.bumps.length/trip.distance) / (stats.bumpsCount/stats.distanceTotal) * 100;\r\n\r\n\t\tif (quality < 30) return tripQuality[0];\r\n\t\tif (quality > 70) return tripQuality[2];\r\n\r\n\t\treturn tripQuality[1];\r\n\t}\r\n\r\n\trender() {\r\n\t\tlet trip = this.props.selectedTrip;\r\n\t\tlet { isDataReceived, isStatsView, stats, tripQuality } = this.state;\r\n\r\n\t\tif (isDataReceived === false) return <div>Retrieving data from database</div>\r\n\r\n\t\tlet bumpsCount = trip.bumps.length;\r\n\t\tlet distance = trip.distance;\r\n\t\t\r\n\t\treturn (\r\n\t\t\t<div className=\"shared-wrapper\">\r\n\t\t\t\t<div className=\"shared-stats\">\r\n\t\t\t\t\t<div className=\"shared-summary-header\">\r\n\t\t\t\t\t\t<div className=\"shared-summary-wrapper\">\r\n\t\t\t\t\t\t\t<div className=\"shared-summary\">Bumpy road informer</div>\r\n\t\t\t\t\t\t\t<div className=\"shared-trip-quality\">Trip quality: {tripQuality} </div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"collapse-icon\" onClick={this.toggleStats}/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"shared-details-wrapper\" style={{display: isStatsView ? \"flex\" : \"none\"}}>\r\n\t\t\t\t\t<div className=\"shared-endpoints\">\r\n\t\t\t\t\t\t<div className=\"shared-address-line\"><span className=\"shared-address-destination\">From: </span>{trip.start}</div>\r\n\t\t\t\t\t\t<div className=\"shared-address-line\"><span className=\"shared-address-destination\">To: </span>{trip.end}</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"shared-slider-wrapper\">\r\n\t\t\t\t\t\t<div className=\"slider-header\"><span className=\"slider-fieldname\">Bumps per trip: </span>{bumpsCount}</div>\r\n\t\t\t\t\t\t<Slider color=\"#7fb8e9\" width={bumpsCount / (stats.bumpsCount / stats.tripsCount) * 100} />\r\n\t\t\t\t\t\t<div className=\"slider-header\"><span className=\"slider-fieldname\">Bumps per km: </span>{(bumpsCount/distance).toFixed(2)}</div>\r\n\t\t\t\t\t\t<Slider color=\"#fbad19\" width={(bumpsCount/distance) / (stats.bumpsCount/stats.distanceTotal) * 100}/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"shared-map\"><Body /></div>\r\n\t\t\t</div>\r\n\t\t\t);\r\n\r\n\t\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(SharedTrip);\r\n","import React, { Component } from 'react';\r\nimport { connect } from \"react-redux\";\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        mode: state.mode\r\n    };\r\n};\r\n\r\nclass SearchMenu extends Component {\r\n\trender() {\r\n\t\tlet displaySearch = (!this.props.mode.isGuidance && !this.props.mode.isBuildingRoute) ? \"flex\" : \"none\";\r\n\t\treturn (\r\n\t\t\t<div className=\"search-menu\" style={{display: displaySearch}} >\r\n\t\t\t\t<div className=\"from-to-icon\"></div>\r\n\t\t\t\t<div className=\"search-form\">\r\n\t\t\t\t\t{[\"start\", \"end\"].map(item => (\r\n\t\t\t\t\t\t<div key={item} className=\"search-input-wrapper\">\r\n\t\t\t\t\t\t\t<input \r\n\t\t\t\t\t\t\t\ttype=\"text\" \r\n\t\t\t\t\t\t\t\tname={item} \r\n\t\t\t\t\t\t\t\tvalue={this.props[item]}\r\n\t\t\t\t\t\t\t\tclassName=\"search-input\" \r\n\t\t\t\t\t\t\t\tplaceholder={(item === \"start\") ? \"(Current position)\" : \"\"}\r\n\t\t\t\t\t\t\t\tonFocus={this.props.preventResize}\r\n\t\t\t\t\t\t\t\tonChange={e => this.props.handleChange(e)} />\r\n\t\t\t\t\t\t\t<div \r\n\t\t\t\t\t\t\t\tclassName=\"search-cancel-btn\"\r\n\t\t\t\t\t\t\t\tonClick={() => this.props.clearInput(item)} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps)(SearchMenu);\r\n","import React, { Component } from 'react';\r\nimport '../../styles/check-trip.css';\r\nimport { HeaderMenu, Drawer, NextStepButton, Body } from '../_common/index';\r\nimport SearchMenu from './search-menu';\r\nimport { connect } from \"react-redux\";\r\n\r\nimport * as menu from \"../../ducks/menu-state\";\r\nimport * as mode from \"../../ducks/mode\";\r\nimport * as dom from \"../../ducks/dom\";\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        selectedTrip: state.selectedTrip,\r\n        menu: state.menu,\r\n        mode: state.mode,\r\n        dom: state.dom\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n\tcloseDrawerView: menu.closeDrawerView,\r\n\tselectDrawerView: menu.selectDrawerView,\r\n\tselectCheckTripView: menu.selectCheckTripView,\r\n\tstartGuidance: mode.startGuidance,\r\n\tstopGuidance: mode.stopGuidance,\r\n\tbuildRoute: mode.buildRoute,\r\n\tchangeBarColor: dom.changeBarColor\r\n};\r\n\r\nclass CheckTrip extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t    this.state = {\r\n\t    \tstart: \"\",\r\n\t    \tend: \"\"\r\n\t    };\r\n\t}\r\n\r\n\tcomponentDidMount = () => {\r\n\t\tthis.props.changeBarColor(\"#4c88b7\");\r\n\t\tthis.props.selectCheckTripView();\r\n\t    this.props.stopGuidance();\r\n\t}\r\n\r\n\tpreventResize = () => {\r\n\t\tlet { width, height } = this.props.dom;\r\n\t\tlet ratio = width / height;\r\n\t\tlet newHeight = window.innerHeight * ratio;\r\n\t\tdocument.querySelector(\"meta[name=viewport]\")\r\n        .setAttribute(\"content\", `width=device-width, height=${newHeight}, user-scalable=no, initial-scale=1.0, maximum-scale=1.0`);\r\n    }\r\n\r\n\tonLeftMenuToggle = () => {\r\n\t\tlet isDrawerView = this.props.menu.isDrawerView;\r\n\t\tif (isDrawerView) return this.props.closeDrawerView();\r\n\t\tthis.props.selectDrawerView();\r\n\t}\r\n\r\n\tonNextStepButtonToggle = () => {\r\n\t\tlet { isBuildingRoute, isGuidance } = this.props.mode;\r\n\t\tif (isBuildingRoute) return this.props.startGuidance();\r\n\t\tif (isGuidance) return this.props.stopGuidance();\r\n\t\tif (!isGuidance && !isBuildingRoute) return this.props.buildRoute();\r\n\t}\r\n\r\n\tonSearchButtonToggle = () => {\r\n\t\tthis.props.stopGuidance();\r\n\t}\r\n\r\n\thandleInputChange = e => {\r\n\t\tlet { name, value } = e.target;\r\n\t\tthis.setState({\t[name]: value });\r\n\t}\r\n\r\n\tclearInput = item => {\r\n\t\tthis.setState({ [item]: \"\" });\r\n\t}\r\n\r\n\trender() {\r\n\t\tlet { start, end } = this.state;\r\n\t\tlet coverDisplay = this.props.menu.isDrawerView ? \"block\" : \"none\";\r\n\t\tlet searchButtonDisplay = (this.props.mode.isBuildingRoute) ? \"flex\" : \"none\";\r\n\t\tlet {color, text} = this.props.mode;\r\n\r\n\t\treturn (\r\n\t\t\t<div className=\"wrapper\">\r\n\t\t\t\t<div className=\"main\">\r\n\t\t\t\t\t<div className=\"header\">\r\n\t\t\t\t\t\t<HeaderMenu onLeftMenuToggle={this.onLeftMenuToggle} />\r\n\t\t\t\t\t\t<SearchMenu \r\n\t\t\t\t\t\t\thandleChange={this.handleInputChange} \r\n\t\t\t\t\t\t\tclearInput={this.clearInput}\r\n\t\t\t\t\t\t\tstart={start}\r\n\t\t\t\t\t\t\tend={end}\r\n\t\t\t\t\t\t\tpreventResize={this.preventResize}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<div className=\"directions-btn\" \r\n\t\t\t\t\t\t\tstyle={{display: searchButtonDisplay}} \r\n\t\t\t\t\t\t\tonClick={this.onSearchButtonToggle} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<Body start={start} end={end} />\r\n\t\t\t\t\t<NextStepButton \r\n\t\t\t\t\t\tcolor={color} \r\n\t\t\t\t\t\ttoggleButton={this.onNextStepButtonToggle}\r\n\t\t\t\t\t\ttext={text}\t/>\t\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"cover\" style={{display: coverDisplay}}>\r\n\t\t\t\t\t<div className=\"cover-background\" onClick={this.onLeftMenuToggle}  />\r\n\t\t\t\t\t<Drawer />\r\n\t\t\t\t</div>\r\n\t\t\t</div> \r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(CheckTrip);\r\n","import React, { Component } from 'react';\r\nimport { connect } from \"react-redux\";\r\nimport { Link } from 'react-router-dom';\r\nimport '../../styles/start.css';\r\n\r\nimport * as dom from \"../../ducks/dom\";\r\n\r\nconst mapDispatchToProps = {\r\n  changeBarColor: dom.changeBarColor\r\n};\r\n\r\nclass Start extends Component {\r\n\tcomponentDidMount = () => {\r\n\t\tthis.props.changeBarColor(\"#fbad19\");\r\n\t}\r\n\t\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"wrapper\">\r\n\t\t\t\t<div className=\"start-page-main\">\r\n\t\t\t\t\t<div className=\"logo-container\">\r\n\t\t\t\t\t\t<div className=\"logo-txt\">Bumpy</div>\r\n\t\t\t\t\t\t<div className=\"logo-txt\">Roads</div>\r\n\t\t\t\t\t\t<div className=\"logo-txt\">Informer</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<Link exact=\"true\" to=\"/map\" className=\"bottom-ruler-btn\">\r\n\t\t\t\t\tget started\r\n\t\t\t\t</Link>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default connect(null, mapDispatchToProps)(Start);\r\n","import React, {Component} from 'react';\nimport './App.css';\nimport { Route, HashRouter } from 'react-router-dom';\nimport { createBrowserHistory } from \"history\";\nimport { connect } from \"react-redux\";\nimport { db } from './Firebase/index';\n\nimport ReportBumps from './ReportBumps/index';\nimport SharedTrip from './SharedTrip/index';\nimport CheckTrip from './CheckTrip/index';\nimport Start from './Start/index';\n\nimport * as dom from \"../ducks/dom\";\nimport * as bumps from \"../ducks/bumps-map\";\n\nconst mapStateToProps = state => {\n    return {\n        dom: state.dom\n    };\n};\n\nconst mapDispatchToProps = {\n\tsetDimentions: dom.setDimentions,\n\taddBumps: bumps.addBumps,\n};\n\nconst customHistory = createBrowserHistory();\n\nclass App extends Component {\n\n\tcomponentDidMount = () => {\n\t\twindow.addEventListener('load', () => window.history.pushState({ noBackExitsApp: true }, ''));\n\n\t\twindow.addEventListener('popstate', (event) => {\n\t\t  if (!event.state || !event.state.noBackExitsApp) return;\n\t\t  window.history.pushState({ noBackExitsApp: true }, '')\n\t\t})\n\n\t\tthis.updateStatusbarColor();\n\t\tthis.retrieveBumpsFromDatabase();\n\n\t\tthis.props.setDimentions({ width: window.innerWidth, height: window.innerHeight })\n\n\t\t\n\t}\n\n\tcomponentDidUpdate = prevProps => {\n\t\tif (prevProps.dom.color !== this.props.dom.color) {\n\t\t\tthis.updateStatusbarColor();\n\t\t}\n\t}\n\n\tupdateStatusbarColor = () => {\n\t\tdocument.querySelector(\"meta[name=theme-color]\").setAttribute(\"content\", this.props.dom.color);\n\t}\n\n\tretrieveBumpsFromDatabase  = () => {\n\t\tdb.collection('bumpsmap').doc('bumps')\n\t\t.get()\n\t\t.then(doc => { \n\t\t\tif (doc.exists) this.props.addBumps(doc.data().bumps) \n\t\t})\n\t}\n\n\trender() {\n\t    return (\n\t\t    <HashRouter history={customHistory} >\n\t\t       \t<Route exact path=\"/\" component={Start} />\n\t\t\t\t<Route exact path=\"/map\" component={ReportBumps} />\n\t\t\t\t<Route exact path=\"/checktrip\" component={CheckTrip} />\n\t\t\t\t<Route path=\"/shared/:number\" component={SharedTrip} />\n  \t\t\t</HashRouter>\n\t    );\n\t}  \n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App);\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { HashRouter } from \"react-router-dom\";\n\nimport { Provider } from \"react-redux\";\nimport store from \"./store/store\";\n\nimport './index.css';\nimport App from './components/App';\nimport * as serviceWorker from './serviceWorker';\n\nserviceWorker.unregister();\n\nReactDOM.render(\n\t<Provider store={store}>\n\t\t<HashRouter>\n\t\t\t<App />\n\t\t</HashRouter>\n\t</Provider>, document.getElementById('root'));\n\nserviceWorker.register();\n"],"sourceRoot":""}