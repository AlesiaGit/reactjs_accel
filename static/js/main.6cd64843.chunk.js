(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{101:function(t,e,a){t.exports=a(182)},119:function(t,e,a){},120:function(t,e,a){},121:function(t,e,a){},181:function(t,e,a){},182:function(t,e,a){"use strict";a.r(e);var n=a(0),i=a.n(n),r=a(33),l=a.n(r),s=a(26),o=a(7),c=a(39),m="bumpyroads/selectedTrip/TRIP_SELECTED",p="bumpyroads/selectedTrip/NO_TRIPS_SELECTED",u=null;function d(t){return{type:m,data:t}}var g=a(22),h=a(10),f="bumpyroads/bumpTrip/ADD_BUMPS",v="bumpyroads/bumpTrip/UPDATE_LOCATION",b="bumpyroads/bumpTrip/RESET_TRIP",w="bumpyroads/bumpTrip/RESET_MOVE",E={path:[],currentLocation:{lat:0,lng:0,timestamp:0,speed:0},previousLocation:{},previousAcceleration:{x:0,y:0,z:0},zoom:16,angle:0,move:0,distance:0,bumps:[]};function y(t){return{type:v,data:t}}function O(){return{type:b}}var C=a(11),T="bumpyroads/menu/FAVORITIES_LIST_VIEW",j="bumpyroads/menu/SELECTED_TRIP_VIEW",M="bumpyroads/menu/DRAWER_VIEW",L="bumpyroads/menu/CLOSE_DRAWER_VIEW",S="bumpyroads/menu/BUMPS_MAP_VIEW",k="bumpyroads/menu/SHARE_VIEW",D="bumpyroads/menu/CLOSE_SHARE_VIEW",N="bumpyroads/menu/CHECK_TRIP_VIEW",R={isFavoritiesListView:!1,isSelectedTripView:!1,isDrawerView:!1,isBumpsMapView:!1,isShareView:!1,isCheckTripView:!1,title:"",iconleft:"",iconright:""},V=function(t,e){var a;return Object(h.a)({},R,(a={},Object(C.a)(a,e.menuitem,!0),Object(C.a)(a,"title",e.title),Object(C.a)(a,"iconleft",e.iconleft),Object(C.a)(a,"iconright",e.iconright),a))};function B(){return{type:j,menuitem:"isSelectedTripView",title:"Back to list",iconleft:"back-arrow",iconright:"share-icon"}}function A(){return{type:M,status:!0}}function z(){return{type:L,status:!1}}function x(){return{type:S,menuitem:"isBumpsMapView",title:"Report a bump",iconleft:"burger-icon",iconright:""}}function I(){return{type:N,menuitem:"isCheckTripView",title:"Check your trip",iconleft:"burger-icon",iconright:""}}var _="bumpyroads/mode/RECORDING",P="bumpyroads/mode/STOP_RECORDING",F="bumpyroads/mode/BUILDING_ROUTE",W="bumpyroads/mode/GUIDANCE",G="bumpyroads/mode/STOP_GUIDANCE",U={isRecording:!1,isBuildingRoute:!1,isGuidance:!1,color:"#757d75",text:"Start Recording"};var H="bumpyroads/favorities/ADD_TO_FAVORITIES",K="bumpyroads/favorities/DELETED_FROM_FAVORITIES",q=JSON.parse(localStorage.getItem("favorities"))||[];var Q="bumpyroads/dom/SET_DIMENTIONS",J="bumpyroads/dom/SET_RATIO",Z="bumpyroads/dom/CHANGE_BARCOLOR",X={width:0,height:0,ratio:1,color:"#fbad19"};function $(t){return{type:Q,dimentions:t}}function Y(t){return{type:J,ratio:t}}function tt(t){return{type:Z,color:t}}var et="bumpyroads/dom/ADD_BUMPS",at=[],nt=function(t,e){return[].concat(Object(g.a)(t),Object(g.a)(e.bumps.filter(function(e){return t.indexOf(e)<0})))};function it(t){return{type:et,bumps:t}}var rt=a(21),lt=a.n(rt),st=lt.a.initializeApp({apiKey:"AIzaSyBexhCuV6JNCsyakFOeBK7NmFb_oM_pgxo",authDomain:"bumpyroadsinformer.firebaseapp.com",databaseURL:"https://bumpyroadsinformer.firebaseio.com",projectId:"bumpyroadsinformer",storageBucket:"",messagingSenderId:"854546127925",appId:"1:854546127925:web:d3c2a81c7c4e9ba6"}).firestore(),ot="bumpyroads/stats/GET_STATS",ct="bumpyroads/stats/ADD_TO_STATS",mt={bumpsCount:0,distanceTotal:0,tripsCount:0},pt=st.collection("stats").doc("totals"),ut=st.collection("bumpsmap").doc("bumps");function dt(t){pt.get().then(function(e){e.exists&&(console.log(t,e.data()),function(t,e){var a=e.bumpsCount,n=e.distanceTotal,i=e.tripsCount;console.log(Object(h.a)({},t,{bumpsCount:a,distanceTotal:n,tripsCount:i})),Object(h.a)({},t,{bumpsCount:a,distanceTotal:n,tripsCount:i})}(t,e.data()))})}function gt(t,e){var a;(a=e.tripdata,new Promise(function(t,e){var n=0;a.bumps.forEach(function(t){return ut.update({bumps:lt.a.firestore.FieldValue.arrayUnion(t)}).then(function(){return n++}).catch(function(t){return e(new Error("Bumps are not updated in database"))})}),n===a.bumps.length&&t("success")})).then(function(){return new Promise(function(t,e){ut.get().then(function(e){e.exists&&t(e.data().bumps)}).catch(function(t){return e(new Error("Bumps are not updated in database"))})})}).then(function(t){return a=t.length,n=e.tripdata.distance,new Promise(function(t,e){pt.update({bumpsCount:a,distanceTotal:lt.a.firestore.FieldValue.increment(Math.round(n)),tripsCount:lt.a.firestore.FieldValue.increment(1)}).then(function(){return t("success")}).catch(function(t){return e(new Error("Statistics is not updated in db"))})});var a,n}).then(function(){return test=dt(t)})}var ht={selectedTrip:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case m:case p:return e.data;default:return t}},trip:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case f:return Object(h.a)({},t,{bumps:[].concat(Object(g.a)(t.bumps),[e.data.bumps]),previousAcceleration:e.data.previousAcceleration});case v:return Object(h.a)({},t,{previousLocation:t.currentLocation,currentLocation:e.data.currentLocation,path:e.data.path,angle:e.data.angle,move:e.data.move,distance:e.data.distance});case w:return Object(h.a)({},t,{move:0});case b:return Object(h.a)({},E);default:return t}},menu:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case T:case j:case S:case N:return V(t,e);case M:case L:return Object(h.a)({},t,{isDrawerView:e.status});case k:case D:return Object(h.a)({},t,{isShareView:e.status});default:return t}},mode:function(){var t,e,a,n,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case _:return Object(h.a)({},U,(t={},Object(C.a)(t,r.mode,r.on),Object(C.a)(t,"color",r.color),Object(C.a)(t,"text",r.text),t));case P:return Object(h.a)({},U);case F:return Object(h.a)({},U,(e={},Object(C.a)(e,r.mode,r.on),Object(C.a)(e,"text",r.text),e));case W:return Object(h.a)({},U,(a={},Object(C.a)(a,r.mode,r.on),Object(C.a)(a,"color",r.color),Object(C.a)(a,"text",r.text),a));case G:return Object(h.a)({},U,(n={},Object(C.a)(n,r.mode,r.on),Object(C.a)(n,"color",r.color),Object(C.a)(n,"text",r.text),n));default:return i}},favorities:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case H:return[].concat(Object(g.a)(t.slice(-4)),[e.data]);case K:return t.filter(function(t){return t.id!==e.id});default:return t}},dom:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case Q:return Object(h.a)({},t,{width:e.dimentions.width,height:e.dimentions.height});case J:return Object(h.a)({},t,{ratio:e.ratio});case Z:return Object(h.a)({},t,{color:e.color});default:return t}},bumps:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:at,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case et:return nt(t,e);default:return t}},stats:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mt,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case ot:return dt(t);case ct:return gt(t,e);default:return t}}},ft=Object(c.b)(ht),vt=Object(c.c)(ft),bt=(a(119),a(4)),wt=a(5),Et=a(8),yt=a(6),Ot=a(9),Ct=(a(120),a(28)),Tt=a(13),jt=(a(57),a(58),function(t){function e(){return Object(bt.a)(this,e),Object(Et.a)(this,Object(yt.a)(e).apply(this,arguments))}return Object(Ot.a)(e,t),Object(wt.a)(e,[{key:"render",value:function(){var t=this,e=this.props.menu,a=e.isFavoritiesListView,n=e.isSelectedTripView;return a||n?null:i.a.createElement("div",{className:"bottom-ruler-btn",style:{backgroundColor:this.props.color},onClick:function(){return t.props.toggleButton()}},this.props.text)}}]),e}(n.Component)),Mt=Object(o.b)(function(t){return{menu:t.menu}})(jt),Lt=function(t){function e(){return Object(bt.a)(this,e),Object(Et.a)(this,Object(yt.a)(e).apply(this,arguments))}return Object(Ot.a)(e,t),Object(wt.a)(e,[{key:"render",value:function(){var t=this;return i.a.createElement("div",{className:"header-menu"},i.a.createElement("div",{className:"header-left-menu"},i.a.createElement("div",{className:"header-menu-icon ".concat(this.props.menu.iconleft),onClick:function(){return t.props.onLeftMenuToggle()}}),i.a.createElement("div",{className:"page-title"},this.props.menu.title)),i.a.createElement("div",{className:"header-right-menu"},i.a.createElement("div",{className:"header-menu-icon ".concat(this.props.menu.iconright),onClick:function(){return t.props.onRightMenuToggle()}})))}}]),e}(n.Component),St=Object(o.b)(function(t){return{menu:t.menu}})(Lt),kt=function(t){function e(){return Object(bt.a)(this,e),Object(Et.a)(this,Object(yt.a)(e).apply(this,arguments))}return Object(Ot.a)(e,t),Object(wt.a)(e,[{key:"render",value:function(){var t=this,e=this.props.menu,a=e.isFavoritiesListView,n=e.isBumpsMapView,r=a||n?"flex":"none";return i.a.createElement("div",{className:"header-submenu",style:{display:r}},["Favorities List","Bumps Map"].map(function(e,a){return i.a.createElement("div",{className:"header-submenu-tab ".concat(t.props.markActiveTab(e)?"tab-active":""),onClick:function(){return t.props.onSubmenuTabSelect(e)},key:a},e)}))}}]),e}(n.Component),Dt=Object(o.b)(function(t){return{menu:t.menu}})(kt),Nt=(a(121),a(77),a(72)),Rt={selectTrip:d,selectTripView:B},Vt=function(t){function e(){return Object(bt.a)(this,e),Object(Et.a)(this,Object(yt.a)(e).apply(this,arguments))}return Object(Ot.a)(e,t),Object(wt.a)(e,[{key:"render",value:function(){var t=this,e=this.props.favorities;return e.length?i.a.createElement("div",{className:"fav-list"},e.map(function(e,a){return i.a.createElement("div",{className:"fav-item",onClick:function(){t.props.selectTrip(e),t.props.selectTripView()},key:a},i.a.createElement("div",{className:"fav-route"},"From: ",e.start),i.a.createElement("div",{className:"fav-route"},"To: ",e.end),i.a.createElement("div",{className:"fav-bumps-count"},e.bumps.length," bumps per ",e.distance?e.distance.toFixed(1):0," km"))})):null}}]),e}(n.Component),Bt=Object(o.b)(function(t){return{favorities:t.favorities,stats:t.stats}},Rt)(Vt),At=6371e3;function zt(t){return[" ","_"].forEach(function(e){t=t.split(e).map(function(t){return t.charAt(0).toUpperCase()+t.slice(1)}).join("")}),t}function xt(t){return t*Math.PI/180}function It(t,e,a,n){var i=xt(a-t),r=xt(n-e),l=Math.sin(i/2)*Math.sin(i/2)+Math.cos(xt(t))*Math.cos(xt(a))*Math.sin(r/2)*Math.sin(r/2);return 2*At*Math.atan2(Math.sqrt(l),Math.sqrt(1-l))}var _t={bumps:[{lat:53.9124539,lng:27.512511,timestamp:1568715501e3},{lat:53.9125773,lng:27.5116804,timestamp:1568715508e3},{lat:53.9126042,lng:27.511377,timestamp:1568715513e3},{lat:53.9126162,lng:27.5112736,timestamp:1568715514e3},{lat:53.912639,lng:27.5109944,timestamp:1568715517e3},{lat:53.912651,lng:27.5108786,timestamp:1568715518e3},{lat:53.9127355,lng:27.5103792,timestamp:1568715522e3},{lat:53.9127492,lng:27.5102292,timestamp:1568715523e3},{lat:53.9128456,lng:27.5090998,timestamp:1568715531e3},{lat:53.9129959,lng:27.5075463,timestamp:1568715545e3},{lat:53.913002,lng:27.5074602,timestamp:1568715546e3},{lat:53.9168225,lng:27.5025087,timestamp:1568715622e3},{lat:53.9169234,lng:27.5023963,timestamp:1568715623e3},{lat:53.9189409,lng:27.4998885,timestamp:1568715647e3},{lat:53.9190342,lng:27.4997759,timestamp:1568715648e3},{lat:53.9288212,lng:27.5113076,timestamp:1568715765e3}],path:[{lat:53.9127547,lng:27.5132219,timestamp:1568715307160},{lat:53.9123642,lng:27.5137623,timestamp:1568715418506},{lat:53.9126836,lng:27.5138263,timestamp:1568715421097},{lat:53.9127589,lng:27.5137944,timestamp:1568715422089},{lat:53.9127776,lng:27.513793,timestamp:1568715423e3},{lat:53.9127944,lng:27.5137906,timestamp:1568715424e3},{lat:53.9127978,lng:27.5137901,timestamp:1568715424536},{lat:53.9128056,lng:27.5138067,timestamp:1568715425e3},{lat:53.9128173,lng:27.5138293,timestamp:1568715426e3},{lat:53.9128315,lng:27.5138512,timestamp:1568715427e3},{lat:53.9128532,lng:27.5138725,timestamp:1568715428e3},{lat:53.9128786,lng:27.5138995,timestamp:1568715429e3},{lat:53.9129468,lng:27.5139571,timestamp:156871543e4},{lat:53.9129884,lng:27.5139643,timestamp:1568715431e3},{lat:53.9130318,lng:27.5139788,timestamp:1568715432e3},{lat:53.913072,lng:27.5139959,timestamp:1568715433e3},{lat:53.9131058,lng:27.5140267,timestamp:1568715434e3},{lat:53.9131208,lng:27.514045,timestamp:1568715435e3},{lat:53.9131383,lng:27.5140704,timestamp:1568715436e3},{lat:53.9131524,lng:27.514097,timestamp:1568715437e3},{lat:53.9131611,lng:27.5141165,timestamp:1568715438e3},{lat:53.9131659,lng:27.5141308,timestamp:1568715439e3},{lat:53.9131681,lng:27.514142,timestamp:156871544e4},{lat:53.9131667,lng:27.5141514,timestamp:1568715441e3},{lat:53.9131642,lng:27.5141578,timestamp:1568715442e3},{lat:53.9131613,lng:27.5141625,timestamp:1568715443e3},{lat:53.913159,lng:27.5141655,timestamp:1568715444e3},{lat:53.9131575,lng:27.514168,timestamp:1568715445e3},{lat:53.9131572,lng:27.51417,timestamp:1568715446e3},{lat:53.9131575,lng:27.5141705,timestamp:1568715447e3},{lat:53.9131581,lng:27.5141716,timestamp:1568715448e3},{lat:53.9131592,lng:27.514173,timestamp:1568715449e3},{lat:53.9131592,lng:27.5141818,timestamp:156871545e4},{lat:53.9131568,lng:27.5141995,timestamp:1568715451e3},{lat:53.9131496,lng:27.5142228,timestamp:1568715452e3},{lat:53.9131347,lng:27.5142358,timestamp:1568715453e3},{lat:53.9130698,lng:27.5142961,timestamp:1568715454e3},{lat:53.9130066,lng:27.5143183,timestamp:1568715455e3},{lat:53.9129493,lng:27.5143536,timestamp:1568715456e3},{lat:53.9128973,lng:27.5143964,timestamp:1568715457e3},{lat:53.912846,lng:27.5144259,timestamp:1568715458e3},{lat:53.9127889,lng:27.5144678,timestamp:1568715459e3},{lat:53.9127282,lng:27.5144884,timestamp:156871546e4},{lat:53.9126742,lng:27.5145111,timestamp:1568715461e3},{lat:53.9126328,lng:27.5145383,timestamp:1568715462e3},{lat:53.9125913,lng:27.5145542,timestamp:1568715463e3},{lat:53.9125718,lng:27.5145518,timestamp:1568715464e3},{lat:53.912551,lng:27.5145411,timestamp:1568715465e3},{lat:53.9125288,lng:27.5145313,timestamp:1568715466e3},{lat:53.9125081,lng:27.5145228,timestamp:1568715467e3},{lat:53.9124867,lng:27.5145063,timestamp:1568715468e3},{lat:53.9124646,lng:27.5144812,timestamp:1568715469e3},{lat:53.9124448,lng:27.5144519,timestamp:156871547e4},{lat:53.9124277,lng:27.5144187,timestamp:1568715471e3},{lat:53.9123836,lng:27.5143022,timestamp:1568715472e3},{lat:53.9123663,lng:27.5142356,timestamp:1568715473e3},{lat:53.9123507,lng:27.5141658,timestamp:1568715474e3},{lat:53.9123367,lng:27.5140925,timestamp:1568715475e3},{lat:53.9123223,lng:27.5140232,timestamp:1568715476e3},{lat:53.9123211,lng:27.5139341,timestamp:1568715477e3},{lat:53.9123199,lng:27.5138575,timestamp:1568715478e3},{lat:53.9123049,lng:27.5137873,timestamp:1568715479e3},{lat:53.9122978,lng:27.5137214,timestamp:156871548e4},{lat:53.9123002,lng:27.5136472,timestamp:1568715481e3},{lat:53.9123088,lng:27.5135671,timestamp:1568715482e3},{lat:53.912316,lng:27.5134967,timestamp:1568715483e3},{lat:53.9123251,lng:27.513436,timestamp:1568715484e3},{lat:53.9123315,lng:27.5134045,timestamp:1568715485e3},{lat:53.9123413,lng:27.5133739,timestamp:1568715486e3},{lat:53.912351,lng:27.5133443,timestamp:1568715487e3},{lat:53.9123567,lng:27.5133221,timestamp:1568715488e3},{lat:53.9123613,lng:27.5133011,timestamp:1568715489e3},{lat:53.9123603,lng:27.5132813,timestamp:156871549e4},{lat:53.9123602,lng:27.5132617,timestamp:1568715491e3},{lat:53.9123619,lng:27.5132429,timestamp:1568715492e3},{lat:53.9123691,lng:27.5132212,timestamp:1568715493e3},{lat:53.9123646,lng:27.5131964,timestamp:1568715494e3},{lat:53.9123678,lng:27.513162,timestamp:1568715495e3},{lat:53.9123941,lng:27.5130193,timestamp:1568715496e3},{lat:53.9124116,lng:27.5129161,timestamp:1568715497e3},{lat:53.9124265,lng:27.512829,timestamp:1568715498e3},{lat:53.9124436,lng:27.5127314,timestamp:1568715499e3},{lat:53.9124482,lng:27.5126313,timestamp:15687155e5},{lat:53.9124539,lng:27.512511,timestamp:1568715501e3},{lat:53.9124508,lng:27.5123913,timestamp:1568715502e3},{lat:53.9124691,lng:27.5122775,timestamp:1568715503e3},{lat:53.9125183,lng:27.5121532,timestamp:1568715504e3},{lat:53.912542,lng:27.5120241,timestamp:1568715505e3},{lat:53.9125559,lng:27.5119099,timestamp:1568715506e3},{lat:53.9125653,lng:27.5118058,timestamp:1568715507e3},{lat:53.9125773,lng:27.5116804,timestamp:1568715508e3},{lat:53.912592,lng:27.5116109,timestamp:1568715509e3},{lat:53.9125865,lng:27.5115747,timestamp:156871551e4},{lat:53.9125827,lng:27.5115401,timestamp:1568715511e3},{lat:53.9125835,lng:27.5115011,timestamp:1568715512e3},{lat:53.9126042,lng:27.511377,timestamp:1568715513e3},{lat:53.9126162,lng:27.5112736,timestamp:1568715514e3},{lat:53.9126231,lng:27.5111879,timestamp:1568715515e3},{lat:53.9126274,lng:27.5110686,timestamp:1568715516e3},{lat:53.912639,lng:27.5109944,timestamp:1568715517e3},{lat:53.912651,lng:27.5108786,timestamp:1568715518e3},{lat:53.9126653,lng:27.5107715,timestamp:1568715519e3},{lat:53.9126877,lng:27.5106367,timestamp:156871552e4},{lat:53.9127122,lng:27.5105037,timestamp:1568715521e3},{lat:53.9127355,lng:27.5103792,timestamp:1568715522e3},{lat:53.9127492,lng:27.5102292,timestamp:1568715523e3},{lat:53.9127498,lng:27.5100587,timestamp:1568715524e3},{lat:53.912773,lng:27.5099124,timestamp:1568715525e3},{lat:53.9127793,lng:27.5097796,timestamp:1568715526e3},{lat:53.9127917,lng:27.509649,timestamp:1568715527e3},{lat:53.9127965,lng:27.509521,timestamp:1568715528e3},{lat:53.9128105,lng:27.5093899,timestamp:1568715529e3},{lat:53.9128287,lng:27.5092516,timestamp:156871553e4},{lat:53.9128456,lng:27.5090998,timestamp:1568715531e3},{lat:53.9128679,lng:27.5089514,timestamp:1568715532e3},{lat:53.9128787,lng:27.5088316,timestamp:1568715533e3},{lat:53.9128901,lng:27.5087123,timestamp:1568715534e3},{lat:53.9129001,lng:27.5085945,timestamp:1568715535e3},{lat:53.9129108,lng:27.5084831,timestamp:1568715536e3},{lat:53.9129268,lng:27.5083576,timestamp:1568715537e3},{lat:53.9129389,lng:27.5082434,timestamp:1568715538e3},{lat:53.9129387,lng:27.5081341,timestamp:1568715539e3},{lat:53.9129479,lng:27.5080315,timestamp:156871554e4},{lat:53.9129575,lng:27.5079307,timestamp:1568715541e3},{lat:53.9129652,lng:27.5078186,timestamp:1568715542e3},{lat:53.9129843,lng:27.5077271,timestamp:1568715543e3},{lat:53.9129966,lng:27.5076338,timestamp:1568715544e3},{lat:53.9129959,lng:27.5075463,timestamp:1568715545e3},{lat:53.913002,lng:27.5074602,timestamp:1568715546e3},{lat:53.9130173,lng:27.5073811,timestamp:1568715547e3},{lat:53.9130383,lng:27.5072937,timestamp:1568715548e3},{lat:53.9130567,lng:27.5072143,timestamp:1568715549e3},{lat:53.913083,lng:27.5071485,timestamp:156871555e4},{lat:53.913093,lng:27.507087,timestamp:1568715551e3},{lat:53.9130916,lng:27.5070857,timestamp:1568715552e3},{lat:53.9130899,lng:27.5070858,timestamp:1568715553e3},{lat:53.9130896,lng:27.5070857,timestamp:1568715554e3},{lat:53.9130897,lng:27.5070857,timestamp:1568715555e3},{lat:53.9130905,lng:27.5070859,timestamp:1568715556e3},{lat:53.9130909,lng:27.5070867,timestamp:1568715557e3},{lat:53.9130908,lng:27.5070882,timestamp:1568715558e3},{lat:53.9130905,lng:27.5070896,timestamp:1568715559e3},{lat:53.9130899,lng:27.5070911,timestamp:156871556e4},{lat:53.913089,lng:27.5070925,timestamp:1568715561e3},{lat:53.913088,lng:27.5070936,timestamp:1568715562e3},{lat:53.9130872,lng:27.5070945,timestamp:1568715563e3},{lat:53.9130871,lng:27.5070893,timestamp:1568715564e3},{lat:53.9130885,lng:27.5070752,timestamp:1568715565e3},{lat:53.9130929,lng:27.5070381,timestamp:1568715566e3},{lat:53.9130976,lng:27.5069853,timestamp:1568715567e3},{lat:53.9131116,lng:27.5068317,timestamp:1568715568e3},{lat:53.913119,lng:27.5067697,timestamp:1568715569e3},{lat:53.9131235,lng:27.5067421,timestamp:156871557e4},{lat:53.9131284,lng:27.5067122,timestamp:1568715571e3},{lat:53.9131359,lng:27.5066804,timestamp:1568715572e3},{lat:53.9131434,lng:27.506647,timestamp:1568715573e3},{lat:53.9132027,lng:27.5065582,timestamp:1568715574e3},{lat:53.9132613,lng:27.5065371,timestamp:1568715575e3},{lat:53.9133156,lng:27.5065274,timestamp:1568715576e3},{lat:53.9133777,lng:27.5065052,timestamp:1568715577e3},{lat:53.9134362,lng:27.5064756,timestamp:1568715578e3},{lat:53.9135063,lng:27.5064316,timestamp:1568715579e3},{lat:53.913574,lng:27.5063642,timestamp:156871558e4},{lat:53.9136442,lng:27.5062901,timestamp:1568715581e3},{lat:53.9137168,lng:27.5062064,timestamp:1568715582e3},{lat:53.9137891,lng:27.5061211,timestamp:1568715583e3},{lat:53.9138637,lng:27.506029,timestamp:1568715584e3},{lat:53.91394,lng:27.5059386,timestamp:1568715585e3},{lat:53.9140164,lng:27.5058487,timestamp:1568715586e3},{lat:53.9140917,lng:27.5057541,timestamp:1568715587e3},{lat:53.9141717,lng:27.5056567,timestamp:1568715588e3},{lat:53.9142558,lng:27.5055521,timestamp:1568715589e3},{lat:53.9143377,lng:27.5054491,timestamp:156871559e4},{lat:53.9144238,lng:27.5053439,timestamp:1568715591e3},{lat:53.9145105,lng:27.5052433,timestamp:1568715592e3},{lat:53.9145971,lng:27.5051469,timestamp:1568715593e3},{lat:53.9146804,lng:27.5050504,timestamp:1568715594e3},{lat:53.9147642,lng:27.5049565,timestamp:1568715595e3},{lat:53.914848,lng:27.5048529,timestamp:1568715596e3},{lat:53.9149301,lng:27.5047492,timestamp:1568715597e3},{lat:53.9150182,lng:27.5046491,timestamp:1568715598e3},{lat:53.9151043,lng:27.5045459,timestamp:1568715599e3},{lat:53.9151872,lng:27.5044467,timestamp:15687156e5},{lat:53.9152618,lng:27.5043626,timestamp:1568715601e3},{lat:53.9153219,lng:27.5042937,timestamp:1568715602e3},{lat:53.9153761,lng:27.5042289,timestamp:1568715603e3},{lat:53.9154134,lng:27.5041847,timestamp:1568715604e3},{lat:53.9154339,lng:27.5041479,timestamp:1568715605e3},{lat:53.9154778,lng:27.504104,timestamp:1568715606e3},{lat:53.9155251,lng:27.5040491,timestamp:1568715607e3},{lat:53.9155767,lng:27.503992,timestamp:1568715608e3},{lat:53.9156372,lng:27.5039149,timestamp:1568715609e3},{lat:53.9157054,lng:27.5038348,timestamp:156871561e4},{lat:53.9157837,lng:27.5037342,timestamp:1568715611e3},{lat:53.9158705,lng:27.5036251,timestamp:1568715612e3},{lat:53.9159711,lng:27.5035094,timestamp:1568715613e3},{lat:53.916064,lng:27.5033928,timestamp:1568715614e3},{lat:53.9161542,lng:27.5032777,timestamp:1568715615e3},{lat:53.9162539,lng:27.5031717,timestamp:1568715616e3},{lat:53.9163491,lng:27.5030506,timestamp:1568715617e3},{lat:53.9164396,lng:27.5029424,timestamp:1568715618e3},{lat:53.9165305,lng:27.5028333,timestamp:1568715619e3},{lat:53.9166238,lng:27.5027261,timestamp:156871562e4},{lat:53.9167266,lng:27.5026161,timestamp:1568715621e3},{lat:53.9168225,lng:27.5025087,timestamp:1568715622e3},{lat:53.9169234,lng:27.5023963,timestamp:1568715623e3},{lat:53.9170086,lng:27.5022913,timestamp:1568715624e3},{lat:53.9170898,lng:27.5021755,timestamp:1568715625e3},{lat:53.9171876,lng:27.5020552,timestamp:1568715626e3},{lat:53.9172753,lng:27.50195,timestamp:1568715627e3},{lat:53.91735,lng:27.5018546,timestamp:1568715628e3},{lat:53.9174216,lng:27.5017632,timestamp:1568715629e3},{lat:53.917502,lng:27.5016664,timestamp:156871563e4},{lat:53.9175737,lng:27.5015765,timestamp:1568715631e3},{lat:53.9176488,lng:27.5014816,timestamp:1568715632e3},{lat:53.917723,lng:27.5013942,timestamp:1568715633e3},{lat:53.9177973,lng:27.5013075,timestamp:1568715634e3},{lat:53.917884,lng:27.501201,timestamp:1568715635e3},{lat:53.9179742,lng:27.5010938,timestamp:1568715636e3},{lat:53.9180548,lng:27.5009907,timestamp:1568715637e3},{lat:53.9181365,lng:27.5008813,timestamp:1568715638e3},{lat:53.9182219,lng:27.5007734,timestamp:1568715639e3},{lat:53.9183066,lng:27.5006668,timestamp:156871564e4},{lat:53.9183914,lng:27.5005641,timestamp:1568715641e3},{lat:53.9184802,lng:27.5004548,timestamp:1568715642e3},{lat:53.9185667,lng:27.5003508,timestamp:1568715643e3},{lat:53.9186554,lng:27.5002338,timestamp:1568715644e3},{lat:53.9187493,lng:27.5001095,timestamp:1568715645e3},{lat:53.9188462,lng:27.5000039,timestamp:1568715646e3},{lat:53.9189409,lng:27.4998885,timestamp:1568715647e3},{lat:53.9190342,lng:27.4997759,timestamp:1568715648e3},{lat:53.9191312,lng:27.4996647,timestamp:1568715649e3},{lat:53.9192134,lng:27.4995483,timestamp:156871565e4},{lat:53.9193034,lng:27.4994397,timestamp:1568715651e3},{lat:53.9193974,lng:27.4993567,timestamp:1568715652e3},{lat:53.9194996,lng:27.4992646,timestamp:1568715653e3},{lat:53.919596,lng:27.499164,timestamp:1568715654e3},{lat:53.9196972,lng:27.4990662,timestamp:1568715655e3},{lat:53.9197889,lng:27.4989686,timestamp:1568715656e3},{lat:53.9198834,lng:27.4988807,timestamp:1568715657e3},{lat:53.919957,lng:27.4987997,timestamp:1568715658e3},{lat:53.9200142,lng:27.4987315,timestamp:1568715659e3},{lat:53.9200677,lng:27.4987091,timestamp:156871566e4},{lat:53.920111,lng:27.4987194,timestamp:1568715661e3},{lat:53.920142,lng:27.4987593,timestamp:1568715662e3},{lat:53.9201927,lng:27.4988212,timestamp:1568715663e3},{lat:53.9202588,lng:27.4988839,timestamp:1568715664e3},{lat:53.9203183,lng:27.498953,timestamp:1568715665e3},{lat:53.9203823,lng:27.4990269,timestamp:1568715666e3},{lat:53.9204308,lng:27.4990869,timestamp:1568715667e3},{lat:53.9204797,lng:27.4991507,timestamp:1568715668e3},{lat:53.9205223,lng:27.4992008,timestamp:1568715669e3},{lat:53.9205368,lng:27.499224,timestamp:156871567e4},{lat:53.9205552,lng:27.4992449,timestamp:1568715671e3},{lat:53.9205607,lng:27.4992567,timestamp:1568715672e3},{lat:53.9205632,lng:27.4992657,timestamp:1568715673e3},{lat:53.9205637,lng:27.4992708,timestamp:1568715674e3},{lat:53.9205632,lng:27.4992794,timestamp:1568715675e3},{lat:53.9205631,lng:27.4992871,timestamp:1568715676e3},{lat:53.9205618,lng:27.4992936,timestamp:1568715677e3},{lat:53.9205609,lng:27.4993018,timestamp:1568715678e3},{lat:53.9205616,lng:27.4993099,timestamp:1568715679e3},{lat:53.9205591,lng:27.499318,timestamp:156871568e4},{lat:53.9205574,lng:27.4993274,timestamp:1568715681e3},{lat:53.9205547,lng:27.4993365,timestamp:1568715682e3},{lat:53.920553,lng:27.4993457,timestamp:1568715683e3},{lat:53.9205521,lng:27.4993544,timestamp:1568715684e3},{lat:53.9205499,lng:27.4993593,timestamp:1568715685e3},{lat:53.9205486,lng:27.4993646,timestamp:1568715686e3},{lat:53.9205471,lng:27.4993684,timestamp:1568715687e3},{lat:53.9205446,lng:27.4993719,timestamp:1568715688e3},{lat:53.9205456,lng:27.4993792,timestamp:1568715689e3},{lat:53.9205862,lng:27.4994442,timestamp:156871569e4},{lat:53.9206247,lng:27.4994938,timestamp:1568715691e3},{lat:53.9206958,lng:27.499581,timestamp:1568715692e3},{lat:53.9207588,lng:27.4996555,timestamp:1568715693e3},{lat:53.9208283,lng:27.4997206,timestamp:1568715694e3},{lat:53.9209169,lng:27.4998028,timestamp:1568715695e3},{lat:53.9210127,lng:27.4998985,timestamp:1568715696e3},{lat:53.9211086,lng:27.5000164,timestamp:1568715697e3},{lat:53.9212179,lng:27.5001504,timestamp:1568715698e3},{lat:53.9213274,lng:27.5002827,timestamp:1568715699e3},{lat:53.9214611,lng:27.5004283,timestamp:15687157e5},{lat:53.921587,lng:27.5005576,timestamp:1568715701e3},{lat:53.9217232,lng:27.5007037,timestamp:1568715702e3},{lat:53.9218674,lng:27.5008557,timestamp:1568715703e3},{lat:53.9220032,lng:27.5009885,timestamp:1568715704e3},{lat:53.9221427,lng:27.5011446,timestamp:1568715705e3},{lat:53.9222775,lng:27.5013102,timestamp:1568715706e3},{lat:53.9224117,lng:27.5014719,timestamp:1568715707e3},{lat:53.9225472,lng:27.5016296,timestamp:1568715708e3},{lat:53.9226845,lng:27.5017878,timestamp:1568715709e3},{lat:53.92282,lng:27.5019671,timestamp:156871571e4},{lat:53.9229527,lng:27.5021142,timestamp:1568715711e3},{lat:53.9230823,lng:27.5022681,timestamp:1568715712e3},{lat:53.923222,lng:27.5024286,timestamp:1568715713e3},{lat:53.9233544,lng:27.5025815,timestamp:1568715714e3},{lat:53.9234796,lng:27.5027395,timestamp:1568715715e3},{lat:53.9236087,lng:27.5028882,timestamp:1568715716e3},{lat:53.9237362,lng:27.5030528,timestamp:1568715717e3},{lat:53.9238731,lng:27.5031918,timestamp:1568715718e3},{lat:53.9240074,lng:27.5033591,timestamp:1568715719e3},{lat:53.9241339,lng:27.5035306,timestamp:156871572e4},{lat:53.9242651,lng:27.5037,timestamp:1568715721e3},{lat:53.9243942,lng:27.5038568,timestamp:1568715722e3},{lat:53.9245365,lng:27.5040031,timestamp:1568715723e3},{lat:53.9246725,lng:27.5041519,timestamp:1568715724e3},{lat:53.9248046,lng:27.5043166,timestamp:1568715725e3},{lat:53.92494,lng:27.5044686,timestamp:1568715726e3},{lat:53.9250739,lng:27.5046155,timestamp:1568715727e3},{lat:53.9252069,lng:27.504777,timestamp:1568715728e3},{lat:53.9253395,lng:27.5049331,timestamp:1568715729e3},{lat:53.9254821,lng:27.5050815,timestamp:156871573e4},{lat:53.9256201,lng:27.5052384,timestamp:1568715731e3},{lat:53.9257613,lng:27.5053854,timestamp:1568715732e3},{lat:53.9258997,lng:27.5055485,timestamp:1568715733e3},{lat:53.9260329,lng:27.5057194,timestamp:1568715734e3},{lat:53.9261646,lng:27.5058808,timestamp:1568715735e3},{lat:53.9263097,lng:27.5060619,timestamp:1568715736e3},{lat:53.9264431,lng:27.506223,timestamp:1568715737e3},{lat:53.9265662,lng:27.5063861,timestamp:1568715738e3},{lat:53.9266942,lng:27.5065485,timestamp:1568715739e3},{lat:53.9268158,lng:27.5066978,timestamp:156871574e4},{lat:53.9269398,lng:27.5068526,timestamp:1568715741e3},{lat:53.9270555,lng:27.5069699,timestamp:1568715742e3},{lat:53.9271693,lng:27.5071188,timestamp:1568715743e3},{lat:53.9272731,lng:27.5072443,timestamp:1568715744e3},{lat:53.9273817,lng:27.5073929,timestamp:1568715745e3},{lat:53.9274866,lng:27.5075404,timestamp:1568715746e3},{lat:53.9275809,lng:27.5076848,timestamp:1568715747e3},{lat:53.9276723,lng:27.507825,timestamp:1568715748e3},{lat:53.9277477,lng:27.5079589,timestamp:1568715749e3},{lat:53.9278272,lng:27.5080861,timestamp:156871575e4},{lat:53.9279113,lng:27.5082217,timestamp:1568715751e3},{lat:53.9279962,lng:27.5083721,timestamp:1568715752e3},{lat:53.9280865,lng:27.5085644,timestamp:1568715753e3},{lat:53.92818,lng:27.5087646,timestamp:1568715754e3},{lat:53.9282795,lng:27.50899,timestamp:1568715755e3},{lat:53.9283636,lng:27.5092358,timestamp:1568715756e3},{lat:53.9284347,lng:27.5094944,timestamp:1568715757e3},{lat:53.9285046,lng:27.509749,timestamp:1568715758e3},{lat:53.9285728,lng:27.5100076,timestamp:1568715759e3},{lat:53.9286385,lng:27.51026,timestamp:156871576e4},{lat:53.9286958,lng:27.5104925,timestamp:1568715761e3},{lat:53.9287511,lng:27.5107135,timestamp:1568715762e3},{lat:53.9287936,lng:27.5109266,timestamp:1568715763e3},{lat:53.9288213,lng:27.5111264,timestamp:1568715764e3},{lat:53.9288212,lng:27.5113076,timestamp:1568715765e3},{lat:53.9288024,lng:27.5114804,timestamp:1568715766e3},{lat:53.9287767,lng:27.5116495,timestamp:1568715767e3},{lat:53.9287384,lng:27.5118092,timestamp:1568715768e3},{lat:53.9286981,lng:27.5120161,timestamp:1568715769e3},{lat:53.9286668,lng:27.512233,timestamp:156871577e4}]},Pt=[],Ft=[];var Wt,Gt={selectTrip:d,addToFavorities:function(t){return{type:H,data:Object(h.a)({},t,{id:"f".concat((~~(1e8*Math.random())).toString(16))})}},selectTripView:B,addTripBumps:function(t){return{type:f,data:t}},updateLocation:y,resetTrip:O,resetMove:function(){return{type:w}},setDimentions:$,setRatio:Y,addBumps:it,addToStats:function(t){return{type:ct,tripdata:t}}},Ut=function(t){function e(t){var a;return Object(bt.a)(this,e),(a=Object(Et.a)(this,Object(yt.a)(e).call(this,t))).componentDidMount=function(){window.addEventListener("resize",a.updateWindowDimensions)},a.componentDidUpdate=function(t,e){t.mode.isRecording!==a.props.mode.isRecording&&(!0===a.props.mode.isRecording?a.startRecording():a.stopRecording()),t.menu.isShareView!==a.props.menu.isShareView&&!0===a.props.menu.isShareView&&a.saveSharedTripToDatabase(),t.favorities!==a.props.favorities&&localStorage.setItem("favorities",JSON.stringify(a.props.favorities))},a.componentWillUnmount=function(){window.removeEventListener("resize",a.updateWindowDimensions)},a.updateWindowDimensions=function(){a.props.setDimentions({width:window.innerWidth,height:window.innerHeight}),a.props.setRatio({ratio:window.innerWidth/window.innerHeight})},a.startRecording=function(){a.props.resetTrip(),function(t){for(var e=_t.path[1].timestamp,a=1;a<_t.path.length;a++)!function(a){var n={coords:{latitude:_t.path[a].lat,longitude:_t.path[a].lng},timestamp:_t.path[a].timestamp};Pt[a]=setTimeout(function(){return t(n)},(_t.path[a].timestamp-e)/5)}(a)}(a.updateLocationData),function(t){for(var e=_t.path[1].timestamp,a=1;a<_t.bumps.length;a++)!function(a){Ft[a]=setTimeout(function(){return t({bumps:_t.bumps[a],previousAcceleration:{}})},(_t.bumps[a].timestamp-e)/5)}(a)}(a.props.addTripBumps)},a.err=function(){console.log("error")},a.updateArrayIfPositionChanged=function(t,e){return 0!==t.length&&function(t,e){for(var a in t)if(!e.hasOwnProperty(a)||t[a]!==e[a])return!1;return!0}(t[t.length-1],e)?t:[].concat(Object(g.a)(t),[e])},a.updateAccelerationData=function(t){var e=t.acceleration,n=e.x,i=e.y,r=e.z,l=a.props.trip,s=l.previousAcceleration,o=l.bumps,c=a.props.trip.currentLocation,m=c.lat,p=c.lng;c.timestamp;if(null!==n&&null!==i&&null!==r){var u=n-s.x,d=i-s.y,g=r-s.z;Math.pow(u*u+d*d+g*g,1/3)>2.829226039&&(a.props.addTripBumps({bumps:a.updateArrayIfPositionChanged(o,{lat:m,lng:p}),previousAcceleration:{x:n,y:i,z:r}}),a.setState({cover:!0}),Wt=setTimeout(a.animateBump,800))}},a.animateBump=function(){a.setState({cover:!1}),clearTimeout(Wt)},a.updateSpeedValue=function(t){var e=a.props.trip.currentLocation,n=t.coords.latitude,i=t.coords.longitude,r=t.timestamp,l=a.props.trip.path.length?It(e.lat,e.lng,n,i):0,s=Math.abs(e.timestamp-r)/1e3;return!l/s?0:l/s*3600/1e3},a.updateAngleValue=function(t){var e=a.props.trip.currentLocation,n=t.coords.latitude,i=t.coords.longitude,r=function(t,e,a,n){var i=n-e,r=Math.sin(i)*Math.cos(a),l=Math.cos(t)*Math.sin(a)-Math.sin(t)*Math.cos(a)*Math.cos(i),s=Math.atan2(r,l);return s=360-(s=(360+(s*=180/Math.PI))%360)}(e.lat,e.lng,n,i);return Math.abs(r-a.props.trip.angle)>22?r:a.props.trip.angle},a.updateLocationData=function(t){var e=a.props.trip.currentLocation,n=a.props.trip,i=n.move,r=n.path,l=n.distance,s=t.coords.latitude,o=t.coords.longitude,c=t.timestamp,m=r.length?It(e.lat,e.lng,s,o):0;i>5&&a.props.resetMove(),a.props.updateLocation({currentLocation:{lat:s,lng:o,speed:a.updateSpeedValue(t),timestamp:c},path:a.updateArrayIfPositionChanged(r,{lat:s,lng:o}),angle:a.updateAngleValue(t),move:i+m,distance:l+m/1e3})},a.convertToReadableAddress=function(t){return new Promise(function(e,n){for(var i=a.props.google.maps,r=[],l=new i.Geocoder,s=0;s<t.length;s++)l.geocode({location:t[s]},function(a,i){"OK"!==i&&n(new Error("Geocoder failed due to: "+i)),a[0]||n(new Error("No results")),r.push(a[0].formatted_address),t.length===r.length&&e({start:r[0],end:r[1]})})})},a.stopRecording=function(){a.props.addToStats(a.props.trip),a.updateFavoritiesData(),Pt.forEach(function(t){return clearTimeout(t)}),Ft.forEach(function(t){return clearTimeout(t)})},a.updateFavoritiesData=function(){var t=a.props.trip,e=t.bumps,n=t.path,i=t.distance;if(n.length){var r=function(t){var e=t.ne,a=t.sw;return{lat:a.lat+(e.lat-a.lat)/2,lng:a.lng+(e.lng-a.lng)/2}}(function(t){var e,a,n,i;return t.forEach(function(t){e=e>t.lat?e:t.lat,a=a<t.lat?a:t.lat,n=n>t.lng?n:t.lng,i=i<t.lng?i:t.lng}),{ne:{lat:e,lng:n},sw:{lat:a,lng:i}}}(n)),l=function(t){return Math.round(14-Math.log(t/2e3)/Math.LN2)}(1e3*i),s=[n[0],n[n.length-1]];a.convertToReadableAddress(s).then(function(t){var s=t.start,o=t.end;a.props.addToFavorities({start:s,end:o,path:n,zoom:l,center:r,bumps:e,distance:i})})}},a.onZoomChanged=function(t,e,a){},a.saveSharedTripToDatabase=function(){st.collection("shared").doc(a.props.selectedTrip.id).set({tripdata:a.props.selectedTrip}).catch(function(t){return console.log(t)})},a.saveBumpsToDatabase=function(){return new Promise(function(t,e){var n=st.collection("bumpsmap").doc("bumps"),i=0;a.props.trip.bumps.forEach(function(t){return n.update({bumps:lt.a.firestore.FieldValue.arrayUnion(t)}).then(function(){return i++}).catch(function(t){return e(new Error("Bumps are not updated in database"))})}),i===a.props.trip.bumps.length&&t("success")})},a.getDatabaseBumpsCount=function(){return st.collection("bumpsmap").doc("bumps").get().then(function(t){if(t.exists)return t.data().bumps.length})},a.updateStatsInDatabase=function(t){st.collection("stats").doc("totals").update({bumpsCount:t,distanceTotal:lt.a.firestore.FieldValue.increment(Math.round(a.props.trip.distance)),tripsCount:lt.a.firestore.FieldValue.increment(1)})},a.state={cover:!1},a.mymap=i.a.createRef(),a}return Object(Ot.a)(e,t),Object(wt.a)(e,[{key:"render",value:function(){var t=this.props,e=t.google,a=t.start,n=t.end,r=this.props.menu,l=r.isFavoritiesListView,s=r.isShareView,o=r.isSelectedTripView,c=r.isCheckTripView;return l?i.a.createElement(Bt,null):s||o?i.a.createElement(ae,{google:e}):c?i.a.createElement("div",{className:"map"},i.a.createElement(Jt,{centerAroundCurrentLocation:!0,google:e,updateLocationData:this.updateLocationData,start:a,end:n},i.a.createElement($t,null))):i.a.createElement("div",{className:"map"},i.a.createElement(Jt,{centerAroundCurrentLocation:!0,google:e,updateLocationData:this.updateLocationData},i.a.createElement($t,null),i.a.createElement(Nt.Polyline,{path:this.props.trip.path,strokeColor:"#4D8FAC",strokeOpacity:.8,strokeWeight:4})),i.a.createElement("div",{className:"map-bump-cover",style:{display:this.state.cover?"flex":"none"}}))}}]),e}(n.Component),Ht=Object(Nt.GoogleApiWrapper)({apiKey:"AIzaSyBE7mLpixeaO78BgnobMQ_yawg5ZBCX8f0"})(Ut),Kt=Object(o.b)(function(t){return{selectedTrip:t.selectedTrip,menu:t.menu,mode:t.mode,favorities:t.favorities,trip:t.trip,bumpsmap:t.bumpsmap}},Gt)(Ht),qt={updateLocation:y,resetTrip:O},Qt=function(t){function e(t){var a;Object(bt.a)(this,e),(a=Object(Et.a)(this,Object(yt.a)(e).call(this,t))).componentDidMount=function(){a.props.centerAroundCurrentLocation&&navigator&&navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(t){var e=t.coords;a.setState({currentLocation:{lat:e.latitude,lng:e.longitude},isCurrentPositionReceived:!0},function(){return a.props.updateLocationData(t)})}),a.loadMap()},a.buildRoute=function(t){console.log(t);var e=a.props.google.maps;a.directionsDisplay.setMap(a.map);var n={origin:t.start,destination:t.end,travelMode:"DRIVING"};a.directionsService.route(n,function(t,n){if("OK"===n){var i=[];e.geometry.encoding.decodePath(t.routes[0].overview_polyline).forEach(function(t){return i.push({lat:t.lat(),lng:t.lng()})});var r=function(t,e){var a=[];return t.forEach(function(n,i){if(i<t.length-1){var r,l,s=It(n.lat,n.lng,t[i+1].lat,t[i+1].lng);e.forEach(function(e){r=It(n.lat,n.lng,e.lat,e.lng),l=It(t[i+1].lat,t[i+1].lng,e.lat,e.lng),r+l<s+.1&&a.push({lat:e.lat,lng:e.lng})})}}),a}(i,a.props.bumps);a.databaseBumps=a.setBumpsOnMap(r,a.databaseBumps,"#e34929",.8),a.directionsDisplay.setDirections(t)}})},a.convertAddressToCoordinates=function(t){return new Promise(function(e,n){for(var i=a.props.google.maps,r=[],l=new i.Geocoder,s=0;s<t.length;s++)l.geocode({address:t[s]},function(a,i){"OK"!==i&&n(new Error("Geocoder failed due to: "+i)),r.push(a[0].geometry.location),r.length===t.length&&e({start:r[0],end:r[1]})})})},a.loadMap=function(){if(a.props.google){var t=a.props.google.maps,e=a.props.zoom,n=a.state.currentLocation,i=n.lat,r=n.lng,l=new t.LatLng(i,r),s=Object.assign({},{center:l,zoom:e,zoomControl:!1,scaleControl:!1,fullscreenControl:!1,mapTypeControl:!1,streetViewControl:!1});a.map=new t.Map(a.mymap.current,s),a.map&&(a.directionsService=new t.DirectionsService,a.directionsDisplay=new t.DirectionsRenderer);["click","dragend","zoom_changed"].forEach(function(t){return a.map.addListener(t,a.handleEvent(t))}),t.event.trigger(a.map,"ready"),a.map&&!a.props.menu.isCheckTripView&&(a.databaseBumps=a.setBumpsOnMap(a.props.bumps,a.databaseBumps,"#e34929",.8))}},a.recenterMap=function(t){var e=a.map,n=a.props.google.maps;if(e){var i=new n.LatLng(t.lat,t.lng);e.panTo(i)}},a.deleteMarkers=function(t){return t.forEach(function(t){return t.setMap(null)}),[]},a.setBumpsOnMap=function(t,e,n,i){var r=a.props.google.maps,l={path:"M-4,0a4,4 0 1,0 8,0a4,4 0 1,0 -8,0",fillColor:n,strokeColor:n,fillOpacity:1,scale:i,anchor:new r.Point(0,0)};return e=a.deleteMarkers(e),t.forEach(function(t){e.push(new r.Marker({position:{lat:t.lat,lng:t.lng},icon:l,map:a.map}))}),e},a.componentWillUnmount=function(){a.deleteMarkers(a.tripBumps),a.deleteMarkers(a.databaseBumps)},a.renderChildren=function(){var t=a.props.children;if(t)return i.a.Children.map(t,function(t){return i.a.cloneElement(t,{map:a.map,google:a.props.google,mapCenter:a.state.currentLocation,currentLocation:a.props.trip.currentLocation,isCurrentPositionReceived:a.state.isCurrentPositionReceived})})};var n=t.initialCenter,r=n.lat,l=n.lng;return a.state={currentLocation:{lat:r,lng:l},zoom:17,isCurrentPositionReceived:!1,temp:[]},a.mymap=i.a.createRef(),a.mymarker=i.a.createRef(),a.tripBumps=[],a.databaseBumps=[],a.directionsBumps=[],a}return Object(Ot.a)(e,t),Object(wt.a)(e,[{key:"componentDidUpdate",value:function(t,e){var a=this;if(t.google!==this.props.google&&this.loadMap(),e.currentLocation!==this.state.currentLocation&&this.recenterMap(this.state.currentLocation),t.trip.currentLocation!==this.props.trip.currentLocation&&this.state.isCurrentPositionReceived&&this.props.mode.isRecording&&(this.recenterMap(this.props.trip.currentLocation),this.setState({currentLocation:this.props.trip.currentLocation})),t.trip.bumps!==this.props.trip.bumps&&(this.tripBumps=this.setBumpsOnMap(this.props.trip.bumps,this.tripBumps,"#fbad19",1.2)),t.bumps===this.props.bumps||this.props.menu.isCheckTripView||(this.databaseBumps=this.setBumpsOnMap(this.props.bumps,this.databaseBumps,"#e34929",.8)),t.mode.isBuildingRoute!==this.props.mode.isBuildingRoute&&!0===this.props.mode.isBuildingRoute){var n=this.props,i=n.start,r=n.end,l=n.google;if(""!==i)return this.buildRoute({start:i,end:r});navigator.geolocation.getCurrentPosition(function(t){return a.buildRoute({start:new l.maps.LatLng(t.coords.latitude,t.coords.longitude),end:r})})}}},{key:"handleEvent",value:function(t){var e,a=this,n="on".concat(zt(t));return function(t){e&&(clearTimeout(e),e=null),e=setTimeout(function(){a.props[n]&&a.props[n](a.props,a.map,t)},0)}}},{key:"render",value:function(){var t={width:this.props.dom.width+"px",height:this.props.dom.height+"px",position:"relative"};return i.a.createElement("div",{ref:this.mymap,style:t},"Loading...",this.renderChildren())}}]),e}(n.Component),Jt=Object(o.b)(function(t){return{menu:t.menu,mode:t.mode,trip:t.trip,dom:t.dom,bumps:t.bumps}},qt)(Qt);Qt.defaultProps={zoom:16,initialCenter:{lat:53.893009,lng:27.567444},centerAroundCurrentLocation:!1};var Zt=[{path:"M69.9,36c0.3-9.3,0.3-9.1,0.3-9.1c0-0.2,0.7-7.9-0.6-15.3c-1.3-7.5-9.7-9.5-9.7-9.5l-0.4,0l-8.9-0.3v0l-8.8,0.3  l-0.4,0c0,0-8.4,2.1-9.7,9.5c-1.3,7.4-0.6,15.1-0.6,15.3c0,0,0-0.3,0.3,9.1c0.4,9.8-0.6,34-0.5,37c0.1,2.9-0.2,9.2,0.4,10.8  c0.6,1.6,2.6,9.6,2.6,9.6s3.2,6.2,16.8,5.3v0c13.5,0.9,16.7-5.3,16.7-5.3s2-8,2.6-9.6c0.6-1.6,0.2-7.9,0.4-10.8  C70.5,70,69.5,45.8,69.9,36L69.9,36z",fill:"#D14C32"},{path:"M61.7,27.5c-3.2-1.6-11.1-1.8-11.1-1.8v0c0,0-8,0.1-11.1,1.8c-3.2,1.6-4.3,2.4-4.1,3.5c0.2,1.1,2.6,12,2.6,12.3  c0,0.3,0.2,0.7,1.5,0.4c1.2-0.4,11.2-0.8,11.2-0.8v0c0,0,10,0.4,11.2,0.8c1.2,0.4,1.5-0.1,1.5-0.4c0-0.3,2.4-11.2,2.6-12.3  C66,29.9,64.9,29.2,61.7,27.5L61.7,27.5z",fill:"#121215"},{path:"M67.4,32.8c0,0,0,12.6,0,16.3c0,3.7,0,8.7-0.3,12.1C66.8,64.7,66.1,80,66.1,80v0.3c0,0-2-5.3-2.4-9.4  c-0.9-4-0.5-14,0-20.1C64,44.8,67,33.9,67.4,32.8z",fill:"#101114"},{path:"M62.4,76.1c-0.2-1.4-0.4-1-0.5-1.1c-0.1-0.1-1.5,0.3-2.1,0.4c-4.6,0.8-9.3,0.6-9.3,0.6v0c0,0-4.7,0.2-9.3-0.6  c-0.6-0.1-2-0.5-2.1-0.4c-0.1,0.1-0.3-0.3-0.5,1.1c-0.2,1.4-1.4,9.9-1.3,10c0.1,0.1,2.9,1.8,7.9,2.6c1.1,0.1,5.3,0.2,5.3,0.2v0  c0,0,4.2-0.2,5.3-0.2c5-0.8,7.8-2.5,7.9-2.6C63.8,86.1,62.7,77.5,62.4,76.1L62.4,76.1z",fill:"#131417"},{path:"M67,36l1.2,0.7V38H67V36z",fill:"#0D0E13"},{path:"M59,2.9c-0.1-0.1-0.2-0.1-0.4-0.2C58.1,2.6,58.3,2.6,59,2.9z",fill:"#C2C6C1"},{path:"M67.7,11.8C66.9,6.6,61,3.7,59,2.9c2,1.4,3.4,9.1,4.5,14c1.1,5.2,1.8,13.5,1.8,13.5s2.4,0.4,3.6,7  C69.7,41.5,68.9,18.8,67.7,11.8L67.7,11.8z",fill:"#D8684A"},{path:"M42.6,2.8c-0.1,0-0.2,0.1-0.4,0.2C42.9,2.7,43.2,2.6,42.6,2.8z",fill:"#C2C6C1"},{path:"M33.5,11.8c-1.2,7-1.9,29.7-1.1,25.5c1.1-6.5,3.6-7,3.6-7s0.6-8.3,1.8-13.5c1.1-4.9,2.5-12.6,4.5-14  C40.3,3.8,34.4,6.6,33.5,11.8z",fill:"#D8684A"},{path:"M63.4,56.8l3.8-2.9v3.4l-3.8,2.4V56.8z M37.7,83.9c-0.2,1.3-0.3,2.2-0.2,2.2c0.1,0.1,2.9,1.8,7.9,2.6  c1.1,0.1,5.3,0.2,5.3,0.2v0c0,0,4.2-0.2,5.3-0.2c5-0.8,7.8-2.5,7.9-2.6c0,0-0.3-2.4-0.6-4.9L37.7,83.9L37.7,83.9z",fill:"#202226"},{path:"M37.3,40.1l24.4-5.8l3.7-1.2c0.2-1.1,0.4-1.9,0.4-2.1c0.2-1.1-0.9-1.9-4.1-3.5c-3.2-1.6-11.1-1.8-11.1-1.8v0  c0,0-8,0.1-11.1,1.8c-3.2,1.6-4.3,2.4-4.1,3.5C35.5,31.7,36.5,36.7,37.3,40.1L37.3,40.1z",fill:"#212428"},{path:"M33.9,32.9c0,0,0,12.6,0,16.3c0,3.7,0,8.7,0.3,12.1c0.3,3.4,0.9,18.7,0.9,18.7v0.3c0,0,2-5.3,2.4-9.4  c0.9-4,0.5-14,0-20.1C37.3,44.8,34.3,33.9,33.9,32.9z",fill:"#101114"},{path:"M69.9,36c0.3-9.3,0.3-9.1,0.3-9.1c0-0.2,0.7-7.9-0.6-15.3c-1.3-7.5-9.7-9.5-9.7-9.5l-0.4,0l-8.9-0.3v0l-8.8,0.3  l-0.4,0c0,0-8.4,2.1-9.7,9.5c-1.3,7.4-0.6,15.1-0.6,15.3c0,0,0-0.3,0.3,9.1c0.4,9.8-0.6,34-0.5,37c0.1,2.9-0.2,9.2,0.4,10.8  c0.6,1.6,2.6,9.6,2.6,9.6s3.2,6.2,16.8,5.3v0c13.5,0.9,16.7-5.3,16.7-5.3s2-8,2.6-9.6c0.6-1.6,0.2-7.9,0.4-10.8  C70.5,70,69.5,45.8,69.9,36L69.9,36z M69.3,83.9c-1.6,9.7-4,11.2-6.7,12.7c-2.7,1.4-11.9,1.6-11.9,1.6v0c-0.9,0-9.3-0.3-11.9-1.6  c-2.7-1.5-5.1-3-6.7-12.7c-1.6-9.7,0.6-13.6,0.4-21.9c-0.3-8.3-0.3-29.6-0.2-32c0.1-2.4-0.6-19.1,1.7-21.5c2.3-2.4,5.6-5.7,7.6-5.8  C42.6,2.7,44,2.6,45,2.6V2.6h5.7v0h5.6v0.1c1.2,0,2.3,0,3.5,0.1c2,0.1,5.3,3.4,7.6,5.8c2.3,2.4,1.6,19.1,1.7,21.5  c0.1,2.4,0.1,23.7-0.2,32C68.6,70.3,70.9,74.2,69.3,83.9L69.3,83.9z",fill:"#9E4A36"},{path:"M34.3,91c0,0,1.5,3.3,4,4.1c2.4,0.9,4.2,1.3,4.2,1.3s-3.1,0-4.8-1C36.1,94.5,34.2,93.1,34.3,91z",fill:"#9E4A36"},{path:"M41.5,2.7c0,0-3.4,1.6-4.4,2.8c-1,1.1-2.5,3-2.6,3.3c0,0.2,0,0.9,0,0.9S40.6,3.1,41.5,2.7z",fill:"#FEFDF8"},{path:"M50.6,1.8L50.6,1.8L50.6,1.8L50.6,1.8z M58.4,3c0-0.3-1.7-0.8-2.2-0.9c-0.4-0.1-5.3-0.2-5.6-0.2l0,0  c-0.3,0-5.2,0.2-5.6,0.3c-0.4,0.1-2.1,0.6-2.2,0.9c0,0.3,0.3,0.5,0.7,0.3s1-0.7,1.4-0.8c0.4-0.1,5.7-0.3,5.7-0.3l0,0  c0.4,0,5.2,0.2,5.6,0.3c0.4,0.1,1,0.6,1.4,0.8C58.1,3.5,58.4,3.3,58.4,3L58.4,3z",fill:"#1D2021"},{path:"M32.8,36.8c0,0-3.4,1.4-3.6,2.7C29,40.8,29,41,29.2,41s3.8-1.9,3.8-1.9v-2.3L32.8,36.8L32.8,36.8z",fill:"#D14C32"},{path:"M29.2,41.3l0-0.3l3.8-1.9v0.3L29.2,41.3z",fill:"#0D0E13"},{path:"M34.3,36.1L33,36.8V38h1.2V36.1z",fill:"#0D0E13"},{path:"M37.9,56.9L34,54v3.4l3.8,2.4V56.9z",fill:"#202226"},{path:"M38.7,76.1c0.2-1.4,0.4-1,0.5-1.1c0.1-0.1,1.5,0.3,2.1,0.4c4.6,0.8,9.3,0.6,9.3,0.6v0c0,0,4.7,0.2,9.3-0.6  c0.6-0.1,2-0.5,2.1-0.4c0.1,0.1,0.3-0.3,0.5,1.1c0.2,1.4,1.4,9.9,1.3,10c-0.1,0.1-2.9,1.8-7.9,2.6c-1.1,0.1-5.3,0.2-5.3,0.2v0  c0,0-4.2-0.2-5.3-0.2c-5-0.8-7.8-2.5-7.9-2.6C37.3,86.1,38.5,77.5,38.7,76.1L38.7,76.1z M39.6,27.5c3.2-1.6,11.1-1.8,11.1-1.8v0  c0,0,8,0.1,11.1,1.8c3.2,1.6,4.3,2.4,4.1,3.5c-0.2,1.1-2.6,12-2.6,12.3c0,0.3-0.2,0.7-1.5,0.4c-1.2-0.4-11.2-0.8-11.2-0.8v0  c0,0-10,0.4-11.2,0.8c-1.2,0.4-1.5-0.1-1.5-0.4c0-0.3-2.4-11.2-2.6-12.3C35.3,29.9,36.4,29.2,39.6,27.5L39.6,27.5z",fill:"#343C3E"},{path:"M38.2,28.3c-2.2,1.2-3,1.9-2.8,2.8c0.2,1.1,2.6,12,2.6,12.3c0,0.3,0.2,0.7,1.5,0.4c0.3-0.1,1-0.2,2-0.2  C39.9,39.9,38.7,31.8,38.2,28.3L38.2,28.3z M63.1,28.2c2.2,1.2,3,1.9,2.8,2.8c-0.2,1.1-2.6,12-2.6,12.3c0,0.3-0.2,0.7-1.5,0.4  c-0.3-0.1-1-0.2-2-0.2C61.4,39.9,62.6,31.8,63.1,28.2L63.1,28.2z",fill:"#2E3436"},{path:"M65.3,29.7c-0.6-0.6-1.8-1.2-3.6-2.2c-3.2-1.6-11.1-1.8-11.1-1.8v0h0v0c-0.6,0-8.1,0.2-11.1,1.8  c-1.8,0.9-2.9,1.6-3.6,2.2l2.8,2.2c0,0,5.7-0.9,11.9-1v0c6.1,0.1,11.8,0.7,11.8,0.7L65.3,29.7L65.3,29.7z",fill:"#202226"},{path:"M59.8,2.7c0,0,3.4,1.6,4.4,2.8c1,1.1,2.5,3,2.6,3.3c0,0.2,0,0.9,0,0.9S60.7,3.1,59.8,2.7z",fill:"#FEFDF8"},{path:"M55.4,3.8H44.8c0,0-2.2,0.6-2.9,8.6c-0.7,8-2,14.1,3,12.7c4.9-1.4,7.6-0.2,9.8-0.3c2.2-0.2,5.6,2.3,4.3-8.6  C57.7,5.2,57.6,4.6,55.4,3.8L55.4,3.8z",fill:"#D8684A"},{path:"M44.5,24.3l1.8-18.1l-1.3,6.4L44.5,24.3z M56.8,24.2L55,6.2l1.3,6.4L56.8,24.2z M66.9,90.9c0,0-1.5,3.3-4,4.1  c-2.4,0.9-4.2,1.3-4.2,1.3s3.1,0,4.8-1C65.2,94.5,67,93,66.9,90.9L66.9,90.9z",fill:"#9E4A36"},{path:"M39.2,75c-0.1,0.1-0.3-0.3-0.5,1.1s-1.4,9.9-1.3,10c0,0,0.7,0.5,2,1L41,75.4C40.3,75.2,39.2,74.9,39.2,75  L39.2,75z M62.4,76.2c-0.2-1.4-0.4-1-0.5-1.1c0-0.1-1.1,0.2-1.8,0.3l1.6,11.8c1.2-0.5,1.9-0.9,2-1C63.8,86.1,62.6,77.6,62.4,76.2  L62.4,76.2z",fill:"#2E3436"},{path:"M68.4,36.8c0,0,3.4,1.4,3.6,2.7s0.2,1.5,0,1.5c-0.2,0-3.8-1.9-3.8-1.9v-2.3L68.4,36.8L68.4,36.8z",fill:"#D14C32"},{path:"M72,41.3l0-0.3L68.3,39v0.3L72,41.3z",fill:"#0D0E13"},{path:"M55.9,88.3H44.7c0,0-6.1-0.8-5.3,1.8c0.8,2.6-0.8,5.8,7.6,5.8h6.5c8.5,0,6.8-3.2,7.6-5.8  C62,87.4,55.9,88.3,55.9,88.3L55.9,88.3z",fill:"#D8684A"},{path:"M51,86.9c-5.2,0-9.8-1.1-13.1-3l-0.2,0c-0.3,2.4-0.3,2.2-0.2,2.3c0.1,0.1,2.9,1.8,7.9,2.6  c1.1,0.1,5.3,0.2,5.3,0.2v0c0,0,4.2-0.2,5.3-0.2c5-0.8,7.8-2.5,7.9-2.6c0,0-0.1-0.8-0.2-2C60.4,85.9,55.9,86.9,51,86.9z",fill:"#202226"},{path:"M58.3,51.8c1.2-3.8-0.8-5.2-3.1-5.6c-1.8-0.3-6.4-0.2-7.9-0.1c-2.7,0.2-5.6,1.3-4.2,5.7c2.4,7.5-0.1,17.8,0,19  c0.1,0.9,1.4,2.4,4,2.8c0.9,0.1,6.8,0.1,7.9-0.1c2.1-0.5,3.2-1.8,3.3-2.6C58.4,69.6,55.9,59.3,58.3,51.8L58.3,51.8z",fill:"#D8684A"}],Xt=function(t){function e(){var t,a;Object(bt.a)(this,e);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(a=Object(Et.a)(this,(t=Object(yt.a)(e)).call.apply(t,[this].concat(i)))).componentDidMount=function(){a.marker=[]},a.componentDidUpdate=function(t){var e=a.props,n=e.map,i=e.isCurrentPositionReceived,r=a.props.trip.currentLocation.speed,l=a.props.trip,s=l.angle,o=l.move;(n!==t.map||r>5&&(s!==t.angle||o>5)||i!==t.isCurrentPositionReceived)&&a.renderMarker(),t.trip.path!==a.props.trip.path&&a.props.trip.path.length&&a.renderMarker()},a.componentWillUnmount=function(){a.removeMarker()},a.removeMarker=function(){a.marker&&a.marker.length>0&&a.marker.forEach(function(t){t.setMap(null)})},a.renderMarker=function(){a.removeMarker();var t=a.props,e=t.map,n=t.google,i=t.mapCenter,r=a.props.trip.currentLocation,l=r.lat?{lat:r.lat,lng:r.lng}:void 0,s=l||i;l=new n.maps.LatLng(s.lat,s.lng),Zt.forEach(function(t,i){var r={path:t.path,fillColor:t.fill,strokeColor:t.fill,fillOpacity:1,scale:.4,anchor:new n.maps.Point(50,50),rotation:a.props.trip.angle},s={map:e,position:l,icon:r};a.marker[i]=new n.maps.Marker(s),a.marker[i].setZIndex(100)})},a}return Object(Ot.a)(e,t),Object(wt.a)(e,[{key:"render",value:function(){return null}}]),e}(n.Component),$t=Object(o.b)(function(t){return{trip:t.trip,mode:t.mode}})(Xt),Yt=function(t){function e(){var t,a;Object(bt.a)(this,e);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(a=Object(Et.a)(this,(t=Object(yt.a)(e)).call.apply(t,[this].concat(i)))).handleSelection=function(t){a.props[t](),a.props.closeDrawerView()},a.markActiveTab=function(t){return window.location.hash.split("#/").pop()===t?" drawer-item-active":""},a}return Object(Ot.a)(e,t),Object(wt.a)(e,[{key:"render",value:function(){var t=this;return i.a.createElement("div",{className:"drawer"},i.a.createElement("div",{className:"drawer-logo"}),i.a.createElement("div",{className:"drawer-body"},[{id:"map",title:"Report a bump",action:"selectBumpsMapView"},{id:"checktrip",title:"Check your trip",action:"selectCheckTripView"},{id:"calibrate",title:"Calibrate sensors",action:"selectBumpsMapView"},{id:"settings",title:"Settings",action:"selectBumpsMapView"}].map(function(e){return i.a.createElement(s.b,{className:"drawer-item".concat(t.markActiveTab(e.id)),exact:"true",key:e.id,id:e.id,to:"/".concat(e.id),replace:!0,onClick:t.handleSelection(e.action)},e.title)})))}}]),e}(n.Component),te=Object(o.b)(null,function(t){return{selectCheckTripView:I,selectBumpsMapView:x,closeDrawerView:z}})(Yt),ee=function(t){function e(t){var a;return Object(bt.a)(this,e),(a=Object(Et.a)(this,Object(yt.a)(e).call(this,t))).componentDidMount=function(){a.loadMap()},a.componentDidUpdate=function(t,e){t.google===a.props.google&&t.selectedTrip===a.props.selectedTrip||a.loadMap()},a.loadMap=function(){if(a.props.google){var t=a.props.google.maps,e=a.props.selectedTrip,n=e.zoom,i=e.path,r=e.center,l=e.bumps,s={center:r,zoom:n,zoomControl:!1,scaleControl:!1,fullscreenControl:!1,mapTypeControl:!1,streetViewControl:!1},o={path:i,strokeColor:"#4D8FAC",strokeOpacity:.8,strokeWeight:4},c={path:"M-4,0a4,4 0 1,0 8,0a4,4 0 1,0 -8,0",fillColor:"red",strokeColor:"red",fillOpacity:1,scale:.8,anchor:new t.Point(0,0)};a.map=new t.Map(a.mapRef.current,s),a.trip=new t.Polyline(o),a.map&&(a.trip.setMap(a.map),l.forEach(function(e,n){a.bumps.push(new t.Marker({position:{lat:e.lat,lng:e.lng},icon:c,map:a.map,animation:t.Animation.DROP}))}))}},a.componenWillUnmount=function(){a.trip.setMap(null),a.bumps.forEach(function(t){return t.setMap(null)})},a.mapRef=i.a.createRef(),a.trip=null,a.bumps=[],a}return Object(Ot.a)(e,t),Object(wt.a)(e,[{key:"render",value:function(){if(this.props.selectedTrip){var t=this.props.dom,e=t.width,a=t.height;return i.a.createElement("div",{className:"favorities-map"},i.a.createElement("div",{ref:this.mapRef,style:{width:e+"px",height:a+"px",position:"relative"}}))}}}]),e}(n.Component),ae=Object(o.b)(function(t){return{selectedTrip:t.selectedTrip,dom:t.dom}})(ee),ne=function(t){function e(){return Object(bt.a)(this,e),Object(Et.a)(this,Object(yt.a)(e).apply(this,arguments))}return Object(Ot.a)(e,t),Object(wt.a)(e,[{key:"render",value:function(){return i.a.createElement("div",{className:"slider"},i.a.createElement("div",{className:"slider-background"}),i.a.createElement("div",{className:"slider-foreground",style:{backgroundColor:this.props.color,width:"".concat(this.props.width,"%")}}),i.a.createElement("div",{className:"slider-dividers"},i.a.createElement("div",{className:"slider-divider"}),i.a.createElement("div",{className:"slider-divider"}),i.a.createElement("div",{className:"slider-divider"}),i.a.createElement("div",{className:"slider-divider"})))}}]),e}(n.Component),ie=a(183),re=a(185),le=a(187),se=a(189),oe=a(191),ce=a(184),me=a(186),pe=a(188),ue=a(190),de=a(192),ge=function(t){function e(){return Object(bt.a)(this,e),Object(Et.a)(this,Object(yt.a)(e).apply(this,arguments))}return Object(Ot.a)(e,t),Object(wt.a)(e,[{key:"render",value:function(){if(null===this.props.selectedTrip)return null;var t="https://alesiagit.github.io/reactjs_accel/#/shared/".concat(this.props.selectedTrip.id);return i.a.createElement("div",{className:"share-wrapper"},i.a.createElement("div",{className:"share-buttons-wrapper",onClick:this.redirect},i.a.createElement(ie.a,{url:t,className:"share-social-icon"},i.a.createElement(ce.a,{size:38,round:!1,borderRadius:8})),i.a.createElement(re.a,{url:t,className:"share-social-icon"},i.a.createElement(me.a,{size:38,round:!1,borderRadius:8})),i.a.createElement(le.a,{url:t,className:"share-social-icon"},i.a.createElement(pe.a,{size:38,round:!1,borderRadius:8})),i.a.createElement(se.a,{url:t,className:"share-social-icon"},i.a.createElement(ue.a,{size:38,round:!1,borderRadius:8})),i.a.createElement(oe.a,{url:t,className:"share-social-icon"},i.a.createElement(de.a,{size:38,round:!1,borderRadius:8}))))}}]),e}(n.Component),he=Object(o.b)(function(t){return{selectedTrip:t.selectedTrip,menu:t.menu}})(ge),fe={closeDrawerView:z,selectDrawerView:A,selectBumpsMapView:x,selectFavoritiesListView:function(){return{type:T,menuitem:"isFavoritiesListView",title:"Report a bump",iconleft:"burger-icon",iconright:""}},selectShareView:function(){return{type:k,status:!0}},closeShareView:function(){return{type:D,status:!1}},startRecording:function(){return{type:_,mode:"isRecording",on:!0,color:"#e34929",text:"Stop Recording"}},stopRecording:function(){return{type:P}},noTripsSelected:function(){return{type:p,data:null}},changeBarColor:tt},ve=function(t){function e(){var t,a;Object(bt.a)(this,e);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(a=Object(Et.a)(this,(t=Object(yt.a)(e)).call.apply(t,[this].concat(i)))).componentDidMount=function(){a.props.changeBarColor("#4c88b7"),a.props.selectBumpsMapView(),a.props.stopRecording()},a.onLeftMenuToggle=function(){var t=a.props.menu,e=t.isDrawerView,n=t.isSelectedTripView;return e?a.props.closeDrawerView():n?(a.props.noTripsSelected(),void a.props.selectFavoritiesListView()):a.props.selectDrawerView()},a.onRightMenuToggle=function(){if(a.props.menu.isShareView)return a.props.closeShareView();a.props.selectShareView()},a.onNextStepButtonToggle=function(){if(a.props.mode.isRecording)return a.props.stopRecording();a.props.startRecording()},a.onSubmenuTabSelect=function(t){var e="select".concat(zt(t),"View");a.props[e]()},a.markActiveTab=function(t){var e="is".concat(zt(t),"View");return a.props.menu[e]},a}return Object(Ot.a)(e,t),Object(wt.a)(e,[{key:"render",value:function(){var t=this.props.menu.isDrawerView?"block":"none",e=this.props.menu.isShareView?"block":"none",a=this.props.mode,n=a.color,r=a.text;return i.a.createElement("div",{className:"wrapper"},i.a.createElement("div",{className:"main"},i.a.createElement("div",{className:"header"},i.a.createElement(St,{onLeftMenuToggle:this.onLeftMenuToggle,onRightMenuToggle:this.onRightMenuToggle}),i.a.createElement(Dt,{onSubmenuTabSelect:this.onSubmenuTabSelect,markActiveTab:this.markActiveTab})),i.a.createElement(Kt,null),i.a.createElement(Mt,{color:n,text:r,toggleButton:this.onNextStepButtonToggle})),i.a.createElement("div",{className:"cover",style:{display:e}},i.a.createElement("div",{className:"cover-background",onClick:this.onRightMenuToggle}),i.a.createElement(he,null)),i.a.createElement("div",{className:"cover",style:{display:t}},i.a.createElement("div",{className:"cover-background",onClick:this.onLeftMenuToggle}),i.a.createElement(te,null)))}}]),e}(n.Component),be=Object(o.b)(function(t){return{selectedTrip:t.selectedTrip,menu:t.menu,mode:t.mode}},fe)(ve),we={selectTrip:d,selectTripView:B},Ee=function(t){function e(t){var a;return Object(bt.a)(this,e),(a=Object(Et.a)(this,Object(yt.a)(e).call(this,t))).componentDidMount=function(){a.getSharedTripData().then(function(){return a.getAppStatistics()}).then(function(){return a.setState({tripQuality:a.setTripQuality(),isDataReceived:!0})}).catch(function(t){return console.log(t)})},a.getSharedTripData=function(){var t=window.location.hash.split("#/shared/").pop();return st.collection("shared").doc(t).get().then(function(t){if(t.exists)return t.data().tripdata}).then(function(t){a.props.selectTrip(t),a.props.selectTripView()})},a.getAppStatistics=function(){return st.collection("stats").doc("totals").get().then(function(t){t.exists&&a.setState({stats:t.data()})})},a.toggleStats=function(){a.setState({isStatsView:!a.state.isStatsView})},a.setTripQuality=function(){var t=a.props.selectedTrip,e=a.state.stats,n=["low","moderate","good"],i=t.bumps.length/t.distance/(e.bumpsCount/e.distanceTotal)*100;return i<30?n[0]:i>70?n[2]:n[1]},a.state={isDataReceived:!1,isStatsView:!0,stats:null,tripQuality:"low"},a}return Object(Ot.a)(e,t),Object(wt.a)(e,[{key:"render",value:function(){var t=this.props.selectedTrip,e=this.state,a=e.isDataReceived,n=e.isStatsView,r=e.stats,l=e.tripQuality;if(!1===a)return i.a.createElement("div",null,"Retrieving data from database");var s=t.bumps.length,o=t.distance;return i.a.createElement("div",{className:"shared-wrapper"},i.a.createElement("div",{className:"shared-stats"},i.a.createElement("div",{className:"shared-summary-header"},i.a.createElement("div",{className:"shared-summary-wrapper"},i.a.createElement("div",{className:"shared-summary"},"Bumpy road informer"),i.a.createElement("div",{className:"shared-trip-quality"},"Trip quality: ",l," ")),i.a.createElement("div",{className:"collapse-icon",onClick:this.toggleStats})),i.a.createElement("div",{className:"shared-details-wrapper",style:{display:n?"flex":"none"}},i.a.createElement("div",{className:"shared-endpoints"},i.a.createElement("div",{className:"shared-address-line"},i.a.createElement("span",{className:"shared-address-destination"},"From: "),t.start),i.a.createElement("div",{className:"shared-address-line"},i.a.createElement("span",{className:"shared-address-destination"},"To: "),t.end)),i.a.createElement("div",{className:"shared-slider-wrapper"},i.a.createElement("div",{className:"slider-header"},i.a.createElement("span",{className:"slider-fieldname"},"Bumps per trip: "),s),i.a.createElement(ne,{color:"#7fb8e9",width:s/(r.bumpsCount/r.tripsCount)*100}),i.a.createElement("div",{className:"slider-header"},i.a.createElement("span",{className:"slider-fieldname"},"Bumps per km: "),(s/o).toFixed(2)),i.a.createElement(ne,{color:"#fbad19",width:s/o/(r.bumpsCount/r.distanceTotal)*100})))),i.a.createElement("div",{className:"shared-map"},i.a.createElement(Kt,null)))}}]),e}(n.Component),ye=Object(o.b)(function(t){return{selectedTrip:t.selectedTrip,menu:t.menu}},we)(Ee),Oe=function(t){function e(){return Object(bt.a)(this,e),Object(Et.a)(this,Object(yt.a)(e).apply(this,arguments))}return Object(Ot.a)(e,t),Object(wt.a)(e,[{key:"render",value:function(){var t=this,e=this.props.mode.isGuidance||this.props.mode.isBuildingRoute?"none":"flex";return i.a.createElement("div",{className:"search-menu",style:{display:e}},i.a.createElement("div",{className:"from-to-icon"}),i.a.createElement("div",{className:"search-form"},["start","end"].map(function(e){return i.a.createElement("div",{key:e,className:"search-input-wrapper"},i.a.createElement("input",{type:"text",name:e,value:t.props[e],className:"search-input",placeholder:"start"===e?"(Current position)":"",onFocus:t.props.preventResize,onChange:function(e){return t.props.handleChange(e)}}),i.a.createElement("div",{className:"search-cancel-btn",onClick:function(){return t.props.clearInput(e)}}))})))}}]),e}(n.Component),Ce=Object(o.b)(function(t){return{mode:t.mode}})(Oe),Te={closeDrawerView:z,selectDrawerView:A,selectCheckTripView:I,startGuidance:function(){return{type:W,mode:"isGuidance",on:!0,color:"#e34929",text:"Stop Guidance"}},stopGuidance:function(){return{type:G,mode:"isGuidance",on:!1,color:"#fbad19",text:"Build a route"}},buildRoute:function(){return{type:F,mode:"isBuildingRoute",on:!0,text:"Start Guidance"}},changeBarColor:tt},je=function(t){function e(t){var a;return Object(bt.a)(this,e),(a=Object(Et.a)(this,Object(yt.a)(e).call(this,t))).componentDidMount=function(){a.props.changeBarColor("#4c88b7"),a.props.selectCheckTripView(),a.props.stopGuidance()},a.preventResize=function(){var t=a.props.dom,e=(t.width,t.height,t.ratio),n=window.innerWidth/e;document.querySelector("meta[name=viewport]").setAttribute("content","width=device-width, height=".concat(n,", user-scalable=no, initial-scale=1.0, maximum-scale=1.0"))},a.onLeftMenuToggle=function(){if(a.props.menu.isDrawerView)return a.props.closeDrawerView();a.props.selectDrawerView()},a.onNextStepButtonToggle=function(){var t=a.props.mode,e=t.isBuildingRoute,n=t.isGuidance;return e?a.props.startGuidance():n?a.props.stopGuidance():n||e?void 0:a.props.buildRoute()},a.onSearchButtonToggle=function(){a.props.stopGuidance()},a.handleInputChange=function(t){var e=t.target,n=e.name,i=e.value;a.setState(Object(C.a)({},n,i))},a.clearInput=function(t){a.setState(Object(C.a)({},t,""))},a.state={start:"",end:""},a}return Object(Ot.a)(e,t),Object(wt.a)(e,[{key:"render",value:function(){var t=this.state,e=t.start,a=t.end,n=this.props.menu.isDrawerView?"block":"none",r=this.props.mode.isBuildingRoute?"flex":"none",l=this.props.mode,s=l.color,o=l.text;return i.a.createElement("div",{className:"wrapper"},i.a.createElement("div",{className:"main"},i.a.createElement("div",{className:"header"},i.a.createElement(St,{onLeftMenuToggle:this.onLeftMenuToggle}),i.a.createElement(Ce,{handleChange:this.handleInputChange,clearInput:this.clearInput,start:e,end:a,preventResize:this.preventResize}),i.a.createElement("div",{className:"directions-btn",style:{display:r},onClick:this.onSearchButtonToggle})),i.a.createElement(Kt,{start:e,end:a}),i.a.createElement(Mt,{color:s,toggleButton:this.onNextStepButtonToggle,text:o})),i.a.createElement("div",{className:"cover",style:{display:n}},i.a.createElement("div",{className:"cover-background",onClick:this.onLeftMenuToggle}),i.a.createElement(te,null)))}}]),e}(n.Component),Me=Object(o.b)(function(t){return{selectedTrip:t.selectedTrip,menu:t.menu,mode:t.mode,dom:t.dom}},Te)(je),Le=(a(181),{changeBarColor:tt}),Se=function(t){function e(){var t,a;Object(bt.a)(this,e);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(a=Object(Et.a)(this,(t=Object(yt.a)(e)).call.apply(t,[this].concat(i)))).componentDidMount=function(){a.props.changeBarColor("#fbad19")},a}return Object(Ot.a)(e,t),Object(wt.a)(e,[{key:"render",value:function(){return i.a.createElement("div",{className:"wrapper"},i.a.createElement("div",{className:"start-page-main"},i.a.createElement("div",{className:"logo-container"},i.a.createElement("div",{className:"logo-txt"},"Bumpy"),i.a.createElement("div",{className:"logo-txt"},"Roads"),i.a.createElement("div",{className:"logo-txt"},"Informer"))),i.a.createElement(s.b,{exact:"true",to:"/map",className:"bottom-ruler-btn"},"get started"))}}]),e}(n.Component),ke=Object(o.b)(null,Le)(Se),De={setDimentions:$,setRatio:Y,addBumps:it,getStats:function(){return{type:ot}}},Ne=Object(Tt.a)(),Re=function(t){function e(){var t,a;Object(bt.a)(this,e);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(a=Object(Et.a)(this,(t=Object(yt.a)(e)).call.apply(t,[this].concat(i)))).componentDidMount=function(){window.addEventListener("load",function(){return window.history.pushState({noBackExitsApp:!0},"")}),window.addEventListener("popstate",function(t){t.state&&t.state.noBackExitsApp&&window.history.pushState({noBackExitsApp:!0},"")}),a.updateStatusbarColor(),a.retrieveBumpsFromDatabase(),a.props.setDimentions({width:window.innerWidth,height:window.innerHeight}),a.props.setRatio({ratio:window.innerWidth/window.innerHeight})},a.componentDidUpdate=function(t){t.dom.color!==a.props.dom.color&&a.updateStatusbarColor()},a.updateStatusbarColor=function(){document.querySelector("meta[name=theme-color]").setAttribute("content",a.props.dom.color)},a.retrieveBumpsFromDatabase=function(){st.collection("bumpsmap").doc("bumps").get().then(function(t){t.exists&&a.props.addBumps(t.data().bumps)})},a.retrieveAppStatsFromDatabase=function(){},a}return Object(Ot.a)(e,t),Object(wt.a)(e,[{key:"render",value:function(){return i.a.createElement(s.a,{history:Ne},i.a.createElement(Ct.a,{exact:!0,path:"/",component:ke}),i.a.createElement(Ct.a,{exact:!0,path:"/map",component:be}),i.a.createElement(Ct.a,{exact:!0,path:"/checktrip",component:Me}),i.a.createElement(Ct.a,{path:"/shared/:number",component:ye}))}}]),e}(n.Component),Ve=Object(o.b)(function(t){return{dom:t.dom}},De)(Re),Be=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Ae(t,e){navigator.serviceWorker.register(t).then(function(t){t.onupdatefound=function(){var a=t.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),e&&e.onUpdate&&e.onUpdate(t)):(console.log("Content is cached for offline use."),e&&e.onSuccess&&e.onSuccess(t)))})}}).catch(function(t){console.error("Error during service worker registration:",t)})}"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()}),l.a.render(i.a.createElement(o.a,{store:vt},i.a.createElement(s.a,null,i.a.createElement(Ve,null))),document.getElementById("root")),function(t){if("serviceWorker"in navigator){if(new URL("/reactjs_accel",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/reactjs_accel","/service-worker.js");Be?(function(t,e){fetch(t).then(function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then(function(t){t.unregister().then(function(){window.location.reload()})}):Ae(t,e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e,t),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):Ae(e,t)})}}()},57:function(t,e,a){},58:function(t,e,a){},77:function(t,e,a){}},[[101,1,2]]]);
//# sourceMappingURL=main.6cd64843.chunk.js.map