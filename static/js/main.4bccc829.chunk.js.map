{"version":3,"sources":["serviceWorker.js","components/Firebase/firebase.js","components/Geolocation/map.js","components/Geolocation/marker.js","components/Geolocation/geolocation.js","components/App.js","index.js"],"names":["Boolean","window","location","hostname","match","firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","firestore","Map","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","componentDidMount","centerAroundCurrentLocation","navigator","geolocation","getCurrentPosition","pos","coords","setState","currentLocation","lat","latitude","lng","longitude","isCurrentPositionReceived","updateLocationData","loadMap","google","maps","zoom","_this$state$currentLo","state","center","LatLng","mapConfig","assign","map","mymap","current","forEach","e","addListener","handleEvent","event","trigger","camelize","str","separator","split","word","charAt","toUpperCase","slice","join","recenterMap","panTo","updateCurrent","renderChildren","children","React","Children","c","cloneElement","mapCenter","_props$initialCenter","initialCenter","createRef","mymarker","prevProps","prevState","isRecordingMode","evtName","timeout","_this2","i","handlerName","concat","clearTimeout","setTimeout","react_default","a","createElement","ref","style","width","height","position","Component","defaultProps","navigatorId","elements","path","fill","Marker","marker","componentDidUpdate","_this$props","angle","move","speed","renderMarker","componentWillUnmount","removeMarker","length","setMap","_this$props2","undefined","index","icon","fillColor","strokeColor","fillOpacity","scale","anchor","Point","rotation","pref","resetMove","line","EARTH_RADIUS","NAVIGATOR_OPTIONS","enableHighAccuracy","maximumAge","Geolocation","canvas","context","getContext","isDataFetched","data","addEventListener","history","pushState","noBackExitsApp","toggleRecording","startRecording","stopRecording","watchPosition","err","DeviceMotionEvent","updateAccelerationData","console","log","ev","x","acceleration","y","z","drawBackground","accel","prop","drawLine","toRad","num","Math","PI","calculateDistance","lat1","lng1","lat2","lng2","dLat","dLng","sin","cos","atan2","sqrt","calculateAngle","brng","value","ctx","axis","beginPath","strokeStyle","moveTo","lineTo","stroke","color","offset","prev","timestamp","distance","time","abs","previousLocation","toConsumableArray","updateResultingData","clearWatch","removeEventListener","toggleChart","isChartView","onZoomChanged","mapProps","clickEvent","recordingButtonText","chartViewButtonText","loaded","onClick","disabled","id","display","dist","strokeOpacity","strokeWeight","GoogleApiWrapper","process","App","className","ReactDOM","render","src_components_App","document","getElementById","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.4bccc829.chunk.js","sourcesContent":["// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","// import app from 'firebase/app';\r\n// import 'firebase/database';\r\n\r\n// const config = {\r\n//     apiKey: \"AIzaSyBexhCuV6JNCsyakFOeBK7NmFb_oM_pgxo\",\r\n//     authDomain: \"bumpyroadsinformer.firebaseapp.com\",\r\n//     databaseURL: \"https://bumpyroadsinformer.firebaseio.com\",\r\n//     projectId: \"bumpyroadsinformer\",\r\n//     storageBucket: \"\",\r\n//     messagingSenderId: \"854546127925\",\r\n//     appId: \"1:854546127925:web:d3c2a81c7c4e9ba6\"\r\n// };\r\n\r\n// class Firebase {\r\n//   constructor() {\r\n//     app.initializeApp(config);\r\n\r\n//     this.db = app.firestore();\r\n//   }\r\n\r\n//   coverage = () => this.db.ref('coverage');\r\n// }\r\n\r\n// export default Firebase;\r\n\r\nimport firebase from \"firebase\";\r\n\r\nconst firebaseApp = firebase.initializeApp({\r\n    apiKey: \"AIzaSyBexhCuV6JNCsyakFOeBK7NmFb_oM_pgxo\",\r\n    authDomain: \"bumpyroadsinformer.firebaseapp.com\",\r\n    databaseURL: \"https://bumpyroadsinformer.firebaseio.com\",\r\n    projectId: \"bumpyroadsinformer\",\r\n    storageBucket: \"\",\r\n    messagingSenderId: \"854546127925\",\r\n    appId: \"1:854546127925:web:d3c2a81c7c4e9ba6\"\r\n});\r\n\r\nconst db = firebaseApp.firestore();\r\n\r\nexport { db };","import React, { Component } from 'react';\r\nimport {Polyline} from 'google-maps-react';\r\n\r\nclass Map extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tconst {lat, lng} = props.initialCenter;\r\n\r\n\t\tthis.state = {\r\n\t\t\tcurrentLocation: {lat, lng}, \r\n\t\t\tzoom: 17,\r\n\t\t\tisCurrentPositionReceived: false\r\n\t\t};\r\n\r\n\t\tthis.mymap = React.createRef();\r\n\t\tthis.mymarker = React.createRef();\r\n\t}\r\n\r\n\tcomponentDidMount = () => {\r\n\r\n\t // \tvar data;\r\n\t\t// db.collection(\"coverage\").get().then(querySnapshot => {\r\n\t\t//     querySnapshot.forEach(function(doc) {\r\n\t\t//     \tif (doc.data().data) {\r\n\t\t//     \t\tdata = JSON.parse(doc.data().data);\r\n\t\t//     \t} else {\r\n\t\t//     \t\tdata = [];\r\n\t\t//     \t}\r\n\r\n\t\t//     });\r\n\t\t// }).then(() => {\r\n\t\t// \tthis.setState({ \r\n\t\t// \t\tcontext: canvas.getContext('2d'),\r\n\t\t// \t\tisDataFetched: true,\r\n\t //  \t\t\tdata \r\n\t //  \t\t}, () => console.log(this.state.data));\r\n\t\t// });\r\n\r\n\r\n\t\tif (this.props.centerAroundCurrentLocation) {\r\n\t\t\tif (navigator && navigator.geolocation) {\r\n\t\t\t\tnavigator.geolocation.getCurrentPosition((pos) => {\r\n\t\t\t\t\tconst coords = pos.coords;\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\tcurrentLocation: {lat: coords.latitude, lng: coords.longitude},\r\n\t\t\t\t\t\tisCurrentPositionReceived: true\r\n\t                }, this.props.updateLocationData(pos)) //update wrapper data\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.loadMap();\r\n\t}\r\n\r\n\tcomponentDidUpdate(prevProps, prevState) {\r\n\t\tif (prevProps.google !== this.props.google) {\r\n\t\t\tthis.loadMap();\r\n\t\t}\r\n\t\tif (prevState.currentLocation !== this.state.currentLocation) {\r\n\t\t\t//this.recenterMap();\r\n\t\t\tthis.recenterMap(this.state.currentLocation);\r\n\t\t}\r\n\r\n\t\tif ((prevProps.currentLocation !== this.props.currentLocation) && (this.state.isCurrentPositionReceived && this.props.isRecordingMode)) {\r\n\t\t\t// console.log(prevProps.position, this.props.position);\r\n\t\t\t// this.recenterMap2();\r\n\t\t\tthis.recenterMap(this.props.currentLocation);\r\n\t\t}\r\n\t}\r\n\r\n\tloadMap = () => {\r\n\t\tif (this.props.google) {\r\n\r\n\t\t\tvar maps = this.props.google.maps;\r\n\r\n\t\t\tlet {zoom} = this.props;\r\n\t\t\t//const {lat, lng} = initialCenter;\r\n\t\t\tconst {lat, lng} = this.state.currentLocation;\r\n\r\n\t\t\tconst center = new maps.LatLng(lat, lng);\r\n\t\t\tconst mapConfig = Object.assign({}, {\r\n\t\t\t\tcenter: center,\r\n\t\t\t\tzoom: zoom\r\n\t\t\t});\r\n\r\n\t\t\tthis.map = new maps.Map(this.mymap.current, mapConfig);\r\n\r\n\t\t\t// this.map.addListener('zoom_changed', (evt) => {\r\n\t\t\t// \tthis.updateZoom();\r\n\t\t\t// });\r\n\r\n\t\t\tconst evtNames = ['click', 'dragend', 'zoom_changed'];\r\n\r\n\t\t\tevtNames.forEach(e => {\r\n\t        \tthis.map.addListener(e, this.handleEvent(e));\r\n\t      \t});\r\n\r\n\t      \tmaps.event.trigger(this.map, 'ready');\r\n\r\n\t\t\t// this.directionsService = new maps.DirectionsService();\r\n  \t// \t\tthis.directionsDisplay = new maps.DirectionsRenderer();\r\n  \t// \t\tvar haight = new maps.LatLng(53.9127758, 27.5132506);\r\n  \t// \t\tvar oceanBeach = new maps.LatLng(53.912676, 27.5136713);\r\n\r\n  \t// \t\tthis.directionsDisplay.setMap(this.map);\r\n\r\n  \t// \t\tvar request = {\r\n\t\t //      origin: haight,\r\n\t\t //      destination: oceanBeach,\r\n\t\t //      // Note that Javascript allows us to access the constant\r\n\t\t //      // using square brackets and a string value as its\r\n\t\t //      // \"property.\"\r\n\t\t //      travelMode: 'DRIVING'\r\n\t\t //  };\r\n\t\t //  this.directionsService.route(request, (response, status) => {\r\n\t\t //    if (status == 'OK') {\r\n\t\t //      this.directionsDisplay.setDirections(response);\r\n\t\t //    } else {\r\n\t  //           console.log('Directions request failed due to ' + status);\r\n\t  //         }\r\n\t\t //  });\r\n\t\t}\r\n\t}\r\n\r\n\tcamelize = (str, separator)  => {\r\n\t\treturn str.split(separator).map((word) => {\r\n\t\t\treturn word.charAt(0).toUpperCase() + word.slice(1);\r\n\t\t}).join('');\r\n\t}\r\n\r\n\thandleEvent(evtName) {\r\n\t\tlet timeout;\r\n\r\n\t\t[' ', '_'].forEach(i => evtName = this.camelize(evtName, i)); \r\n\r\n\t\tconst handlerName = `on${this.camelize(evtName)}`;\r\n\r\n\t\treturn (e) => {\r\n\t\t\tif (timeout) {\r\n\t\t\t\tclearTimeout(timeout);\r\n\t\t\t\ttimeout = null;\r\n\t\t\t}\r\n\t\t\ttimeout = setTimeout(() => {\r\n\t\t\t\tif (this.props[handlerName]) {\r\n\t\t\t\t\tthis.props[handlerName](this.props, this.map, e);\r\n\t\t\t\t}\r\n\t\t\t}, 0);\r\n\t\t}\r\n\t}\r\n\r\n\trecenterMap = currentLocation => {\r\n\t\tconst map = this.map;\r\n\t\t//const curr = position; //this.props.position\r\n\r\n\t\tconst google = this.props.google;\r\n\t\tconst maps = google.maps;\r\n\r\n\t\tif (map) {\r\n\t\t\tlet center = new maps.LatLng(currentLocation.lat, currentLocation.lng)\r\n\t\t\tmap.panTo(center);\r\n\t\t}\r\n\t}\r\n\r\n\tupdateCurrent = (location) => {\r\n\t\tthis.props.updateLocationData(location);\r\n\t}\r\n\r\n\trenderChildren = () => {\r\n\t\tconst {children} = this.props;\r\n\r\n\t\tif (!children) return;\r\n\r\n\t\treturn React.Children.map(children, c => {\r\n\t\t\treturn React.cloneElement(c, {\r\n\t\t\t\tmap: this.map,\r\n\t\t\t\tgoogle: this.props.google,\r\n\t\t\t\tmapCenter: this.state.currentLocation,\r\n\t\t\t\tcurrentLocation: this.props.currentLocation,\r\n\t\t\t\tisCurrentPositionReceived: this.state.isCurrentPositionReceived\r\n\t\t\t});\r\n\t\t})\r\n\t}\r\n\r\n\trender() {\r\n\t\tlet google = this.props.google;\r\n\t\tlet zoom = this.state.zoom  ;\r\n\r\n\t  \treturn (\r\n\t  \t\t<div \r\n\t    \t\t\tref={this.mymap} \r\n\t    \t\t\tstyle={{width: \"400px\", height: \"300px\", position: \"relative\"}} \r\n\t\t          \t>\r\n\t\t          \tLoading...\r\n\t\t          \t{this.renderChildren()}\r\n\t\t          \t</div>\r\n\r\n\r\n\t\t          \t);\r\n\r\n\t  }\r\n\t}\r\n\r\n\texport default Map;\r\n\r\nMap.defaultProps = {\r\n\tzoom: 16,\r\n  // Minsk center, by default\r\n  initialCenter: {\r\n  \tlat: 53.893009,\r\n  \tlng: 27.567444\r\n  },\r\n  centerAroundCurrentLocation: false\r\n}","import React, { Component } from 'react';\r\n//import car from '../../images/car.svg';\r\n\r\nvar elements = [\r\n{path: \"M69.9,36c0.3-9.3,0.3-9.1,0.3-9.1c0-0.2,0.7-7.9-0.6-15.3c-1.3-7.5-9.7-9.5-9.7-9.5l-0.4,0l-8.9-0.3v0l-8.8,0.3  l-0.4,0c0,0-8.4,2.1-9.7,9.5c-1.3,7.4-0.6,15.1-0.6,15.3c0,0,0-0.3,0.3,9.1c0.4,9.8-0.6,34-0.5,37c0.1,2.9-0.2,9.2,0.4,10.8  c0.6,1.6,2.6,9.6,2.6,9.6s3.2,6.2,16.8,5.3v0c13.5,0.9,16.7-5.3,16.7-5.3s2-8,2.6-9.6c0.6-1.6,0.2-7.9,0.4-10.8  C70.5,70,69.5,45.8,69.9,36L69.9,36z\", fill:\"#D14C32\"},\r\n{path: \"M61.7,27.5c-3.2-1.6-11.1-1.8-11.1-1.8v0c0,0-8,0.1-11.1,1.8c-3.2,1.6-4.3,2.4-4.1,3.5c0.2,1.1,2.6,12,2.6,12.3  c0,0.3,0.2,0.7,1.5,0.4c1.2-0.4,11.2-0.8,11.2-0.8v0c0,0,10,0.4,11.2,0.8c1.2,0.4,1.5-0.1,1.5-0.4c0-0.3,2.4-11.2,2.6-12.3  C66,29.9,64.9,29.2,61.7,27.5L61.7,27.5z\", fill: \"#121215\"},\r\n{path: \"M67.4,32.8c0,0,0,12.6,0,16.3c0,3.7,0,8.7-0.3,12.1C66.8,64.7,66.1,80,66.1,80v0.3c0,0-2-5.3-2.4-9.4  c-0.9-4-0.5-14,0-20.1C64,44.8,67,33.9,67.4,32.8z\", fill: \"#101114\"},\r\n{path: \"M62.4,76.1c-0.2-1.4-0.4-1-0.5-1.1c-0.1-0.1-1.5,0.3-2.1,0.4c-4.6,0.8-9.3,0.6-9.3,0.6v0c0,0-4.7,0.2-9.3-0.6  c-0.6-0.1-2-0.5-2.1-0.4c-0.1,0.1-0.3-0.3-0.5,1.1c-0.2,1.4-1.4,9.9-1.3,10c0.1,0.1,2.9,1.8,7.9,2.6c1.1,0.1,5.3,0.2,5.3,0.2v0  c0,0,4.2-0.2,5.3-0.2c5-0.8,7.8-2.5,7.9-2.6C63.8,86.1,62.7,77.5,62.4,76.1L62.4,76.1z\", fill: \"#131417\"},\r\n{path: \"M67,36l1.2,0.7V38H67V36z\", fill: \"#0D0E13\"},\r\n{path: \"M59,2.9c-0.1-0.1-0.2-0.1-0.4-0.2C58.1,2.6,58.3,2.6,59,2.9z\", fill: \"#C2C6C1\"},\r\n{path: \"M67.7,11.8C66.9,6.6,61,3.7,59,2.9c2,1.4,3.4,9.1,4.5,14c1.1,5.2,1.8,13.5,1.8,13.5s2.4,0.4,3.6,7  C69.7,41.5,68.9,18.8,67.7,11.8L67.7,11.8z\", fill: \"#D8684A\"},\r\n{path: \"M42.6,2.8c-0.1,0-0.2,0.1-0.4,0.2C42.9,2.7,43.2,2.6,42.6,2.8z\", fill: \"#C2C6C1\"},\r\n{path: \"M33.5,11.8c-1.2,7-1.9,29.7-1.1,25.5c1.1-6.5,3.6-7,3.6-7s0.6-8.3,1.8-13.5c1.1-4.9,2.5-12.6,4.5-14  C40.3,3.8,34.4,6.6,33.5,11.8z\", fill: \"#D8684A\"},\r\n{path: \"M63.4,56.8l3.8-2.9v3.4l-3.8,2.4V56.8z M37.7,83.9c-0.2,1.3-0.3,2.2-0.2,2.2c0.1,0.1,2.9,1.8,7.9,2.6  c1.1,0.1,5.3,0.2,5.3,0.2v0c0,0,4.2-0.2,5.3-0.2c5-0.8,7.8-2.5,7.9-2.6c0,0-0.3-2.4-0.6-4.9L37.7,83.9L37.7,83.9z\", fill: \"#202226\"},\r\n{path: \"M37.3,40.1l24.4-5.8l3.7-1.2c0.2-1.1,0.4-1.9,0.4-2.1c0.2-1.1-0.9-1.9-4.1-3.5c-3.2-1.6-11.1-1.8-11.1-1.8v0  c0,0-8,0.1-11.1,1.8c-3.2,1.6-4.3,2.4-4.1,3.5C35.5,31.7,36.5,36.7,37.3,40.1L37.3,40.1z\", fill: \"#212428\"},\r\n{path: \"M33.9,32.9c0,0,0,12.6,0,16.3c0,3.7,0,8.7,0.3,12.1c0.3,3.4,0.9,18.7,0.9,18.7v0.3c0,0,2-5.3,2.4-9.4  c0.9-4,0.5-14,0-20.1C37.3,44.8,34.3,33.9,33.9,32.9z\", fill: \"#101114\"},\r\n{path: \"M69.9,36c0.3-9.3,0.3-9.1,0.3-9.1c0-0.2,0.7-7.9-0.6-15.3c-1.3-7.5-9.7-9.5-9.7-9.5l-0.4,0l-8.9-0.3v0l-8.8,0.3  l-0.4,0c0,0-8.4,2.1-9.7,9.5c-1.3,7.4-0.6,15.1-0.6,15.3c0,0,0-0.3,0.3,9.1c0.4,9.8-0.6,34-0.5,37c0.1,2.9-0.2,9.2,0.4,10.8  c0.6,1.6,2.6,9.6,2.6,9.6s3.2,6.2,16.8,5.3v0c13.5,0.9,16.7-5.3,16.7-5.3s2-8,2.6-9.6c0.6-1.6,0.2-7.9,0.4-10.8  C70.5,70,69.5,45.8,69.9,36L69.9,36z M69.3,83.9c-1.6,9.7-4,11.2-6.7,12.7c-2.7,1.4-11.9,1.6-11.9,1.6v0c-0.9,0-9.3-0.3-11.9-1.6  c-2.7-1.5-5.1-3-6.7-12.7c-1.6-9.7,0.6-13.6,0.4-21.9c-0.3-8.3-0.3-29.6-0.2-32c0.1-2.4-0.6-19.1,1.7-21.5c2.3-2.4,5.6-5.7,7.6-5.8  C42.6,2.7,44,2.6,45,2.6V2.6h5.7v0h5.6v0.1c1.2,0,2.3,0,3.5,0.1c2,0.1,5.3,3.4,7.6,5.8c2.3,2.4,1.6,19.1,1.7,21.5  c0.1,2.4,0.1,23.7-0.2,32C68.6,70.3,70.9,74.2,69.3,83.9L69.3,83.9z\", fill: \"#9E4A36\"},\r\n{path: \"M34.3,91c0,0,1.5,3.3,4,4.1c2.4,0.9,4.2,1.3,4.2,1.3s-3.1,0-4.8-1C36.1,94.5,34.2,93.1,34.3,91z\", fill: \"#9E4A36\"},\r\n{path: \"M41.5,2.7c0,0-3.4,1.6-4.4,2.8c-1,1.1-2.5,3-2.6,3.3c0,0.2,0,0.9,0,0.9S40.6,3.1,41.5,2.7z\", fill: \"#FEFDF8\"},\r\n{path: \"M50.6,1.8L50.6,1.8L50.6,1.8L50.6,1.8z M58.4,3c0-0.3-1.7-0.8-2.2-0.9c-0.4-0.1-5.3-0.2-5.6-0.2l0,0  c-0.3,0-5.2,0.2-5.6,0.3c-0.4,0.1-2.1,0.6-2.2,0.9c0,0.3,0.3,0.5,0.7,0.3s1-0.7,1.4-0.8c0.4-0.1,5.7-0.3,5.7-0.3l0,0  c0.4,0,5.2,0.2,5.6,0.3c0.4,0.1,1,0.6,1.4,0.8C58.1,3.5,58.4,3.3,58.4,3L58.4,3z\", fill: \"#1D2021\"},\r\n{path: \"M32.8,36.8c0,0-3.4,1.4-3.6,2.7C29,40.8,29,41,29.2,41s3.8-1.9,3.8-1.9v-2.3L32.8,36.8L32.8,36.8z\", fill: \"#D14C32\"},\r\n{path: \"M29.2,41.3l0-0.3l3.8-1.9v0.3L29.2,41.3z\", fill: \"#0D0E13\"},\r\n{path: \"M34.3,36.1L33,36.8V38h1.2V36.1z\", fill: \"#0D0E13\"},\r\n{path: \"M37.9,56.9L34,54v3.4l3.8,2.4V56.9z\", fill: \"#202226\"},\r\n{path: \"M38.7,76.1c0.2-1.4,0.4-1,0.5-1.1c0.1-0.1,1.5,0.3,2.1,0.4c4.6,0.8,9.3,0.6,9.3,0.6v0c0,0,4.7,0.2,9.3-0.6  c0.6-0.1,2-0.5,2.1-0.4c0.1,0.1,0.3-0.3,0.5,1.1c0.2,1.4,1.4,9.9,1.3,10c-0.1,0.1-2.9,1.8-7.9,2.6c-1.1,0.1-5.3,0.2-5.3,0.2v0  c0,0-4.2-0.2-5.3-0.2c-5-0.8-7.8-2.5-7.9-2.6C37.3,86.1,38.5,77.5,38.7,76.1L38.7,76.1z M39.6,27.5c3.2-1.6,11.1-1.8,11.1-1.8v0  c0,0,8,0.1,11.1,1.8c3.2,1.6,4.3,2.4,4.1,3.5c-0.2,1.1-2.6,12-2.6,12.3c0,0.3-0.2,0.7-1.5,0.4c-1.2-0.4-11.2-0.8-11.2-0.8v0  c0,0-10,0.4-11.2,0.8c-1.2,0.4-1.5-0.1-1.5-0.4c0-0.3-2.4-11.2-2.6-12.3C35.3,29.9,36.4,29.2,39.6,27.5L39.6,27.5z\", fill: \"#343C3E\"},\r\n{path: \"M38.2,28.3c-2.2,1.2-3,1.9-2.8,2.8c0.2,1.1,2.6,12,2.6,12.3c0,0.3,0.2,0.7,1.5,0.4c0.3-0.1,1-0.2,2-0.2  C39.9,39.9,38.7,31.8,38.2,28.3L38.2,28.3z M63.1,28.2c2.2,1.2,3,1.9,2.8,2.8c-0.2,1.1-2.6,12-2.6,12.3c0,0.3-0.2,0.7-1.5,0.4  c-0.3-0.1-1-0.2-2-0.2C61.4,39.9,62.6,31.8,63.1,28.2L63.1,28.2z\", fill: \"#2E3436\"},\r\n{path: \"M65.3,29.7c-0.6-0.6-1.8-1.2-3.6-2.2c-3.2-1.6-11.1-1.8-11.1-1.8v0h0v0c-0.6,0-8.1,0.2-11.1,1.8  c-1.8,0.9-2.9,1.6-3.6,2.2l2.8,2.2c0,0,5.7-0.9,11.9-1v0c6.1,0.1,11.8,0.7,11.8,0.7L65.3,29.7L65.3,29.7z\", fill: \"#202226\"},\r\n{path: \"M59.8,2.7c0,0,3.4,1.6,4.4,2.8c1,1.1,2.5,3,2.6,3.3c0,0.2,0,0.9,0,0.9S60.7,3.1,59.8,2.7z\", fill: \"#FEFDF8\"},\r\n{path: \"M55.4,3.8H44.8c0,0-2.2,0.6-2.9,8.6c-0.7,8-2,14.1,3,12.7c4.9-1.4,7.6-0.2,9.8-0.3c2.2-0.2,5.6,2.3,4.3-8.6  C57.7,5.2,57.6,4.6,55.4,3.8L55.4,3.8z\", fill: \"#D8684A\"},\r\n{path: \"M44.5,24.3l1.8-18.1l-1.3,6.4L44.5,24.3z M56.8,24.2L55,6.2l1.3,6.4L56.8,24.2z M66.9,90.9c0,0-1.5,3.3-4,4.1  c-2.4,0.9-4.2,1.3-4.2,1.3s3.1,0,4.8-1C65.2,94.5,67,93,66.9,90.9L66.9,90.9z\", fill: \"#9E4A36\"},\r\n{path: \"M39.2,75c-0.1,0.1-0.3-0.3-0.5,1.1s-1.4,9.9-1.3,10c0,0,0.7,0.5,2,1L41,75.4C40.3,75.2,39.2,74.9,39.2,75  L39.2,75z M62.4,76.2c-0.2-1.4-0.4-1-0.5-1.1c0-0.1-1.1,0.2-1.8,0.3l1.6,11.8c1.2-0.5,1.9-0.9,2-1C63.8,86.1,62.6,77.6,62.4,76.2  L62.4,76.2z\", fill: \"#2E3436\"},\r\n{path: \"M68.4,36.8c0,0,3.4,1.4,3.6,2.7s0.2,1.5,0,1.5c-0.2,0-3.8-1.9-3.8-1.9v-2.3L68.4,36.8L68.4,36.8z\", fill: \"#D14C32\"},\r\n{path: \"M72,41.3l0-0.3L68.3,39v0.3L72,41.3z\", fill: \"#0D0E13\"},\r\n{path: \"M55.9,88.3H44.7c0,0-6.1-0.8-5.3,1.8c0.8,2.6-0.8,5.8,7.6,5.8h6.5c8.5,0,6.8-3.2,7.6-5.8  C62,87.4,55.9,88.3,55.9,88.3L55.9,88.3z\", fill: \"#D8684A\"},\r\n{path: \"M51,86.9c-5.2,0-9.8-1.1-13.1-3l-0.2,0c-0.3,2.4-0.3,2.2-0.2,2.3c0.1,0.1,2.9,1.8,7.9,2.6  c1.1,0.1,5.3,0.2,5.3,0.2v0c0,0,4.2-0.2,5.3-0.2c5-0.8,7.8-2.5,7.9-2.6c0,0-0.1-0.8-0.2-2C60.4,85.9,55.9,86.9,51,86.9z\", fill: \"#202226\"},\r\n{path: \"M58.3,51.8c1.2-3.8-0.8-5.2-3.1-5.6c-1.8-0.3-6.4-0.2-7.9-0.1c-2.7,0.2-5.6,1.3-4.2,5.7c2.4,7.5-0.1,17.8,0,19  c0.1,0.9,1.4,2.4,4,2.8c0.9,0.1,6.8,0.1,7.9-0.1c2.1-0.5,3.2-1.8,3.3-2.6C58.4,69.6,55.9,59.3,58.3,51.8L58.3,51.8z\", fill: \"#D8684A\"}];\r\n\r\nclass Marker extends Component {\r\n\r\n\tcomponentDidMount = () => {\r\n\t\tthis.marker = [];\r\n\t}\r\n\r\n\tcomponentDidUpdate = (prevProps) => {\r\n\t\tlet {map, angle, move, isCurrentPositionReceived} = this.props;\r\n\t\tlet speed = this.props.currentLocation.speed;\r\n\r\n\t\tif (map !== prevProps.map || (speed > 5 && (angle !== prevProps.angle || move > 5)) || isCurrentPositionReceived !== prevProps.isCurrentPositionReceived) {\r\n\t\t\tthis.renderMarker();\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentWillUnmount = () => {\r\n\t    this.removeMarker();\r\n\t}\r\n\r\n\tremoveMarker = () => {\r\n\t\tif (this.marker && this.marker.length > 0) {\r\n\t    \tthis.marker.forEach(i => {\r\n\t    \t\ti.setMap(null);\r\n\t    \t});      \r\n\t    }\r\n\t}\r\n\r\n\trenderMarker = () => {\r\n\t\tthis.removeMarker();\r\n\r\n\t\tlet {map, google, mapCenter, currentLocation} = this.props;\r\n\t\tlet position = currentLocation.lat ? {lat: currentLocation.lat, lng: currentLocation.lng} : undefined;\r\n\r\n\t\tlet pos = position || mapCenter;\r\n\t\tposition = new google.maps.LatLng(pos.lat, pos.lng);\r\n\r\n\t\telements.forEach((i, index) => {\r\n\t\t\t\r\n\t\t\tvar icon = {\r\n\t\t\t\t//path: 'M 23.5 7 c 0.276 0 0.5 0.224 0.5 0.5 v 0.511 c 0 0.793 -0.926 0.989 -1.616 0.989 l -1.086 -2 h 2.202 Z m -1.441 3.506 c 0.639 1.186 0.946 2.252 0.946 3.666 c 0 1.37 -0.397 2.533 -1.005 3.981 v 1.847 c 0 0.552 -0.448 1 -1 1 h -1.5 c -0.552 0 -1 -0.448 -1 -1 v -1 h -13 v 1 c 0 0.552 -0.448 1 -1 1 h -1.5 c -0.552 0 -1 -0.448 -1 -1 v -1.847 c -0.608 -1.448 -1.005 -2.611 -1.005 -3.981 c 0 -1.414 0.307 -2.48 0.946 -3.666 c 0.829 -1.537 1.851 -3.453 2.93 -5.252 c 0.828 -1.382 1.262 -1.707 2.278 -1.889 c 1.532 -0.275 2.918 -0.365 4.851 -0.365 s 3.319 0.09 4.851 0.365 c 1.016 0.182 1.45 0.507 2.278 1.889 c 1.079 1.799 2.101 3.715 2.93 5.252 Z m -16.059 2.994 c 0 -0.828 -0.672 -1.5 -1.5 -1.5 s -1.5 0.672 -1.5 1.5 s 0.672 1.5 1.5 1.5 s 1.5 -0.672 1.5 -1.5 Z m 10 1 c 0 -0.276 -0.224 -0.5 -0.5 -0.5 h -7 c -0.276 0 -0.5 0.224 -0.5 0.5 s 0.224 0.5 0.5 0.5 h 7 c 0.276 0 0.5 -0.224 0.5 -0.5 Z m 2.941 -5.527 s -0.74 -1.826 -1.631 -3.142 c -0.202 -0.298 -0.515 -0.502 -0.869 -0.566 c -1.511 -0.272 -2.835 -0.359 -4.441 -0.359 s -2.93 0.087 -4.441 0.359 c -0.354 0.063 -0.667 0.267 -0.869 0.566 c -0.891 1.315 -1.631 3.142 -1.631 3.142 c 1.64 0.313 4.309 0.497 6.941 0.497 s 5.301 -0.184 6.941 -0.497 Z m 2.059 4.527 c 0 -0.828 -0.672 -1.5 -1.5 -1.5 s -1.5 0.672 -1.5 1.5 s 0.672 1.5 1.5 1.5 s 1.5 -0.672 1.5 -1.5 Z m -18.298 -6.5 h -2.202 c -0.276 0 -0.5 0.224 -0.5 0.5 v 0.511 c 0 0.793 0.926 0.989 1.616 0.989 l 1.086 -2 Z',\r\n\t\t\t\tpath: i.path,\r\n\t\t\t\tfillColor: i.fill,\r\n\t\t\t\tstrokeColor: i.fill,\r\n                fillOpacity: 1.0,\r\n                scale: 0.4,\r\n                anchor: new google.maps.Point(50, 50),\r\n    \t\t\t//scaledSize: new google.maps.Size(20, 20),\r\n\t\t\t\trotation: this.props.angle\r\n\t\t\t};\r\n\r\n\t\t\tconst pref = {\r\n\t\t        map: map,\r\n\t\t        position: position,\r\n\t\t        icon\r\n\t\t    };\r\n\r\n\t\t    this.marker[index] = new google.maps.Marker(pref);\r\n\t\t});\r\n\r\n\t\t\r\n\t\t\r\n\t\t// var icon = {\r\n\t\t// \t//path: 'M 23.5 7 c 0.276 0 0.5 0.224 0.5 0.5 v 0.511 c 0 0.793 -0.926 0.989 -1.616 0.989 l -1.086 -2 h 2.202 Z m -1.441 3.506 c 0.639 1.186 0.946 2.252 0.946 3.666 c 0 1.37 -0.397 2.533 -1.005 3.981 v 1.847 c 0 0.552 -0.448 1 -1 1 h -1.5 c -0.552 0 -1 -0.448 -1 -1 v -1 h -13 v 1 c 0 0.552 -0.448 1 -1 1 h -1.5 c -0.552 0 -1 -0.448 -1 -1 v -1.847 c -0.608 -1.448 -1.005 -2.611 -1.005 -3.981 c 0 -1.414 0.307 -2.48 0.946 -3.666 c 0.829 -1.537 1.851 -3.453 2.93 -5.252 c 0.828 -1.382 1.262 -1.707 2.278 -1.889 c 1.532 -0.275 2.918 -0.365 4.851 -0.365 s 3.319 0.09 4.851 0.365 c 1.016 0.182 1.45 0.507 2.278 1.889 c 1.079 1.799 2.101 3.715 2.93 5.252 Z m -16.059 2.994 c 0 -0.828 -0.672 -1.5 -1.5 -1.5 s -1.5 0.672 -1.5 1.5 s 0.672 1.5 1.5 1.5 s 1.5 -0.672 1.5 -1.5 Z m 10 1 c 0 -0.276 -0.224 -0.5 -0.5 -0.5 h -7 c -0.276 0 -0.5 0.224 -0.5 0.5 s 0.224 0.5 0.5 0.5 h 7 c 0.276 0 0.5 -0.224 0.5 -0.5 Z m 2.941 -5.527 s -0.74 -1.826 -1.631 -3.142 c -0.202 -0.298 -0.515 -0.502 -0.869 -0.566 c -1.511 -0.272 -2.835 -0.359 -4.441 -0.359 s -2.93 0.087 -4.441 0.359 c -0.354 0.063 -0.667 0.267 -0.869 0.566 c -0.891 1.315 -1.631 3.142 -1.631 3.142 c 1.64 0.313 4.309 0.497 6.941 0.497 s 5.301 -0.184 6.941 -0.497 Z m 2.059 4.527 c 0 -0.828 -0.672 -1.5 -1.5 -1.5 s -1.5 0.672 -1.5 1.5 s 0.672 1.5 1.5 1.5 s 1.5 -0.672 1.5 -1.5 Z m -18.298 -6.5 h -2.202 c -0.276 0 -0.5 0.224 -0.5 0.5 v 0.511 c 0 0.793 0.926 0.989 1.616 0.989 l 1.086 -2 Z',\r\n\t\t// \t//url: car,\r\n\t\t// \tscaledSize: new google.maps.Size(this.props.zoom * 4, this.props.zoom *4),\r\n\t\t// \trotation: this.props.angle\r\n\t\t// };\r\n\r\n\t\t// const pref = {\r\n\t //        map: map,\r\n\t //        position: position,\r\n\t //        icon\r\n\t //    };\r\n\r\n\t //    this.marker = new google.maps.Marker(pref);\r\n\r\n\t    this.props.resetMove();\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\nexport default Marker;","import React, { Component } from 'react';\r\nimport { db } from '../Firebase/firebase';\r\nimport {Polyline, GoogleApiWrapper} from 'google-maps-react';\r\nimport Map from './map';\r\nimport Marker from './marker';\r\n\r\nlet navigatorId;\r\n// let startingPosition = {\r\n// \tlat: 0,\r\n// \tlng: 0,\r\n// \tspeed: 0,\r\n// \ttimestamp: new Date(Date.now()).getTime()\r\n// };\r\n// let startingAcceleration = {\r\n// \tx: 0,\r\n// \ty: 0,\r\n// \tz: 0\r\n// }\r\nlet line = 0;\r\n\r\nconst EARTH_RADIUS = 6371000;\r\nconst NAVIGATOR_OPTIONS = {\r\n\tenableHighAccuracy: true,\r\n\ttimeout: 5000,\r\n\tmaximumAge: 0\r\n};\r\n\r\nvar test = [{\"lat\":53.9078391,\"lng\":27.5028172},{\"lat\":53.9078391,\"lng\":27.5028172},{\"lat\":53.9078391,\"lng\":27.5028172},{\"lat\":53.9078391,\"lng\":27.5028172},{\"lat\":53.9128525,\"lng\":27.512991},{\"lat\":53.9128525,\"lng\":27.512991},{\"lat\":53.9128525,\"lng\":27.512991},{\"lat\":53.9128488,\"lng\":27.5130116},{\"lat\":53.9128488,\"lng\":27.5130116},{\"lat\":53.9127758,\"lng\":27.5132506},{\"lat\":53.9126229,\"lng\":27.513717},{\"lat\":53.9126229,\"lng\":27.513717},{\"lat\":53.9126229,\"lng\":27.513717},{\"lat\":53.9126229,\"lng\":27.513717},{\"lat\":53.9126229,\"lng\":27.513717},{\"lat\":53.912676,\"lng\":27.5136713},{\"lat\":53.9129754,\"lng\":27.5133758},{\"lat\":53.913093,\"lng\":27.5133039},{\"lat\":53.9134635,\"lng\":27.5131476},{\"lat\":53.9151672,\"lng\":27.5132573},{\"lat\":53.915816,\"lng\":27.5127634},{\"lat\":53.916643,\"lng\":27.5118005},{\"lat\":53.9173488,\"lng\":27.5102886},{\"lat\":53.9185482,\"lng\":27.5085329},{\"lat\":53.9188518,\"lng\":27.5078105},{\"lat\":53.9186994,\"lng\":27.506738},{\"lat\":53.9184887,\"lng\":27.5060651},{\"lat\":53.9183832,\"lng\":27.5057117},{\"lat\":53.9178415,\"lng\":27.504539},{\"lat\":53.9178329,\"lng\":27.5015442},{\"lat\":53.9183814,\"lng\":27.5008958},{\"lat\":53.9189755,\"lng\":27.500344},{\"lat\":53.9193168,\"lng\":27.5000538},{\"lat\":53.9196736,\"lng\":27.4996665},{\"lat\":53.9200695,\"lng\":27.4994854},{\"lat\":53.9201694,\"lng\":27.4994475},{\"lat\":53.9202334,\"lng\":27.4995277},{\"lat\":53.9230475,\"lng\":27.5015305},{\"lat\":53.9236247,\"lng\":27.5022578},{\"lat\":53.9242591,\"lng\":27.5031579},{\"lat\":53.9246002,\"lng\":27.5030926},{\"lat\":53.9290579,\"lng\":27.5081026},{\"lat\":53.9290682,\"lng\":27.5083526},{\"lat\":53.9289552,\"lng\":27.5085915},{\"lat\":53.928876,\"lng\":27.5087913},{\"lat\":53.9291931,\"lng\":27.5079978},{\"lat\":53.9295068,\"lng\":27.5071103},{\"lat\":53.9283308,\"lng\":27.5020486},{\"lat\":53.929992,\"lng\":27.4989459},{\"lat\":53.9305241,\"lng\":27.4948941},{\"lat\":53.9306007,\"lng\":27.4941027},{\"lat\":53.9305994,\"lng\":27.4940375},{\"lat\":53.9308061,\"lng\":27.4926087},{\"lat\":53.9311276,\"lng\":27.4851512},{\"lat\":53.9310572,\"lng\":27.4842858},{\"lat\":53.9297835,\"lng\":27.4769621},{\"lat\":53.929773,\"lng\":27.4749408},{\"lat\":53.9324022,\"lng\":27.4752095},{\"lat\":53.9330717,\"lng\":27.4754068},{\"lat\":53.9331336,\"lng\":27.4752065},{\"lat\":53.9332562,\"lng\":27.4753008},{\"lat\":53.9334716,\"lng\":27.4753647},{\"lat\":53.933795,\"lng\":27.4755969},{\"lat\":53.937211,\"lng\":27.4719187},{\"lat\":53.9378615,\"lng\":27.4702019},{\"lat\":53.9382297,\"lng\":27.4691252},{\"lat\":53.9385356,\"lng\":27.4682272},{\"lat\":53.9389163,\"lng\":27.4671874},{\"lat\":53.9393144,\"lng\":27.4670429},{\"lat\":53.9400574,\"lng\":27.4648794},{\"lat\":53.9404236,\"lng\":27.464919},{\"lat\":53.9405129,\"lng\":27.4650404},{\"lat\":53.9405721,\"lng\":27.4652471},{\"lat\":53.9405896,\"lng\":27.465649},{\"lat\":53.9406156,\"lng\":27.4658731},{\"lat\":53.9406887,\"lng\":27.4660047}];\r\n\r\n\r\nclass Geolocation extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t    //const {lat, lng} = this.props.initialCenter;\r\n\r\n\t    this.state = {\r\n\t    \t//isInitCoordsReceived: false, // загрузка текущего местоположения\r\n\t    \tisDataFetched: false, // обработка загрузки данных\r\n\t    \tisChartView: false, // показ значений акселерометра в графике,\r\n\t    \tisRecordingMode: false,\r\n\t    \tdata: [],\r\n\t    \tcurrentLocation: {}, \r\n\t    \tpreviousLocation: {},\r\n\t    \tacceleration: {},\r\n\t    \tcontext: null,\r\n\t    \tzoom: 16,\r\n\t    \tangle: 0,\r\n\t    \tmove: 0\r\n\t    };\r\n\r\n\t    this.canvas = React.createRef();\r\n\t    this.mymap = React.createRef();\r\n\t    this.mymarker = React.createRef();\r\n\r\n\t}\r\n\r\n\tcomponentDidMount = () => {\r\n\t\tconst canvas = this.canvas.current;\r\n\t\tthis.setState({ context: canvas.getContext('2d') });\r\n\r\n\t // \tvar data;\r\n\t\t// db.collection(\"coverage\").get().then(querySnapshot => {\r\n\t\t//     querySnapshot.forEach(function(doc) {\r\n\t\t//     \tif (doc.data().data) {\r\n\t\t//     \t\tdata = JSON.parse(doc.data().data);\r\n\t\t//     \t} else {\r\n\t\t//     \t\tdata = [];\r\n\t\t//     \t}\r\n\r\n\t\t//     });\r\n\t\t// }).then(() => {\r\n\t\t// \tthis.setState({ \r\n\t\t// \t\tcontext: canvas.getContext('2d'),\r\n\t\t// \t\tisDataFetched: true,\r\n\t //  \t\t\tdata \r\n\t //  \t\t}, () => console.log(this.state.data));\r\n\t\t// });\r\n\r\n\r\n\t\tthis.setState({ // убрать при подключении Firestore\r\n\t\t\tcontext: canvas.getContext('2d'),\r\n\t\t\tisDataFetched: true,\r\n\t\t\tdata: [] //set test for testing purposes\r\n\t\t});\r\n\r\n\t\twindow.addEventListener('load', function() {\r\n\t\t  window.history.pushState({ noBackExitsApp: true }, '')\r\n\t\t})\r\n\r\n\t\twindow.addEventListener('popstate', function(event) {\r\n\t\t  if (event.state && event.state.noBackExitsApp) {\r\n\t\t    window.history.pushState({ noBackExitsApp: true }, '')\r\n\t\t  }\r\n\t\t})\r\n\t}\r\n\r\n\tcomponentDidUpdate(prevProps, prevState) {\r\n\t   //\r\n\t}\r\n\r\n\ttoggleRecording = () => {\r\n\t\tif (!this.state.startRecording) {\r\n\t\t\tthis.startRecording();\r\n\t\t} else {\r\n\t\t\tthis.stopRecording();\r\n\t\t}\r\n\t\t\r\n\t\tthis.setState({isRecordingMode: !this.state.isRecordingMode});  \r\n\t}\r\n\r\n\tstartRecording = () => {\r\n\t\tif (navigator && navigator.geolocation) { // обработка отсутствия\r\n\t\t\tnavigatorId = navigator.geolocation.watchPosition(this.updateLocationData, this.err, NAVIGATOR_OPTIONS);\r\n\t    \tif (window.DeviceMotionEvent) { //обработка отсутствия\r\n\t    \t\twindow.addEventListener(\"devicemotion\", this.updateAccelerationData); \r\n\t    \t}\r\n\t    }\t\r\n\t}\r\n\r\n\terr = () => {\r\n\t\tconsole.log(\"error\");\r\n\t}\r\n\r\n\tupdateAccelerationData = (ev) => {\r\n\t\tlet x = ev.acceleration.x;\r\n\t\tlet y = ev.acceleration.y;\r\n\t\tlet z = ev.acceleration.z;\r\n\r\n\t\tif (x !== null && y !== null && z !== null) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tacceleration: { x, y, z}\r\n\t\t\t}, () => {\r\n\t\t\t\tif (line === this.canvas.current.width) line = 0;\r\n\t\t\t\t\r\n\t\t\t\tthis.drawBackground(\"white\", 0);\r\n\r\n\t\t\t\tvar index = 1;\r\n\t\t\t\tlet accel = this.state.acceleration;\r\n\t\t\t\tfor (var prop in accel) {\r\n\t\t\t\t\tthis.drawLine(accel[prop], index);\r\n\t\t\t\t\tindex++;\r\n\t\t\t\t}\r\n\t\t\t\tline++;\r\n\r\n\t\t\t\tthis.drawBackground(\"grey\", 1);\r\n\t\t\t\tfor (var i = 2; i < 8; i++) this.drawBackground(\"white\", i);\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\ttoRad = num => {\r\n\t\treturn num * Math.PI/180;\r\n\t}\r\n\r\n\tcalculateDistance = (lat1, lng1, lat2, lng2) => {\r\n\t\tvar dLat = this.toRad(lat2 - lat1);\r\n\t\tvar dLng = this.toRad(lng2 - lng1);\r\n\r\n\t\tvar a = Math.sin(dLat / 2) * Math.sin(dLat / 2) + Math.cos(this.toRad(lat1)) * Math.cos(this.toRad(lat2)) * Math.sin(dLng / 2) * Math.sin(dLng / 2);\r\n\r\n\t\tvar distance = EARTH_RADIUS * 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\r\n\t\t//console.log(distance); // в метрах\r\n\t\treturn distance;\r\n\t}\r\n\r\n\tcalculateAngle = (lat1, lng1, lat2, lng2) => {\r\n\r\n\t\tvar dLng = (lng2 - lng1);\r\n\r\n\t\tvar y = Math.sin(dLng) * Math.cos(lat2);\r\n\t\tvar x = Math.cos(lat1) * Math.sin(lat2) - Math.sin(lat1) * Math.cos(lat2) * Math.cos(dLng);\r\n\r\n\t\tvar brng = Math.atan2(y, x);\r\n\r\n\t\tvar pi = Math.PI;\r\n\t\tbrng = brng * (180/pi);\r\n\t\tbrng = (brng + 360) % 360;\r\n\t    brng = 360 - brng; // count degrees counter-clockwise - remove to make clockwise\r\n\r\n\t    return brng;\r\n\r\n\t}\r\n\r\n\tdrawLine = (value, index) => {\r\n\t\tlet ctx = this.state.context;\r\n\t\tvar axis = index * 100 - 50;\r\n\r\n\t\tctx.beginPath();\r\n\t\tctx.strokeStyle=\"black\";\r\n\t\tctx.moveTo(line, axis + value * 5);\r\n\t\tctx.lineTo(line, axis);\r\n\t\tctx.stroke();\r\n\t}\r\n\r\n\tdrawBackground = (color, offset) => {\r\n\t\tlet ctx = this.state.context;\r\n\r\n\t\tctx.beginPath();\r\n\t\tctx.strokeStyle = color;\r\n\t\tctx.moveTo(line + offset, 0);\r\n\t\tctx.lineTo(line + offset, 300);\r\n\t\tctx.stroke();\r\n\t}\r\n\r\n\tupdateLocationData = location => {\r\n\t\tvar prev = this.state.currentLocation;\r\n\r\n\t\tvar lat = location.coords.latitude;\r\n\t\tvar lng = location.coords.longitude;\r\n\t\tvar timestamp = location.timestamp;\r\n\r\n\t\tvar distance = this.calculateDistance(prev.lat, prev.lng, lat, lng); // в метрах\r\n\t\tvar angle = this.calculateAngle(prev.lat, prev.lng, lat, lng);\r\n\t\tvar time = Math.abs(prev.timestamp - timestamp)/ 1000; // в секундах\r\n\t\tvar speed = (distance/time) ? (distance/time * 3600 / 1000) : 0; //в км/час\r\n\r\n\t\tthis.setState({\t\r\n\t\t\tpreviousLocation: prev,\r\n\t\t\tcurrentLocation: { lat,\tlng, speed,\ttimestamp },\r\n\t\t\tdata: [...this.state.data, { lat, lng }],\r\n\t\t\tangle: (Math.abs(angle - this.state.angle) > 22) ? angle : this.state.angle,\r\n\t\t\tmove: this.state.move + distance\r\n\t\t});\r\n\t}\r\n\r\n\tupdateResultingData = () => {\r\n\t\t\r\n\t}\r\n\r\n\tstopRecording = () => {\r\n\t\tconsole.log(\"stopped\");\r\n\t\tconsole.log(this.state.data);\r\n\r\n\t\t//db.collection(\"coverage\").doc(topleft).set({data: JSON.stringify(this.state.data)});\r\n\r\n\t\tnavigator.geolocation.clearWatch(navigatorId);\r\n\t\twindow.removeEventListener(\"devicemotion\", this.updateAccelerationData);\r\n\t}\r\n\r\n\ttoggleChart = () => {\r\n\t\tthis.setState({isChartView: !this.state.isChartView});\r\n\t}\r\n\r\n\tresetMove = () => {\r\n\t\tthis.setState({\r\n\t\t\tmove: 0\r\n\t\t})\r\n\t}\r\n\r\n\tonZoomChanged = (mapProps, map, clickEvent) => {\r\n\t\tconsole.log(mapProps);\r\n\t}\r\n\r\n\trender() {\r\n\t\tlet google = this.props.google;\r\n\t\tlet zoom = this.state.zoom;\r\n\t\tlet recordingButtonText = this.state.isRecordingMode ? \"Stop Recording\" : \"Start Recording\";\r\n\t\tlet chartViewButtonText = this.state.isChartView ? \"Hide Chart\" : \"Show Chart\";\r\n\r\n\t\tif (this.props.loaded) {\r\n\t\t\treturn (\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<button onClick={this.toggleRecording} disabled={!this.state.isDataFetched}>{recordingButtonText}</button>\r\n\t\t\t\t\t<button onClick={this.toggleChart}>{chartViewButtonText}</button>\r\n\t\t\t\t\t<div>lat={this.state.currentLocation.lat}</div>\r\n\t\t\t\t\t<div>lng={this.state.currentLocation.lng}</div>\r\n\t\t\t\t\t<div>speed={this.state.currentLocation.speed}</div>\r\n\t\t\t\t\t<div>angle={this.state.angle}</div>\r\n\t\t\t\t\t<canvas id=\"canvas\" width=\"400\" height=\"300\" ref={this.canvas} style={{display: this.state.isChartView ? \"block\" : \"none\"}}/>\r\n\r\n\t\t\t\t\t<div id=\"map\" style={{width: \"400px\", height: \"300px\", position: \"relative\"}}>\r\n\t\t\t\t\t<Map \r\n\t\t\t\t\t\tcenterAroundCurrentLocation\r\n\t\t\t\t\t\tgoogle={this.props.google}\r\n\t\t\t\t\t\tupdateLocationData={this.updateLocationData}\r\n\t\t\t\t\t\t//position={{lat: this.state.currentLocation.lat, lng: this.state.currentLocation.lng}} \r\n\t\t\t\t\t\tcurrentLocation={this.state.currentLocation}\r\n\t\t\t\t\t\tisRecordingMode={this.state.isRecordingMode}\r\n\t\t\t\t\t\tonZoomChanged={this.onZoomChanged}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t<Marker \r\n\t\t\t\t\t\t\t//position={{lat: this.state.currentLocation.lat, lng: this.state.currentLocation.lng}} \r\n\t\t\t\t\t\t\tangle={this.state.angle}\r\n\t\t\t\t\t\t\tmove={this.state.move}\r\n\t\t\t\t\t\t\t//speed={this.state.currentLocation.speed}\r\n\t\t\t\t\t\t\tresetMove={this.resetMove}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<Polyline\r\n\t\t\t\t\t\t\tpath={this.state.data}\r\n\t\t\t\t\t\t\tstrokeColor=\"#4D8FAC\"\r\n\t\t\t\t\t\t\tstrokeOpacity={0.8}\r\n\t\t\t\t\t\t\tstrokeWeight={4} \r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Map>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t);\r\n\t\t} \r\n\t}\r\n}\r\n\r\n//export default Geolocation;\r\n\r\nexport default GoogleApiWrapper({\r\n\tapiKey: process.env.REACT_APP_GOOGLE_MAPS_API_KEY\r\n})(Geolocation);\r\n\r\n// <Marker position={{lat: 53.7378391, lng: 27.2028172}} />\r\n// <Marker position={{lat: 53.9078391, lng: 27.5028172}} />\r\n\r\n\r\n// <Marker \r\n// \t\tposition={{lat: 37.762391, lng: -122.439192}}\r\n//     icon={{\r\n//       url: \"/path/to/custom_icon.png\",\r\n//       anchor: new google.maps.Point(32,32),\r\n//       scaledSize: new google.maps.Size(64,64)\r\n//     }}\r\n// />\r\n\r\n\r\n// <Map\r\n//   \tgoogle={this.props.google}\r\n//   \tstyle={{width: \"100%\", height: \"100%\", position: \"relative\"}}\r\n//   \tzoom={11}\r\n//   \tinitialCenter={this.state.currentLocation}\r\n\r\n\r\n// >\r\n// \t<Polyline\r\n//     \tpath={this.state.data}\r\n//     \tstrokeColor=\"#0000FF\"\r\n//     \tstrokeOpacity={0.8}\r\n//     \tstrokeWeight={2} \r\n//     />\r\n\r\n// </Map>\r\n\r\n\r\n","import React, {Component} from 'react';\nimport './App.css';\nimport Geolocation from './Geolocation/geolocation';\n\nclass App extends Component {\n  render() {\n    return (\n      <div className=\"App\">\n        <Geolocation/>\n      </div>\n      );\n  }  \n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\n\nimport * as serviceWorker from './serviceWorker';\n\nimport App from './components/App';\n//import {db} from './components/Firebase/firebase';\n\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}