(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{20:function(t,e,a){t.exports=a(52)},25:function(t,e,a){},26:function(t,e,a){},51:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAA/1BMVEVHcEz/PYb/QIH/QIH/QIH/QIH/P4H/AP//QIH/P4H/P4D/QIH/P4H/QIH/PoP/QIH/QYD/QIH/QIL/P4D/P4H/QIH/QYL/QID/QIH/QIH/QIH/QIH/QIL/QIH/QIH/QIH/QIH/P4L/QIH/QIL/QIH/P4D/QIL/QYL/QIFmBjaAEEPyO3t1Cz6QFkpqCDitIVnxO3qyI1ujHlRpBzhwCjtvCjt3DD6jHVR/EEK2JV7dM3CbGlD7Pn98DkCIE0ezI1zrOXf2PHzUMGzNLWnvOnrTMGtrCDiMFEivIlrCKGOJFEfyO3qvIVnuOnnMLWjHKmXuOnh/D0L8P3+nHlb9P4BL/8vHAAAAKHRSTlMAFeP89HNJAeTVmezN/iH7SvJ0nem+VlTLytT4eHegtPe14mxroXBymdOUCgAAAShJREFUSMdjYBgFwxFoaAyQBnYZDg2CQFpCjB2mQVmDOKAK08EJFdDW0kQBWg5oOtQh6hl5NbDq0HVEt4IDYgUbiB2gj67DKAgkYmNkgKSDD6yBFcT009TH5mwXO01XJK4AWAMXiOmjqWmIqd5KR1PTEokvBNagCGJaAx2BYYenHlDUHElAGKyBB8S0AzkbXQPE70gComANTCCmLU4NFkgCnGAN3CCmDk4NZkgCImANLCCmKU4NJkgCgmANzCCmMU4NekgC/ORpINlJJHtaidRgBUecFwkRJw9LGvboGvzdsCYNcOLzICHxgZO3M6b5IODtrumEkbzBGcgXbL5BICIDBYfgykAkZ1EGKWILATVoqaFCZDEjBy+YZJkIq1aQFB/MhfEooDYAALj/shmbD+/0AAAAAElFTkSuQmCC"},52:function(t,e,a){"use strict";a.r(e);var n=a(2),o=a.n(n),r=a(12),i=a.n(r);a(25),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var c=a(4),s=a(5),l=a(7),p=a(6),u=a(8),m=(a(26),a(19)),g=a(17),d=(a.n(g).a.initializeApp({apiKey:"AIzaSyBexhCuV6JNCsyakFOeBK7NmFb_oM_pgxo",authDomain:"bumpyroadsinformer.firebaseapp.com",databaseURL:"https://bumpyroadsinformer.firebaseio.com",projectId:"bumpyroadsinformer",storageBucket:"",messagingSenderId:"854546127925",appId:"1:854546127925:web:d3c2a81c7c4e9ba6"}).firestore(),a(14)),h=(a(51),function(t){function e(t){var a;Object(c.a)(this,e),(a=Object(l.a)(this,Object(p.a)(e).call(this,t))).componentDidMount=function(){a.setState({data:[]}),a.props.centerAroundCurrentLocation&&navigator&&navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(t){var e=t.coords;a.setState({currentLocation:{lat:e.latitude,lng:e.longitude}},a.props.updateLocationData(t))}),a.loadMap()},a.loadMap=function(){if(a.props.google){var t=a.props.google.maps,e=a.props.zoom,n=a.state.currentLocation,o=n.lat,r=n.lng,i=new t.LatLng(o,r),c=Object.assign({},{center:i,zoom:e});a.map=new t.Map(a.mymap.current,c),a.map.addListener("zoom_changed",function(t){a.updateZoom()})}},a.updateZoom=function(){console.log(a.map.getZoom()),a.setState({zoom:a.map.getZoom()})},a.recenterMap=function(){var t=a.map,e=a.state.currentLocation,n=a.props.google.maps;if(t){var o=new n.LatLng(e.lat,e.lng);t.panTo(o)}},a.updateCurrent=function(t){a.props.updateLocationData(t)},a.renderChildren=function(){var t=a.props.children;if(t)return o.a.Children.map(t,function(t){return o.a.cloneElement(t,{map:a.map,google:a.props.google,mapCenter:a.state.currentLocation})})};var n=t.initialCenter,r=n.lat,i=n.lng;return a.state={currentLocation:{lat:r,lng:i},zoom:17},a.mymap=o.a.createRef(),a.mymarker=o.a.createRef(),a}return Object(u.a)(e,t),Object(s.a)(e,[{key:"componentDidUpdate",value:function(t,e){t.google!==this.props.google&&this.loadMap(),e.currentLocation!==this.state.currentLocation&&this.recenterMap()}},{key:"render",value:function(){this.props.google,this.state.zoom;return o.a.createElement("div",{ref:this.mymap,style:{width:"400px",height:"300px",position:"relative"}},"Loading...",this.renderChildren())}}]),e}(n.Component)),v=h;h.defaultProps={zoom:16,initialCenter:{lat:53.893009,lng:27.567444},centerAroundCurrentLocation:!1};var f,A=function(t){function e(){var t,a;Object(c.a)(this,e);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(l.a)(this,(t=Object(p.a)(e)).call.apply(t,[this].concat(o)))).componentDidUpdate=function(t){(a.props.map!==t.map||a.props.angle!==t.angle||a.props.move>5)&&a.renderMarker()},a.componentWillUnmount=function(){a.marker&&a.marker.setMap(null)},a.removeMarker=function(){a.marker&&a.marker.setMap(null)},a.renderMarker=function(){a.removeMarker();var t=a.props,e=t.map,n=t.google,o=t.position,r=t.mapCenter,i=o||r,c={map:e,position:o=new n.maps.LatLng(i.lat,i.lng),icon:{path:"M 23.5 7 c 0.276 0 0.5 0.224 0.5 0.5 v 0.511 c 0 0.793 -0.926 0.989 -1.616 0.989 l -1.086 -2 h 2.202 Z m -1.441 3.506 c 0.639 1.186 0.946 2.252 0.946 3.666 c 0 1.37 -0.397 2.533 -1.005 3.981 v 1.847 c 0 0.552 -0.448 1 -1 1 h -1.5 c -0.552 0 -1 -0.448 -1 -1 v -1 h -13 v 1 c 0 0.552 -0.448 1 -1 1 h -1.5 c -0.552 0 -1 -0.448 -1 -1 v -1.847 c -0.608 -1.448 -1.005 -2.611 -1.005 -3.981 c 0 -1.414 0.307 -2.48 0.946 -3.666 c 0.829 -1.537 1.851 -3.453 2.93 -5.252 c 0.828 -1.382 1.262 -1.707 2.278 -1.889 c 1.532 -0.275 2.918 -0.365 4.851 -0.365 s 3.319 0.09 4.851 0.365 c 1.016 0.182 1.45 0.507 2.278 1.889 c 1.079 1.799 2.101 3.715 2.93 5.252 Z m -16.059 2.994 c 0 -0.828 -0.672 -1.5 -1.5 -1.5 s -1.5 0.672 -1.5 1.5 s 0.672 1.5 1.5 1.5 s 1.5 -0.672 1.5 -1.5 Z m 10 1 c 0 -0.276 -0.224 -0.5 -0.5 -0.5 h -7 c -0.276 0 -0.5 0.224 -0.5 0.5 s 0.224 0.5 0.5 0.5 h 7 c 0.276 0 0.5 -0.224 0.5 -0.5 Z m 2.941 -5.527 s -0.74 -1.826 -1.631 -3.142 c -0.202 -0.298 -0.515 -0.502 -0.869 -0.566 c -1.511 -0.272 -2.835 -0.359 -4.441 -0.359 s -2.93 0.087 -4.441 0.359 c -0.354 0.063 -0.667 0.267 -0.869 0.566 c -0.891 1.315 -1.631 3.142 -1.631 3.142 c 1.64 0.313 4.309 0.497 6.941 0.497 s 5.301 -0.184 6.941 -0.497 Z m 2.059 4.527 c 0 -0.828 -0.672 -1.5 -1.5 -1.5 s -1.5 0.672 -1.5 1.5 s 0.672 1.5 1.5 1.5 s 1.5 -0.672 1.5 -1.5 Z m -18.298 -6.5 h -2.202 c -0.276 0 -0.5 0.224 -0.5 0.5 v 0.511 c 0 0.793 0.926 0.989 1.616 0.989 l 1.086 -2 Z",scaledSize:new n.maps.Size(a.props.zoom,a.props.zoom),rotation:a.props.angle}};a.marker=new n.maps.Marker(c),a.props.resetMove()},a}return Object(u.a)(e,t),Object(s.a)(e,[{key:"render",value:function(){return null}}]),e}(n.Component),C=0,k=6371e3,L={enableHighAccuracy:!0,timeout:5e3,maximumAge:0},b=function(t){function e(t){var a;return Object(c.a)(this,e),(a=Object(l.a)(this,Object(p.a)(e).call(this,t))).componentDidMount=function(){var t=a.canvas.current;a.setState({context:t.getContext("2d")}),a.setState({context:t.getContext("2d"),isDataFetched:!0,data:[]})},a.toggleRecording=function(){a.state.startRecording?a.stopRecording():a.startRecording(),a.setState({isRecording:!a.state.isRecording})},a.startRecording=function(){"geolocation"in navigator&&(f=navigator.geolocation.watchPosition(a.updateLocationData,a.err,L),window.DeviceMotionEvent&&window.addEventListener("devicemotion",a.updateAccelerationData))},a.err=function(){console.log("error")},a.updateAccelerationData=function(t){var e=t.acceleration.x,n=t.acceleration.y,o=t.acceleration.z;null!==e&&null!==n&&null!==o&&a.setState({acceleration:{x:e,y:n,z:o}},function(){C===a.canvas.current.width&&(C=0),a.drawBackground("white",0);var t=1,e=a.state.acceleration;for(var n in e)a.drawLine(e[n],t),t++;C++,a.drawBackground("grey",1);for(var o=2;o<8;o++)a.drawBackground("white",o)})},a.toRad=function(t){return t*Math.PI/180},a.calculateDistance=function(t,e,n,o){var r=a.toRad(n-t),i=a.toRad(o-e),c=Math.sin(r/2)*Math.sin(r/2)+Math.cos(a.toRad(t))*Math.cos(a.toRad(n))*Math.sin(i/2)*Math.sin(i/2);return 2*k*Math.atan2(Math.sqrt(c),Math.sqrt(1-c))},a.calculateAngle=function(t,e,a,n){var o=n-e,r=Math.sin(o)*Math.cos(a),i=Math.cos(t)*Math.sin(a)-Math.sin(t)*Math.cos(a)*Math.cos(o),c=Math.atan2(r,i);return c=360-(c=((c*=180/Math.PI)+360)%360)},a.drawLine=function(t,e){var n=a.state.context,o=100*e-50;n.beginPath(),n.strokeStyle="black",n.moveTo(C,o+5*t),n.lineTo(C,o),n.stroke()},a.drawBackground=function(t,e){var n=a.state.context;n.beginPath(),n.strokeStyle=t,n.moveTo(C+e,0),n.lineTo(C+e,300),n.stroke()},a.updateLocationData=function(t){var e=a.state.currentLocation,n=t.coords.latitude,o=t.coords.longitude,r=t.timestamp,i=a.calculateDistance(e.lat,e.lng,n,o),c=a.calculateAngle(e.lat,e.lng,n,o),s=Math.abs(e.timestamp-r)/1e3,l=i/s?i/s:0;a.setState({previousLocation:e,currentLocation:{lat:n,lng:o,speed:l,timestamp:r},data:[].concat(Object(m.a)(a.state.data),[{lat:n,lng:o}]),angle:Math.abs(c-a.state.angle)>22?c:a.state.angle,move:a.state.move+i})},a.updateResultingData=function(){},a.stopRecording=function(){console.log("stopped"),console.log(a.state.data),navigator.geolocation.clearWatch(f),window.removeEventListener("devicemotion",a.updateAccelerationData)},a.toggleChart=function(){a.setState({isChartView:!a.state.isChartView})},a.resetMove=function(){a.setState({move:0})},a.state={isDataFetched:!1,isChartView:!1,isRecording:!1,data:[],currentLocation:{},previousLocation:{},acceleration:{},context:null,zoom:16,angle:0,move:0},a.canvas=o.a.createRef(),a.mymap=o.a.createRef(),a.mymarker=o.a.createRef(),a}return Object(u.a)(e,t),Object(s.a)(e,[{key:"componentDidUpdate",value:function(t,e){}},{key:"render",value:function(){this.props.google,this.state.zoom;var t=this.state.isRecording?"Stop Recording":"Start Recording",e=this.state.isChartView?"Hide Chart":"Show Chart";if(this.props.loaded)return o.a.createElement("div",null,o.a.createElement("button",{onClick:this.toggleRecording,disabled:!this.state.isDataFetched},t),o.a.createElement("button",{onClick:this.toggleChart},e),o.a.createElement("div",null,"lat=",this.state.currentLocation.lat),o.a.createElement("div",null,"lng=",this.state.currentLocation.lng),o.a.createElement("div",null,"speed=",this.state.currentLocation.speed),o.a.createElement("div",null,"angle=",this.state.angle),o.a.createElement("canvas",{id:"canvas",width:"400",height:"300",ref:this.canvas,style:{display:this.state.isChartView?"block":"none"}}),o.a.createElement("div",{id:"map",style:{width:"400px",height:"300px",position:"relative"}},o.a.createElement(v,{centerAroundCurrentLocation:!0,google:this.props.google,angle:this.state.angle,data:this.state.data,updateLocationData:this.updateLocationData},o.a.createElement(A,{position:{lat:this.state.currentLocation.lat,lng:this.state.currentLocation.lng},angle:this.state.angle,zoom:this.state.zoom,move:this.state.move,resetMove:this.resetMove}),o.a.createElement(d.Polyline,{path:this.state.data,strokeColor:"#0000FF",strokeOpacity:.8,strokeWeight:4}))))}}]),e}(n.Component),M=Object(d.GoogleApiWrapper)({apiKey:"AIzaSyDEVWK9Upl3k2YqFEmSPAitUBZoi36oFAo"})(b),w=function(t){function e(){return Object(c.a)(this,e),Object(l.a)(this,Object(p.a)(e).apply(this,arguments))}return Object(u.a)(e,t),Object(s.a)(e,[{key:"render",value:function(){return o.a.createElement("div",{className:"App"},o.a.createElement(M,null))}}]),e}(n.Component);i.a.render(o.a.createElement(w,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[20,1,2]]]);
//# sourceMappingURL=main.66d34947.chunk.js.map