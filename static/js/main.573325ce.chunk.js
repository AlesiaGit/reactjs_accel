(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{20:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAA/1BMVEVHcEz/PYb/QIH/QIH/QIH/QIH/P4H/AP//QIH/P4H/P4D/QIH/P4H/QIH/PoP/QIH/QYD/QIH/QIL/P4D/P4H/QIH/QYL/QID/QIH/QIH/QIH/QIH/QIL/QIH/QIH/QIH/QIH/P4L/QIH/QIL/QIH/P4D/QIL/QYL/QIFmBjaAEEPyO3t1Cz6QFkpqCDitIVnxO3qyI1ujHlRpBzhwCjtvCjt3DD6jHVR/EEK2JV7dM3CbGlD7Pn98DkCIE0ezI1zrOXf2PHzUMGzNLWnvOnrTMGtrCDiMFEivIlrCKGOJFEfyO3qvIVnuOnnMLWjHKmXuOnh/D0L8P3+nHlb9P4BL/8vHAAAAKHRSTlMAFeP89HNJAeTVmezN/iH7SvJ0nem+VlTLytT4eHegtPe14mxroXBymdOUCgAAAShJREFUSMdjYBgFwxFoaAyQBnYZDg2CQFpCjB2mQVmDOKAK08EJFdDW0kQBWg5oOtQh6hl5NbDq0HVEt4IDYgUbiB2gj67DKAgkYmNkgKSDD6yBFcT009TH5mwXO01XJK4AWAMXiOmjqWmIqd5KR1PTEokvBNagCGJaAx2BYYenHlDUHElAGKyBB8S0AzkbXQPE70gComANTCCmLU4NFkgCnGAN3CCmDk4NZkgCImANLCCmKU4NJkgCgmANzCCmMU4NekgC/ORpINlJJHtaidRgBUecFwkRJw9LGvboGvzdsCYNcOLzICHxgZO3M6b5IODtrumEkbzBGcgXbL5BICIDBYfgykAkZ1EGKWILATVoqaFCZDEjBy+YZJkIq1aQFB/MhfEooDYAALj/shmbD+/0AAAAAElFTkSuQmCC"},22:function(t,e,a){t.exports=a(53)},27:function(t,e,a){},28:function(t,e,a){},53:function(t,e,a){"use strict";a.r(e);var n=a(2),o=a.n(n),l=a(7),i=a.n(l);a(27),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var r,c=a(9),s=a(10),g=a(12),u=a(11),d=a(13),p=(a(28),a(21)),m=a(15),h=a(18),v=(a.n(h).a.initializeApp({apiKey:"AIzaSyBexhCuV6JNCsyakFOeBK7NmFb_oM_pgxo",authDomain:"bumpyroadsinformer.firebaseapp.com",databaseURL:"https://bumpyroadsinformer.firebaseio.com",projectId:"bumpyroadsinformer",storageBucket:"",messagingSenderId:"854546127925",appId:"1:854546127925:web:d3c2a81c7c4e9ba6"}).firestore(),a(14)),A=a(20),w=a.n(A),C={lat:0,lng:0,speed:0,timestamp:new Date(Date.now()).getTime()},f={x:0,y:0,z:0},I=0,P=6371e3,b={enableHighAccuracy:!0,timeout:5e3,maximumAge:0},D=[{lat:53.9078391,lng:27.5028172},{lat:53.9078391,lng:27.5028172},{lat:53.9078391,lng:27.5028172},{lat:53.9078391,lng:27.5028172},{lat:53.9128525,lng:27.512991},{lat:53.9128525,lng:27.512991},{lat:53.9128525,lng:27.512991},{lat:53.9128488,lng:27.5130116},{lat:53.9128488,lng:27.5130116},{lat:53.9127758,lng:27.5132506},{lat:53.9126229,lng:27.513717},{lat:53.9126229,lng:27.513717},{lat:53.9126229,lng:27.513717},{lat:53.9126229,lng:27.513717},{lat:53.9126229,lng:27.513717},{lat:53.912676,lng:27.5136713},{lat:53.9129754,lng:27.5133758},{lat:53.913093,lng:27.5133039},{lat:53.9134635,lng:27.5131476},{lat:53.9151672,lng:27.5132573},{lat:53.915816,lng:27.5127634},{lat:53.916643,lng:27.5118005},{lat:53.9173488,lng:27.5102886},{lat:53.9185482,lng:27.5085329},{lat:53.9188518,lng:27.5078105},{lat:53.9186994,lng:27.506738},{lat:53.9184887,lng:27.5060651},{lat:53.9183832,lng:27.5057117},{lat:53.9178415,lng:27.504539},{lat:53.9178329,lng:27.5015442},{lat:53.9183814,lng:27.5008958},{lat:53.9189755,lng:27.500344},{lat:53.9193168,lng:27.5000538},{lat:53.9196736,lng:27.4996665},{lat:53.9200695,lng:27.4994854},{lat:53.9201694,lng:27.4994475},{lat:53.9202334,lng:27.4995277},{lat:53.9230475,lng:27.5015305},{lat:53.9236247,lng:27.5022578},{lat:53.9242591,lng:27.5031579},{lat:53.9246002,lng:27.5030926},{lat:53.9290579,lng:27.5081026},{lat:53.9290682,lng:27.5083526},{lat:53.9289552,lng:27.5085915},{lat:53.928876,lng:27.5087913},{lat:53.9291931,lng:27.5079978},{lat:53.9295068,lng:27.5071103},{lat:53.9283308,lng:27.5020486},{lat:53.929992,lng:27.4989459},{lat:53.9305241,lng:27.4948941},{lat:53.9306007,lng:27.4941027},{lat:53.9305994,lng:27.4940375},{lat:53.9308061,lng:27.4926087},{lat:53.9311276,lng:27.4851512},{lat:53.9310572,lng:27.4842858},{lat:53.9297835,lng:27.4769621},{lat:53.929773,lng:27.4749408},{lat:53.9324022,lng:27.4752095},{lat:53.9330717,lng:27.4754068},{lat:53.9331336,lng:27.4752065},{lat:53.9332562,lng:27.4753008},{lat:53.9334716,lng:27.4753647},{lat:53.933795,lng:27.4755969},{lat:53.937211,lng:27.4719187},{lat:53.9378615,lng:27.4702019},{lat:53.9382297,lng:27.4691252},{lat:53.9385356,lng:27.4682272},{lat:53.9389163,lng:27.4671874},{lat:53.9393144,lng:27.4670429},{lat:53.9400574,lng:27.4648794},{lat:53.9404236,lng:27.464919},{lat:53.9405129,lng:27.4650404},{lat:53.9405721,lng:27.4652471},{lat:53.9405896,lng:27.465649},{lat:53.9406156,lng:27.4658731},{lat:53.9406887,lng:27.4660047}],M=function(t){function e(t){var a;Object(c.a)(this,e),(a=Object(g.a)(this,Object(u.a)(e).call(this,t))).componentDidMount=function(){var t=a.canvas.current;a.setState({context:t.getContext("2d")}),a.setState({context:t.getContext("2d"),isDataFetched:!0,data:D}),a.props.centerAroundCurrentLocation&&navigator&&navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(t){var e=t.coords;a.setState({currentPosition:{lat:e.latitude,lng:e.longitude,speed:0,timestamp:new Date(Date.now()).getTime()}})}),a.loadMap()},a.loadMap=function(){if(a.props&&a.props.google){var t=a.props.google.maps,e=a.props.zoom,n=a.state.currentPosition,o=n.lat,l=n.lng,i=new t.LatLng(o,l),r=Object.assign({},{center:i,zoom:e});a.map=new t.Map(a.mymap,r)}},a.recenterMap=function(){var t=a.map,e=a.state.currentPosition,n=a.props.google.maps;if(t){var o=new n.LatLng(e.lat,e.lng);t.panTo(o)}},a.centerMap=function(t){var e=t.coords.latitude,n=t.coords.longitude,o=t.timestamp;a.setState({currentPosition:{lat:e,lng:n,speed:0,timestamp:o},isInitCoordsReceived:!0})},a.startRecording=function(){"geolocation"in navigator&&(r=navigator.geolocation.watchPosition(a.updatePositionData,a.err,b),window.DeviceMotionEvent&&window.addEventListener("devicemotion",a.updateAccelerationData))},a.err=function(){console.log("error")},a.updateAccelerationData=function(t){var e=t.acceleration.x,n=t.acceleration.y,o=t.acceleration.z;null!==e&&null!==n&&null!==o&&a.setState({currentAcceleration:{x:e,y:n,z:o}},function(){I===a.canvas.current.width&&(I=0),a.drawBackground("white",0);var t=1,e=a.state.currentAcceleration;for(var n in e)a.drawLine(e[n],t),t++;I++,a.drawBackground("grey",1);for(var o=2;o<8;o++)a.drawBackground("white",o)})},a.toRad=function(t){return t*Math.PI/180},a.calculateDistance=function(t,e,n,o){var l=a.toRad(n-t),i=a.toRad(o-e),r=Math.sin(l/2)*Math.sin(l/2)+Math.cos(a.toRad(t))*Math.cos(a.toRad(n))*Math.sin(i/2)*Math.sin(i/2);return 2*P*Math.atan2(Math.sqrt(r),Math.sqrt(1-r))},a.calculateAngle=function(t,e,a,n){var o=n-e,l=Math.sin(o)*Math.cos(a),i=Math.cos(t)*Math.sin(a)-Math.sin(t)*Math.cos(a)*Math.cos(o),r=Math.atan2(l,i);return r=360-(r=((r=Math.toDegrees(r))+360)%360)},a.drawLine=function(t,e){var n=a.state.context,o=100*e-50;n.beginPath(),n.strokeStyle="black",n.moveTo(I,o+5*t),n.lineTo(I,o),n.stroke()},a.drawBackground=function(t,e){var n=a.state.context;n.beginPath(),n.strokeStyle=t,n.moveTo(I+e,0),n.lineTo(I+e,300),n.stroke()},a.updatePositionData=function(t){a.setState({prevPosition:Object(m.a)({},a.state.currentPosition)},function(){var e=a.state.prevPosition,n=t.coords.latitude,o=t.coords.longitude,l=t.timestamp,i=a.calculateDistance(e.lat,e.lng,n,o),r=(e.timestamp-l)/1e3,c=Math.abs(i/r);a.setState({currentPosition:{lat:n,lng:o,speed:c,timestamp:l},data:[].concat(Object(p.a)(a.state.data),[{lat:n,lng:o}]),angle:a.calculateAngle(e.lat,e.lng,n,o)},function(){console.log(a.state.data)})})},a.updateResultingData=function(){},a.stopRecording=function(){console.log("stopped"),console.log(a.state.data),navigator.geolocation.clearWatch(r),window.removeEventListener("devicemotion",a.updateAccelerationData)},a.showChart=function(){a.setState({isChartView:!a.state.isChartView})};var n=a.props.initialCenter,l=n.lat,i=n.lng;return a.state={isInitCoordsReceived:!1,isDataFetched:!1,isChartView:!1,data:[],currentPosition:{lat:l,lng:i,speed:0,timestamp:new Date(Date.now()).getTime()},prevPosition:Object(m.a)({},C),currentAcceleration:Object(m.a)({},f),context:null,zoom:4,angle:0},a.canvas=o.a.createRef(),a.mymap=o.a.createRef(),"geolocation"in navigator&&navigator.geolocation.getCurrentPosition(a.centerMap,a.err,b),a}return Object(d.a)(e,t),Object(s.a)(e,[{key:"componentDidUpdate",value:function(t,e){t.google!==this.props.google&&this.loadMap(),e.currentPosition!==this.state.currentPosition&&this.recenterMap()}},{key:"render",value:function(){var t=this.props.google;return this.state.isInitCoordsReceived?o.a.createElement("div",null,o.a.createElement("button",{onClick:this.startRecording,disabled:!this.state.isDataFetched},"Start recording"),o.a.createElement("button",{onClick:this.showChart},"Show chart"),o.a.createElement("div",null,"lat=",this.state.currentPosition.lat),o.a.createElement("div",null,"lng=",this.state.currentPosition.lng),o.a.createElement("div",null,"speed=",this.state.currentPosition.speed),o.a.createElement("canvas",{id:"canvas",width:"400",height:"300",ref:this.canvas,style:{display:this.state.isChartView?"block":"none"}}),o.a.createElement("div",null,this.state.currentPosition.lat),o.a.createElement("div",{id:"map",style:{width:"400px",height:"300px",position:"relative"}},o.a.createElement(v.Map,{centerAroundCurrentLocation:!0,ref:this.mymap,google:this.props.google,style:{width:"400px",height:"300px",position:"relative"}},o.a.createElement(v.Marker,{position:{lat:this.state.currentPosition.lat,lng:this.state.currentPosition.lng},icon:{path:"M 23.5 7 c 0.276 0 0.5 0.224 0.5 0.5 v 0.511 c 0 0.793 -0.926 0.989 -1.616 0.989 l -1.086 -2 h 2.202 Z m -1.441 3.506 c 0.639 1.186 0.946 2.252 0.946 3.666 c 0 1.37 -0.397 2.533 -1.005 3.981 v 1.847 c 0 0.552 -0.448 1 -1 1 h -1.5 c -0.552 0 -1 -0.448 -1 -1 v -1 h -13 v 1 c 0 0.552 -0.448 1 -1 1 h -1.5 c -0.552 0 -1 -0.448 -1 -1 v -1.847 c -0.608 -1.448 -1.005 -2.611 -1.005 -3.981 c 0 -1.414 0.307 -2.48 0.946 -3.666 c 0.829 -1.537 1.851 -3.453 2.93 -5.252 c 0.828 -1.382 1.262 -1.707 2.278 -1.889 c 1.532 -0.275 2.918 -0.365 4.851 -0.365 s 3.319 0.09 4.851 0.365 c 1.016 0.182 1.45 0.507 2.278 1.889 c 1.079 1.799 2.101 3.715 2.93 5.252 Z m -16.059 2.994 c 0 -0.828 -0.672 -1.5 -1.5 -1.5 s -1.5 0.672 -1.5 1.5 s 0.672 1.5 1.5 1.5 s 1.5 -0.672 1.5 -1.5 Z m 10 1 c 0 -0.276 -0.224 -0.5 -0.5 -0.5 h -7 c -0.276 0 -0.5 0.224 -0.5 0.5 s 0.224 0.5 0.5 0.5 h 7 c 0.276 0 0.5 -0.224 0.5 -0.5 Z m 2.941 -5.527 s -0.74 -1.826 -1.631 -3.142 c -0.202 -0.298 -0.515 -0.502 -0.869 -0.566 c -1.511 -0.272 -2.835 -0.359 -4.441 -0.359 s -2.93 0.087 -4.441 0.359 c -0.354 0.063 -0.667 0.267 -0.869 0.566 c -0.891 1.315 -1.631 3.142 -1.631 3.142 c 1.64 0.313 4.309 0.497 6.941 0.497 s 5.301 -0.184 6.941 -0.497 Z m 2.059 4.527 c 0 -0.828 -0.672 -1.5 -1.5 -1.5 s -1.5 0.672 -1.5 1.5 s 0.672 1.5 1.5 1.5 s 1.5 -0.672 1.5 -1.5 Z m -18.298 -6.5 h -2.202 c -0.276 0 -0.5 0.224 -0.5 0.5 v 0.511 c 0 0.793 0.926 0.989 1.616 0.989 l 1.086 -2 Z",anchor:new t.maps.Point(32,32),scaledSize:new t.maps.Size(32,32),rotation:this.state.angle}}))),o.a.createElement("img",{src:w.a,alt:"car"}),o.a.createElement("button",{onClick:this.stopRecording},"Stop recording")):o.a.createElement("div",null,o.a.createElement("canvas",{id:"canvas",width:"400",height:"300",ref:this.canvas,style:{display:this.state.isChartView?"block":"none"}}),o.a.createElement("div",null,"Getting current position..."))}}]),e}(n.Component),E=Object(v.GoogleApiWrapper)({apiKey:"AIzaSyBEjJp8lxBIPduEeyWBsc0LPUTRkt9gWYo"})(M);M.defaultProps={zoom:14,initialCenter:{lat:37.774929,lng:-122.419416},centerAroundCurrentLocation:!1};var k=function(t){function e(){return Object(c.a)(this,e),Object(g.a)(this,Object(u.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(s.a)(e,[{key:"render",value:function(){return o.a.createElement("div",{className:"App"},o.a.createElement(E,null))}}]),e}(n.Component);i.a.render(o.a.createElement(k,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[22,1,2]]]);
//# sourceMappingURL=main.573325ce.chunk.js.map